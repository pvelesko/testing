<!DOCTYPE html><html lang=en><head><title>Roofline by Intel Advisor</title><meta http-equiv=Content-type content="text/html; charset=utf-8"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><style>.data_loading>div,.data_loading>button{display:none;}</style><!--
* @license Copyright 2013 - 2018 Intel Corporation All Rights Reserved.
*
* The source code, information and material ("Material") contained herein is owned by Intel Corporation or its
* suppliers or licensors, and title to such Material remains with Intel Corporation or its suppliers or
* licensors. The Material contains proprietary information of Intel or its suppliers and licensors. The
* Material is protected by worldwide copyright laws and treaty provisions. No part of the Material may be used,
* copied, reproduced, modified, published, uploaded, posted, transmitted, distributed or disclosed in any way
* without Intel's prior express written permission. No license under any patent, copyright or other intellectual
* property rights in the Material is granted to or conferred upon you, either expressly, by implication,
* inducement, estoppel or otherwise. Any license under such intellectual property rights must be express and
* approved by Intel in writing.
*
* Unless otherwise agreed by Intel in writing, you may not remove or alter this notice or any other notice
* embedded in Materials by Intel or Intel's suppliers or licensors in any way.
--></head><body class="body_area data_loading"><div class="top_report_area report_only"><span class=background_layer></span> <span id=summary_info_result_path data-tooltip=%roofline_path_to_results% class=path></span> <span class=brand_name><i>Roofline Chart from the </i>Intel<sup>&#xAE;</sup><a href=https://software.intel.com/en-us/advisor data-tooltip=%roofline_product_link_title%>Advisor</a></span></div><div id=summary_info_bar class="br toolbar_item_bar summary_info report_only"><div id=summary_info_control class=roofline_toolbar_control><div id=summary_info_panel class="roofline_toolbar_control_items roofline_popup_shadow text"><ul class=item><li id=summary_info_project></li><li id=summary_collected_on>%roofline_collected_on%</li></ul><div class="roofline_toolbar_control_caption roofline_group_caption_colors">%roofline_summary_program_metrics%</div><ul id=program_metrics_items class=item></ul><div class="roofline_toolbar_control_caption roofline_group_caption_colors">%roofline_summary_loop_metrics%</div><ul id=loop_metrics_items class=item></ul><div class="roofline_toolbar_control_caption roofline_group_caption_colors">%roofline_summary_platform_info%</div><ul id=platform_info_items class=item></ul></div><span class=roofline_toolbar_control_content>%roofline_summary_result%</span><div class="zoom_button icon select"></div></div></div><div class=content><div class="zoom_toolbar hidden4copy" id=roofline_zoom_toolbar><span id=select_point data-tooltip=%roofline_toolbar_select_point% class="zoom_button icon cursor"></span> <span id=select_zoom data-tooltip=%roofline_toolbar_select_zoom% class="zoom_button icon magnifier"></span> <span id=select_hand data-tooltip=%roofline_toolbar_select_move% class="zoom_button icon hand"></span> <span id=undo_zoom data-tooltip=%roofline_toolbar_undo% class="zoom_button icon undo"></span> <span id=redo_zoom data-tooltip=%roofline_toolbar_redo% class="zoom_button icon redo"></span> <span id=cancel_zoom data-tooltip=%roofline_toolbar_cancel_zoom% class="zoom_button icon cross"></span> <label id=copy_content_control class=no_report><span id=copy_content data-tooltip=%roofline_toolbar_html_export% class="zoom_button icon export"></span><div id=copy_content_select class="zoom_button icon select cling_button"><ul id=copy_content_items class="zoom_select_items roofline_popup_shadow radio extra_space"><li id=export_as_html class="selected splitter">%roofline_toolbar_html_export%</li><li id=export_as_svg>%roofline_toolbar_svg_export% <label style=display:none><input type=text class=no_close_popup disabled=disabled></label><br><label class=zoom_select_prop>%roofline_toolbar_svg_width%<input type=text width=true class="zoom_select_prop_input no_close_popup"></label><br><label class=zoom_select_prop>%roofline_toolbar_svg_height%<input type=text class="zoom_select_prop_input no_close_popup"></label></li></ul></div></label> <label id=roofline_cores_bar class="br toolbar_item_bar"><div id=roofline_cores_control class=roofline_toolbar_control><div id=roofline_cores_select_items class="roofline_toolbar_control_items no_close_popup roofline_popup_shadow"><ul id=core_number_items class="zoom_select_items no_close_popup"></ul></div><span class=roofline_cores_caption>%roofline_N_threaded_roofs%</span> <span id=roofline_cores_content class=roofline_toolbar_control_content></span> <label class=explanation_symbol data-tooltip=%roofline_N_threaded_roofs_expl%>?</label><div id=roofline_cores_select class="zoom_button icon select"></div></div></label> <label id=roofline_type_bar class="br always_visible toolbar_item_bar no_report"><div id=roofline_type_control class=roofline_toolbar_control><div id=roofline_type_select_items class="roofline_toolbar_control_items no_close_popup roofline_popup_shadow"><div id=roofline_type_select_body class="no_close_popup roofline_type_select_items"><form style=display:none><label><input type=radio class=no_close_popup disabled=disabled></label></form></div><div class="roofline_toolbar_control_btns no_close_popup"><button>%roofline_settings_roof_default%</button> <button>%roofline_configuration_apply%</button> <button>%roofline_configuration_cancel%</button></div></div><span id=roofline_type_content class="roofline_toolbar_control_content pictured"></span><div id=roofline_type_select class="zoom_button icon select"></div></div></label> <label id=roofline_compare_bar class="br toolbar_item_bar"><div id=roofline_compare_control class=roofline_toolbar_control><div id=roofline_compare_select_items class="roofline_toolbar_control_items no_close_popup roofline_popup_shadow"><span id=load_compare data-tooltip=%roofline_toolbar_load_compare% class="zoom_button icon compare no_close_popup no_report"></span><div class="roofline_toolbar_control_caption roofline_group_caption_colors no_report">%roofline_compare_results_label% <span id=delete_compare data-tooltip=%roofline_toolbar_clear_compare% class="zoom_button icon cross no_close_popup no_report disabled clear_compare"></span></div><ul id=loaded_compare_items class="zoom_select_items pictured no_close_popup"></ul><div class="roofline_toolbar_control_caption roofline_group_caption_colors no_report">%roofline_compare_recent_label%</div><ul id=ready_compare_items class="zoom_select_items no_report no_close_popup"></ul></div><span id=roofline_compare_content class="roofline_toolbar_control_content pictured">%roofline_compare_nodata_label%</span><div id=roofline_compare_select class="zoom_button icon select"></div></div></label><div id=expand_toolbar_content class="expand_button icon expand"></div></div><div class="menu_button hidden4copy" id=roofline_menu_button><div></div><div></div><div></div></div><div class=settings id=roofline_settings><div class="settings_title roofline_group_caption_colors">%roofline_settings_representation_caption%</div><label class=single_settings_item><input type=checkbox class=settings_item id=use_zone_coloring>%roofline_settings_zone_coloring%</label><div class="single_settings_item roofline_view_mode_setting" id=roofline_view_mode><label class=radio_settings_item><input type=radio class="" name=rooflineviewmode value=fittoview>%roofline_settings_fit_to_view% <label class=explanation_symbol data-tooltip=%roofline_settings_fit_to_view_expl%>?</label></label> <label class=radio_settings_item><input type=radio class="" name=rooflineviewmode value=onewideview>%roofline_settings_one_view% <label class=explanation_symbol data-tooltip=%roofline_settings_one_view_expl%>?</label></label></div><div class="settings_title roofline_group_caption_colors">%roofline_settings_roofs_caption%</div><label class="single_settings_item roofs_strategy_setting"><input type=checkbox class=toolbar_item_input id=use_single_thread_strategy>%roofline_settings_use_single_thread_strategy% <label class=explanation_symbol data-tooltip=%roofline_settings_use_single_thread_strategy_expl%>?</label></label><table id=roofs_table class=roofs_table><thead><tr><th>%roofline_settings_roof_name%</th><th>%roofline_settings_roof_visible%</th><th>%roofline_settings_roof_selected%</th><th style=white-space:nowrap><label>%roofline_settings_roof_value%</label><button id=revert_roofs_values_settings_button>%roofline_settings_roof_default%</button></th></tr></thead><tbody id=roofs_table_body></tbody></table><div><button id=load_roofs_settings_button class=loadsave_settings_button>%roofline_settings_roof_load%</button> <button id=save_roofs_settings_button class=loadsave_settings_button>%roofline_settings_roof_save%</button></div><div class="settings_title roofline_group_caption_colors">%roofline_settings_loop_caption% <button id=cancel_loops_settings_button class=cancel_loops_settings_button>%roofline_settings_loop_cancel%</button> <button id=revert_loops_settings_button class=revert_loops_settings_button>%roofline_settings_loop_default%</button></div><table id=loops_table><thead><tr><th></th><th></th><th align=left><label class=settings_item_caption><input type=checkbox value=size class=settings_item checked=checked>%roofline_settings_loop_size%</label></th><th align=left><label class=settings_item_caption>%roofline_settings_loop_color%</label><div class="settings_item combo"><select id=color_mode_combo class=color_mode_combo><option value=none>%roofline_settings_loop_color_fixed%</option><option value=time>%roofline_settings_loop_color_time%</option><option value=vector>%roofline_settings_loop_color_vectorization%</option></select></div></th><th class=visibility_setting_caption>%roofline_settings_loop_visible%</th></tr></thead><tbody id=loops_table_body></tbody></table><div><label class="settings_item_caption def_color_item">%roofline_settings_loop_color_default%<div class="loop_sample loop_fixed_sample" id=roofline_def_loop_color_sample></div><input class="color_input def_color_item" id=roofline_def_loop_color_edit></label></div><div><label class="settings_item_caption no_self_time_item">%roofline_settings_loop_color_nst%<div class="loop_sample loop_fixed_sample" id=roofline_nst_loop_color_sample></div><input class="color_input no_self_time_item" id=roofline_nst_loop_color_edit></label></div><div><button id=load_loops_settings_button class=loadsave_settings_button>%roofline_settings_roof_load%</button> <button id=save_loops_settings_button class=loadsave_settings_button>%roofline_settings_roof_save%</button></div></div><div class="summary hidden4copy" id=roofline_summary><label class=br><span class=summary_caption>%roofline_physical_cores_count%</span> <span id=cores_value class=summary_value></span> <label class=explanation_symbol data-tooltip=%roofline_cores_expl%>?</label></label> <label class=br><span class=summary_caption>%roofline_used_threads_count%</span> <span id=threads_value class=summary_value></span> <label class=explanation_symbol data-tooltip=%roofline_threads_expl%>?</label></label> <label class="br tmp"><span id=self_caption class=summary_caption></span> <span id=self_value class="summary_value flash"></span> <span id=self_measure class=summary_measure></span></label> <label class="br tmp"><span id=total_caption class=summary_caption></span> <span id=total_value class="summary_value flash"></span> <span id=total_measure class=summary_measure></span></label><div id=expand_summary_content class="expand_button icon expand"></div></div><div class=top_area></div><div class=main_area id=roofline_content></div><div class=bottom_area></div><div class="zoom_button icon frame_settings hidden4copy" id=roofline_frame_settings></div><div class="frame_settings_cover frame_settings_area"></div><div class="frame_settings_axis vert frame_settings_area"><input class=frame_settings_input id=frame_max_perf> <input class=frame_settings_input id=frame_min_perf></div><div class="frame_settings_axis horz frame_settings_area"><input class=frame_settings_input id=frame_min_intens> <input class=frame_settings_input id=frame_max_intens></div><div class="frame_settings_corner frame_settings_area"><button class="frame_settings_button icon ok" id=frame_apply_btn></button> <button class="frame_settings_button icon cross" id=frame_cancel_btn></button></div></div><div class=data_loading_message id=roofline_data_loading_message>%roofline_loading%</div><div class=no_data_message_container><div class=no_data_message><div class=no_data_message_title></div><div class=no_data_message_content></div></div></div><script type=text/javascript>!function(t){function e(i){if(o[i])return o[i].exports;var n=o[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var o={};e.m=t,e.c=o,e.d=function(t,o,i){e.o(t,o)||Object.defineProperty(t,o,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(o,"a",o),o},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=3)}([function(t,e){function o(t,e){var o=t[1]||"",n=t[3];if(!n)return o;if(e&&"function"==typeof btoa){var r=i(n);return[o].concat(n.sources.map(function(t){return"/*# sourceURL="+n.sourceRoot+t+" */"})).concat([r]).join("\n")}return[o].join("\n")}function i(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var i=o(e,t);return e[2]?"@media "+e[2]+"{"+i+"}":i}).join("")},e.i=function(t,o){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},n=0;n<this.length;n++){var r=this[n][0];"number"==typeof r&&(i[r]=!0)}for(n=0;n<t.length;n++){var a=t[n];"number"==typeof a[0]&&i[a[0]]||(o&&!a[2]?a[2]=o:o&&(a[2]="("+a[2]+") and ("+o+")"),e.push(a))}},e}},function(t,e,o){function i(t,e){for(var o=0;o<t.length;o++){var i=t[o],n=p[i.id];if(n){n.refs++;for(var r=0;r<n.parts.length;r++)n.parts[r](i.parts[r]);for(;r<i.parts.length;r++)n.parts.push(d(i.parts[r],e))}else{for(var a=[],r=0;r<i.parts.length;r++)a.push(d(i.parts[r],e));p[i.id]={id:i.id,refs:1,parts:a}}}}function n(t,e){for(var o=[],i={},n=0;n<t.length;n++){var r=t[n],a=e.base?r[0]+e.base:r[0],s=r[1],l=r[2],c=r[3],d={css:s,media:l,sourceMap:c};i[a]?i[a].parts.push(d):o.push(i[a]={id:a,parts:[d]})}return o}function r(t,e){var o=g(t.insertInto);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var i=y[y.length-1];if("top"===t.insertAt)i?i.nextSibling?o.insertBefore(e,i.nextSibling):o.appendChild(e):o.insertBefore(e,o.firstChild),y.push(e);else if("bottom"===t.insertAt)o.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var n=g(t.insertInto+" "+t.insertAt.before);o.insertBefore(e,n)}}function a(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=y.indexOf(t);e>=0&&y.splice(e,1)}function s(t){var e=document.createElement("style");return t.attrs.type="text/css",c(e,t.attrs),r(t,e),e}function l(t){var e=document.createElement("link");return t.attrs.type="text/css",t.attrs.rel="stylesheet",c(e,t.attrs),r(t,e),e}function c(t,e){Object.keys(e).forEach(function(o){t.setAttribute(o,e[o])})}function d(t,e){var o,i,n,r;if(e.transform&&t.css){if(!(r=e.transform(t.css)))return function(){};t.css=r}if(e.singleton){var c=_++;o=v||(v=s(e)),i=u.bind(null,o,c,!1),n=u.bind(null,o,c,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(o=l(e),i=h.bind(null,o,e),n=function(){a(o),o.href&&URL.revokeObjectURL(o.href)}):(o=s(e),i=f.bind(null,o),n=function(){a(o)});return i(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i(t=e)}else n()}}function u(t,e,o,i){var n=o?"":i.css;if(t.styleSheet)t.styleSheet.cssText=x(e,n);else{var r=document.createTextNode(n),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(r,a[e]):t.appendChild(r)}}function f(t,e){var o=e.css,i=e.media;if(i&&t.setAttribute("media",i),t.styleSheet)t.styleSheet.cssText=o;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(o))}}function h(t,e,o){var i=o.css,n=o.sourceMap,r=void 0===e.convertToAbsoluteUrls&&n;(e.convertToAbsoluteUrls||r)&&(i=b(i)),n&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */");var a=new Blob([i],{type:"text/css"}),s=t.href;t.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}var p={},m=function(t){var e;return function(){return void 0===e&&(e=t.apply(this,arguments)),e}}(function(){return window&&document&&document.all&&!window.atob}),g=function(t){var e={};return function(o){if(void 0===e[o]){var i=t.call(this,o);if(i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}e[o]=i}return e[o]}}(function(t){return document.querySelector(t)}),v=null,_=0,y=[],b=o(6);t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");e=e||{},e.attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=m()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var o=n(t,e);return i(o,e),function(t){for(var r=[],a=0;a<o.length;a++){var s=o[a],l=p[s.id];l.refs--,r.push(l)}if(t){i(n(t,e),e)}for(var a=0;a<r.length;a++){var l=r[a];if(0===l.refs){for(var c=0;c<l.parts.length;c++)l.parts[c]();delete p[l.id]}}}};var x=function(){var t=[];return function(e,o){return t[e]=o,t.filter(Boolean).join("\n")}}()},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),o.d(e,"version",function(){return i});var i=function(){var t=window.navigator.userAgent,e=t.indexOf("MSIE ")+1,o=t.indexOf("Edge/")+1;if(e>0||o>0){var i=(e||o)-1;return parseInt(t.substring(i+5,t.indexOf(".",i)))}if(t.indexOf("Trident/")>0){var n=t.indexOf("rv:");return parseInt(t.substring(n+3,t.indexOf(".",n)))}return!1}()},function(t,e,o){"use strict";function i(){try{if(!window.summaryInfo)throw"No summary info present";document.getElementById("summary_info_panel").onclick=function(t){return t.stopPropagation()},document.body.onselectstart=function(){return!0},document.getElementById("copy_content").click=function(){};var t=_(window.summaryInfo)===_("")?(new DOMParser).parseFromString(window.summaryInfo,"text/xml"):window.summaryInfo,e=c(t),o=document.getElementById("summary_info_project"),i=document.getElementById("summary_info_result_path");if(e.name?o.innerHTML="<span>"+e.name.split(":").join(":</span>"):o.classList.add("no_report"),i.innerHTML=e.value,"true"==e.snapshot){var n=i.dataset.tooltip.replace(/result/gi,"snapshot");i.dataset.tooltip=e.name||n}e.path&&(document.title="Intel Advisor - "+e.path);var r=document.getElementById("summary_collected_on"),s=d(t),l=s.date;s.dateFinished?(r.innerHTML="<span>"+r.innerHTML+"</span> "+l.toDateString()+", "+l.toLocaleTimeString(),i.innerHTML=i.innerHTML+" | "+l.toLocaleDateString()):r.style.display="none";a("program",document.getElementById("program_metrics_items"),t);a("functionsAndLoops",document.getElementById("loop_metrics_items"),t);a("platform",document.getElementById("platform_info_items"),t)}catch(t){var u=document.getElementById("summary_info_bar");u.classList.add("no_report"),console.log(""+t)}}function n(t,e,o){for(var i=0;i<t.length;i++)e.call(o,t[i],i,t)}function r(t,e,o){for(var i=0;i<t.length;i++)if(e.call(o,t[i],i,t))return!0;return!1}function a(t,e,o){o instanceof DOMParser?n(o.getElementsByTagName(t),function(t){n(t.getElementsByTagName("item"),function(t){var o=document.createElement("li"),i=t.getAttributeNames();i.some(function(e){return""==t.getAttribute(e)})||(o.innerHTML=i.reduce(function(e,o,i){return e+l(s(o,t.getAttribute(o)),i)},""),e.appendChild(o))})}):o[t].forEach(function(t){if(!y[t.caption]){var o=document.createElement("li");y[t.caption]="<span>"+t.caption+":</span> "+t.value+" "+s("percent",t.timePercent),o.innerHTML=y[t.caption],e.appendChild(o)}})}function s(t,e){return e?-1!=t.toLowerCase().indexOf("percent")?"("+parseFloat(e).toFixed(2)+"%)":e:""}function l(t,e){return(0==e?"<span>":"")+t+(0==e?":</span> ":" ")}function c(t){if(t instanceof DOMParser){var e={caption:null,value:null,name:null,path:null,snapshot:null};return n(t.getElementsByTagName("project"),function(t){t.getAttributeNames().forEach(function(o){for(var i in e)if(-1!==o.indexOf(i)){e[i]=t.getAttribute(o);break}})}),e}return t.project}function d(t){var e=new Date(0),o=!1;if(t instanceof DOMParser)n(t.getElementsByTagName("result"),function(t){t.getAttributeNames().some(function(e){return t.getAttribute(e).match(/(survey|tripcount)/gi)})&&(o=r(t.getElementsByTagName("item"),function(t){if(t.attributes.caption.nodeValue.match(/collection finished/gi)){var o=new Date(t.attributes.value.nodeValue);return o>e&&(e=o),!0}}))});else{var i=function(t,e){if(t){var i=t.findIndex(function(t){return t.caption.match(/collection finished/gi)});if(-1!==i){var n=new Date(t[i].value);n>e&&(e=n),o=!0}}return e};e=i(t.results[0],i(t.results[5],new Date(0)))}return{date:e,dateFinished:o}}Object.defineProperty(e,"__esModule",{value:!0});var u=o(4),f=(o.n(u),o(7)),h=(o.n(f),o(9)),p=(o.n(h),o(11)),m=(o.n(p),o(13)),g=(o.n(m),o(15)),v=(o.n(g),o(16)),_=(o.n(v),"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t});document.body.classList.add("report"),function(){function t(t){var e=v.Utils.getElementPos(n).height,a=v.Utils.getElementPos(i).height,s=v.Utils.getElementPos(o).height;r.style.top=10+e+a+s+"px",t&&window.dispatchEvent(new Event("resize"))}var e=document.getElementById("summary_info_control"),o=document.getElementById("summary_info_panel"),i=document.getElementById("summary_info_bar"),n=document.querySelector(".top_report_area"),r=document.querySelector(".content");e.addEventListener("click",function(t){return e.classList.toggle("pressed")}),window.addEventListener("resize",function(e){return t()}),new MutationObserver(t).observe(e,{attributes:!0})}(),window.idvcGlobalRequest.sendNotification=function(t){if(-1!==t.indexOf("contentLoaded")&&(window.idvcGlobalRequest.receiveData("uiInfo",JSON.stringify(o(18).uiInfo)),i()),-1!==t.indexOf("ready4data")||-1!==t.indexOf("refresh")){v.I18n.processElement(["data-tooltip","data-caption"]);var e=o(2).version;if(e&&e<12)return void window.idvcGlobalRequest.receiveData("rooflineData",{noDataMessage:{title:"Microsoft Internet Explorer* "+e+" browser detected",descr:"This Intel&reg; Advisor feature is not supported in the Internet Explorer* browser."}});v.StateManager.get().disableSaving();var n={noDataMessage:{title:"No Data Available",descr:"No data provided for Roofline chart from Advisor"}};if(window.idvcGlobalRequest.receiveData("threadsInfo",window.threadsInfo),window.idvcGlobalRequest.receiveData("rooflineData",window.rooflineData||n),window.currentZoom){v.Zooming.get(v.Data.isHierarchical()).setZoom(window.currentZoom)}window.idvcGlobalRequest.sendNotification=function(t){}}};try{!function(t){v.Utils.copyObject(t,window)}($ExportData$)}catch(t){console.log(""+t)}!o(2).version&&Element.prototype.getAttributeNames||(Element.prototype.getAttributeNames=function(){for(var t=[],e=0;e<this.attributes.length;e++)t.push(this.attributes[e].nodeName);return t.sort(),t});var y={};window.addEventListener("keydown",function(t){if(t.ctrlKey)switch(t.keyCode){case 61:case 107:case 173:case 109:case 187:case 189:t.preventDefault()}},!1),window.addEventListener("mousewheel",function(t){t.ctrlKey&&t.preventDefault()},!1),window.addEventListener("DOMMouseScroll",function(t){t.ctrlKey&&t.preventDefault()},!1),document.firstElementChild.style.zoom="reset"},function(t,e,o){var i=o(5);"string"==typeof i&&(i=[[t.i,i,""]]);var n={hmr:!0};n.transform=void 0;o(1)(i,n);i.locals&&(t.exports=i.locals)},function(t,e,o){e=t.exports=o(0)(!1),e.push([t.i,"*{-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:-moz-none;-o-user-select:none;user-select:none}input{-webkit-user-select:text!important;-khtml-user-select:text!important;-moz-user-select:text!important;-o-user-select:text!important;user-select:text!important}.body_area{font:caption;margin:0;padding:0;-moz-user-focus:ignore;background-color:#fff;color:#000;overflow:hidden;outline:none}.body_area.data_loading{overflow:auto}.main_area{top:2.4em;bottom:1.2em;border:none;outline:none}.main_area,.top_area{position:absolute;left:0;right:0}.top_area{top:0;height:2em;padding-top:.6em;padding-left:.6em;pointer-events:none}.vert_text{transform:rotate(90deg);transform-origin:left bottom 0;display:inline-block;white-space:nowrap;padding-left:0}.bottom_area{position:absolute;left:2em;bottom:0;height:1.2em;right:0;text-align:right;padding-right:4px;pointer-events:none}.axis_caption{position:absolute;color:#555;font-size:90%}.axis_caption_expl{color:#777;font-size:90%;white-space:pre}.axis_caption:hover{color:#000;background-color:#fff}.axis_caption.vert{left:10.5ch;top:-.85em}.axis_caption.horz{right:.2em;bottom:2.5em}.legend_area{position:absolute;right:.5em;bottom:4em;height:14em;width:24em;padding:.5em;border:1px solid #aaa;background:#fff;-moz-transform:scale(1);transform:scale(1);-moz-transition:-moz-transform .2s ease-in-out,border .2s ease-in-out;transition:transform .2s ease-in-out,border .2s ease-in-out;-moz-transform-origin:right bottom;transform-origin:right bottom}.legend_area.collapsed{-moz-transform:scale(.2);transform:scale(.2);border-width:4px;cursor:pointer}.legend_area .legend_axis_caption{position:absolute;height:1.1em;width:100%;left:0;bottom:0;text-align:center;color:GrayText;cursor:default;padding-bottom:.1em;font-size:.8em}.legend_area.collapsed *{pointer-events:none!important}.legend_area .idvcchart_body{left:.5em!important;right:.5em;top:1.2em;bottom:3.1em}.legend_area .idvcchart_horzaxis{left:.5em!important;right:.5em;bottom:1.1em}.legend_area:before{content:\"\";position:absolute;left:.1em;top:.1em;border-width:.35em;border-style:solid;border-top-color:transparent;border-right-color:currentColor;border-bottom-color:currentColor;border-left-color:transparent;cursor:pointer;-moz-transition:border-width .2s ease-in-out;transition:border-width .2s ease-in-out}.legend_area.collapsed:before{border-top-color:currentColor;border-right-color:transparent;border-bottom-color:transparent;border-left-color:currentColor;border-width:1.75em}.legend_area .idvcchart_horzaxis:after{content:\"%\";position:absolute;right:.1em;top:.3em;cursor:default;pointer-events:none}.legend_area .idvcchart_axis_text,.legend_area .idvcchart_axis_tick{fill:currentColor;font-size:90%;cursor:pointer}.legend_area .idvcchart_axis_text:hover{font-weight:700}.legend_area .legend_total_line{stroke:GrayText;stroke-width:1;stroke-dasharray:3,2;vector-effect:non-scaling-stroke;shape-rendering:crispEdges}.legend_area .legend_total_text{fill:gray;font-size:100%}.legend_area .histogram_slider{stroke:#333;fill:#bbb}.legend_area .histogram_slider_active{stroke:#00f;fill:#87cefa}.main_area .idvcchart_vertaxis{width:9ch;pointer-events:none}.main_area .idvcchart_body{left:9ch}.main_area .idvcchart_horzaxis{left:9ch;pointer-events:none}.main_area .idvcchart_axis_text{fill:#333;font-size:95%}.main_area .total_value_tick{stroke:#777;stroke-width:1;fill:none}.main_area .total_value_tick_active{stroke:#00f;stroke-width:1;fill:#87cefa}.main_area .idvcchart_axis_text_secondary{fill:gray}.main_area .idvcchart_roofline_text{fill:gray;font-size:90%}.main_area .idvcchart_roofline_text.selected:not(.hidden){fill:#000}.main_area .idvcchart_roofline_text.hidden{fill:transparent}.main_area .idvcchart_roofline_text_active{fill:#00f!important}.main_area .idvcchart_roofline_explanation{font-size:.9em;font-weight:700}.main_area .idvcchart_roofline_explanation:hover{fill:#00f!important;font-weight:700}.main_area .idvcroofline_point{stroke:#000;fill:#d3d3d3}.main_area .idvcroofline_point_current.idvcroofline_point_selected{stroke:#000!important}.main_area .idvcroofline_point_selected{stroke:#00f!important;stroke-width:3px!important}.main_area .roofline_child_line{stroke:#000;fill:transparent}.main_area .roofline_parent_line{stroke:#00f;fill:transparent}.main_area .loops_matching_line{stroke:#000;stroke-dasharray:4,4;fill:transparent}.main_area .stroke-dasharray{fill:#fff;stroke:#000}.main_area .roofline_parent_arrow{fill:#add8e6;stroke:#000}.main_area .loops_matching_arrow{fill:#000;stroke:#000}.main_area .loops_matching_label{font-size:100%}.main_area .roofline_loop{stroke:#000;stroke-width:1;fill:#d3d3d3}.main_area .roof_crossing,.main_area .roofline_loop{vector-effect:non-scaling-stroke;shape-rendering:geometricPrecision}.main_area .roof_crossing{stroke:#000;stroke-width:2;fill:#add8e6}.main_area .roof_crossing_line{stroke:#000;stroke-width:1;stroke-dasharray:2,4;vector-effect:non-scaling-stroke;shape-rendering:geometricPrecision}.main_area .roof_crossing_label{font-size:100%;fill:#000}.main_area .roof_crossing_label_gain,.main_area .roof_crossing_label_value{font-weight:700}.main_area .roofline_loop.no_loop_position{stroke:#a9a9a9!important;fill:#eee!important}.main_area .roofline_loop.no_loop_position.flashed{fill:#add8e6!important}.main_area .roofline_loop.loop_inactive_result{opacity:.4}.main_area .idvcroofline_line{stroke:GrayText;stroke-dasharray:4,4}.main_area .idvcroofline_grid_line{stroke:#ddd}.main_area .idvcroofline_line.selected{stroke:#000;shape-rendering:auto;stroke-dasharray:none}.main_area .idvcroofline_line_hover{stroke:#00f!important;stroke-width:1.5}.main_area .idvc_hidden.idvcroofline_line_hover{stroke-dasharray:2,6;visibility:visible}.main_area .line_hotarea{stroke:transparent;fill:none;stroke-width:10}.main_area .line_hotarea,.main_area .roofline_roofs_cross{vector-effect:non-scaling-stroke;shape-rendering:crispEdges}.main_area .roofline_roofs_cross{stroke:gray;fill:transparent;stroke-width:1}.main_area .idvcroofline_roofs_cross:hover,.main_area .idvcroofline_roofs_cross_hover{stroke:#00f!important;fill:#00f!important}.main_area .roofline_roofs_cross.selected{stroke:#000}.main_area .roofline_coord_line{stroke:transparent;fill:transparent;stroke-width:1;vector-effect:non-scaling-stroke;shape-rendering:crispEdges}.main_area .roofline_coord_line_hover{stroke:gray;stroke-dasharray:2,4}.main_area .roofline_coord_line.selected{stroke:gray;stroke-dasharray:none!important}.main_area .idvcchart_selection{fill:rgba(51,102,204,.5);stroke:#36c;opacity:1}.main_area .roofline_expander{fill:#fff;stroke:#555}.main_area .roofline_expander_vert_line{fill:transparent;stroke:#000}.main_area .expanded>.roofline_expander_vert_line{fill:transparent;stroke:transparent}.main_area .roofline_expander_horz_line{fill:transparent;stroke:#000}.main_area .idvcsplitter_horz_splitter{background-color:#eee}.main_area .idvcsplitter_horz_splitter:hover{background-color:ThreeDShadow}.main_area .idvcsplitter_sash{background-color:#bbb}.main_area .idvcgrid_body,.main_area .idvcsplitter_horz_primary{outline:none}.roofline_stack_view{margin-top:1.5em!important;margin-bottom:.4em!important;border-top:1px solid #ddd}.roofline_stack_view:before{content:attr(data-caption);position:absolute;top:-1.3em;left:.2em;font-weight:700;white-space:nowrap;cursor:default}.roofline_stack_view .idvcgrid_body{overflow-x:hidden;background-color:#fff;color:#000}.roofline_stack_view .idvcgrid_column{width:100%!important;min-width:100%!important}.roofline_stack_view .idvcgrid_cell{border-color:#ddd;border-style:none none solid;background-color:#fff;padding-left:2em;color:#000;background-position:.1em -.1em;background-repeat:no-repeat;background-origin:border-box}.roofline_stack_view .idvcgrid_cell.hidden_loop:not(.idvcgrid_selected_row){color:gray}.roofline_stack_view .idvcgrid_selected_row{background-color:#d3d3d3;color:#000}.roofline_stack_view .idvcgrid_focused .idvcgrid_current_row{border-style:dashed solid dashed none;border-top-color:#000;border-bottom-color:#000}.zoom_toolbar{position:absolute;left:.2em;top:0;padding-top:.3em;height:1.2em;z-index:5000;cursor:default;white-space:nowrap;right:2rem}.toolbar_expansion{position:absolute;right:.4em;margin-top:.3em;border:1px solid #555;background-color:#fff;padding:.5em;display:none}.toolbar_expansion>div{padding:.2em}.toolbar_expansion .toolbar_item_caption{border:none;margin-left:0;padding-left:0}.toolbar_expansion .toolbar_item_caption.br:before{display:none}@media screen and (max-width:30em){.toolbar_expansion{right:-2rem}}.summary_expansion{position:absolute;right:.2em;bottom:1.5em;border:1px solid #555;background-color:#fff;padding:.5em;display:none;z-index:1}.summary_expansion>div{padding:.2em}.summary_expansion .summary_caption{margin-left:0}.expand_button{cursor:pointer;border-style:none;display:none;background-color:#fff;border:.2em solid #fff;margin-top:-.3em;height:1.2em;background-color:#777;border-radius:50%;-moz-transition:background-color .2s ease-in-out;-webkit-transition:background-color .2s ease-in-out;transition:background-color .2s ease-in-out,transform .3s ease-in-out}.expand_button:hover{background-color:#333}.expand_button.expanded{transform:rotate(180deg)}.summary.expandable>.expand_button,.zoom_toolbar.expandable>.expand_button{display:inline-block}.zoom_button{padding:.2em;opacity:.5;cursor:pointer;border-radius:.3em;border:1px solid transparent;-moz-transition:opacity .2s ease-in-out;-webkit-transition:opacity .2s ease-in-out;transition:opacity .2s ease-in-out}.cling_button{margin-left:-.2em;margin-right:.2em}.zoom_button:not(.select).pressing{position:relative}.zoom_button:not(.select).pressing:before{content:\"\";position:absolute;width:.1em;height:.1em;box-sizing:border-box;left:50%;top:50%;transform:translate(-50%,-50%);border-style:solid;border-width:0;border-radius:50%;animation:visible_click .1s;animation-fill-mode:forwards;animation-timing-function:ease-in-out;background-color:#bbb;opacity:.15;pointer-events:none}.zoom_button:not(.select).pressing.waiting:before{width:1.5em;height:1.5em;box-shadow:0 0 1em .5em #777;animation:visible_pressing .1s;animation-fill-mode:forwards;animation-delay:.3s}.clear_animation:before{content:\"\";position:absolute;width:0;height:0;box-sizing:border-box;left:50%;top:50%;animation:click_clear .1s;opacity:0;pointer-events:none}.zoom_button:not(.select).pressing2pressed{animation:gradient_pressed .2s;background-color:#ddd}.zoom_button.select{position:relative;border-radius:0;display:inline-block}.zoom_button.disabled{opacity:.2;cursor:default}.zoom_button.pressed{opacity:1;background:#ddd;border-color:#bbb}.zoom_button:not(.disabled):hover{opacity:1}.simple_click:not(.disabled):active{background-color:#eee}.zoom_select_items{display:none;position:absolute;top:1.5em;right:-2em;min-width:6em;background:#fff;color:#000;list-style-type:none;padding:0;margin:0;border:1px solid gray;overflow-y:auto;max-height:80vh;z-index:1}.zoom_select_prop{font-size:90%;margin-top:.3em;pointer-events:none;float:right}.zoom_select_prop_input{font-size:90%;margin-left:.3em;margin-top:.3em;max-width:3em;pointer-events:auto}.roofline_popup_shadow{box-shadow:3px 4px 8px #d3d3d3}.zoom_button.select.pressed{background:#fff;border-color:gray;border-style:solid;box-shadow:3px 5px 8px #d3d3d3}.idvcjs_span{display:none;background:#fff;position:absolute;left:0;height:2px;width:100%;z-index:1}.zoom_button.select.pressed>.idvcjs_span,.zoom_button.select.pressed>.zoom_select_items{display:block}.zoom_select_items li{position:relative;padding:.3em .6em;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.zoom_select_items li.splitter,ul.zoom_select_items.splitter{box-shadow:0 15px 0 -14px silver;margin-bottom:1px}.zoom_select_items li:hover{background-color:Highlight!important;color:HighlightText!important}.zoom_select_items.extra_space li{padding:.6em}.zoom_select_items.radio li:before{content:\"\";width:.5em;height:.5em;border-radius:50%;display:inline-block;text-align:left;vertical-align:middle;margin-right:.5em;margin-bottom:.1em;background-color:transparent}.zoom_select_items.radio li.selected:before{background-color:#000}.zoom_select_items.radio li.selected:hover:before{background-color:HighlightText}.zoom_select_items.checkboxes li{padding-left:1.6em!important}.zoom_select_items.checkboxes li:before{content:\"\";position:absolute;left:.3em;top:.4em;width:.8em;height:.8em;border:1px solid ThreeDShadow;background-color:Window;z-index:100}.zoom_select_items.checkboxes li.empty:not(.loading):before{opacity:0!important}.zoom_select_items.checkboxes li.checked:after{content:\"\";position:absolute;left:.6em;top:.4em;width:.35em;height:.55em;background-color:transparent;box-shadow:.1em .1em 1px 0 WindowText;transform:rotate(45deg);z-index:200}.zoom_select_items.checkboxes li.empty:after{opacity:0!important}.zoom_select_items.pictured li{padding-left:2.2em!important;background-position:.2em .05em;background-repeat:no-repeat}.zoom_select_items li.comparing,.zoom_select_items li.loading{animation:loading 1.5s infinite ease-in-out}.zoom_select_items li.loading{opacity:.6}.zoom_select_items li.empty:not(.loading){background-size:0}.zoom_select_items li>.zoom_button{display:none}.zoom_select_items li:hover:not(:first-child)>.zoom_button{display:inline}.zoom_button.clear_compare{position:absolute;top:.2em;right:.2em;padding:0;border-radius:50%;background:#fff;pointer-events:auto}.zoom_button.clear_compare:not(.disabled){opacity:1}.menu_button{position:absolute;right:0;top:0;height:1.4rem;width:1.4rem;z-index:4000;padding:.4rem .4rem .6rem;border-style:solid solid none;border-width:1px;border-color:transparent;background-color:transparent;display:inline-block;cursor:pointer}.menu_button.close{border-color:gray;background-color:#fff}.menu_button:hover>div{opacity:1}.menu_button>div{width:1.4rem;height:.2rem;opacity:.5;background-color:#000;margin:.2rem 0;-moz-transition:.3s;transition:.3s;pointer-events:none}.menu_button.close>div{background-color:green}.menu_button.close>div:first-child{-moz-transform:rotate(45deg) translate(.4rem,-.2rem) scaleX(.6);transform:rotate(45deg) translate(.4rem,-.2rem) scaleX(.6)}.menu_button.close>div:nth-child(3){-moz-transform:rotate(-45deg) translate(.4rem,.2rem) scaleX(.6);transform:rotate(-45deg) translate(.4rem,.2rem) scaleX(.6)}.summary{position:absolute;left:3em;bottom:0;right:.3em;height:1.2em;white-space:nowrap}.summary label .tmp{pointer-events:none}.summary>.icon:after{width:1em;height:1em}.summary>.icon{height:1em!important}.summary.no_selection .tmp{display:none}.summary_caption{margin-left:1em}.summary_value{padding-left:.1em;padding-right:.1em;font-weight:700}.summary_measure{margin-left:-.05em}.frame_settings{position:absolute;bottom:1px;left:0;background:#fff;border-radius:0}.frame_settings_area{z-index:10000}.frame_settings~.frame_settings_area{display:none}.frame_settings.expanded~.frame_settings_area{display:block}.frame_settings_corner{position:absolute;bottom:0;left:0;width:11ch;height:3.2em;padding-left:.3em;background:#333;box-sizing:border-box;white-space:nowrap}.frame_settings_cover{position:absolute;top:0;right:0;left:9ch;bottom:3em;background:#fff;opacity:.6}.frame_settings_axis{position:absolute;background:#333}.frame_settings_axis.vert{top:0;left:0;bottom:3.2em;width:9ch;box-shadow:5px 0 10px 0 rgba(0,0,0,.5);border-right:1px solid #000}.frame_settings_axis.horz{left:9ch;bottom:0;right:0;height:3.2em;box-shadow:0 -5px 10px 0 rgba(0,0,0,.5);border-top:1px solid #000}.frame_settings_button{font-size:105%;padding:.2em;margin-top:.3em}.frame_settings_axis>.frame_settings_input{position:absolute;opacity:1;font-size:1.1em}.frame_settings_axis.vert>.frame_settings_input{left:4px;width:-webkit-calc(100% - 12px);width:-moz-calc(100% - 12px);width:calc(100% - 12px)}.frame_settings_axis.horz>.frame_settings_input{top:4px;width:9ch}.frame_settings_axis.vert>.frame_settings_input:first-child{top:10%}.frame_settings_axis.vert>.frame_settings_input:nth-child(2){bottom:8%}.frame_settings_axis.horz>.frame_settings_input:first-child{left:6%}.frame_settings_axis.horz>.frame_settings_input:nth-child(2){right:6%}.settings{position:absolute;right:0;top:2.4rem;bottom:1px;width:56ch;overflow-x:hidden;overflow-y:auto;padding:.5em;border:1px solid gray;background:#fff;-moz-transform:translateX(100%);transform:translateX(100%);-moz-transition:-moz-transform .2s ease-in-out;transition:transform .2s ease-in-out;z-index:3000;box-sizing:border-box;will-change:transform}.settings.visible{-moz-transform:none;transform:none}.no_data_message_container{display:none;text-align:center}.no_data_message{display:inline-block;margin-top:3em;max-width:60%;border:1px solid #000;border-radius:1em;text-align:left;overflow:hidden;box-shadow:0 1em 2em 0 rgba(90,90,90,.3)}.no_data_message_title{font-weight:700;min-height:2em;line-height:2em;border-bottom:1px solid #000;background:Highlight;color:HighlightText;padding:.5rem 1.5rem}.no_data_message_content{min-height:3em;background:Window;color:WindowText;padding:1rem 1.5rem}.data_loading_message{display:none;margin:auto;margin-top:2em;width:60%;border:none;padding:1rem;text-align:center;font-size:1.5em}.no_data>.content{display:block}.no_data>.content>div{display:none}.no_data>.content>.zoom_toolbar,.no_data>.idvcgrid_popup,.no_data>.no_data_message_container{display:block}.no_data>.content>.zoom_toolbar>:not(.always_visible){display:none!important}.no_data .hierarchy_item_caption.br:before{display:none}.data_loading>div{display:none!important}.data_loading>.data_loading_message{display:block!important}.data_loading>.data_loading_message>span.stack_item{font-size:1rem;text-align:left;display:inline-block;padding:.2rem .5rem;width:100%}.data_loading>.data_loading_message>span.message_btn{right:18%}.data_loading>.data_loading_message>span.message_btn:hover{opacity:1}.data_loading>.data_loading_message>span.message_btn{position:absolute;top:2em;font-size:1rem;text-align:left;display:block;padding:.3em;background-color:#000!important;opacity:.6;border-radius:50%;cursor:pointer}.data_loading>.data_loading_message>span.close_btn{right:18%}.data_loading>.data_loading_message>span.copy_btn{right:-webkit-calc(18% + 2.1em);right:-moz-calc(18% + 2.1em);right:calc(18% + 2.1em)}.data_loading>.data_loading_message>span.close_btn:after{content:url(\"data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" fill=\"#fff\"><rect x=\"7\" y=\"2.34\" width=\"2\" height=\"11.31\" transform=\"translate(-3.31 8) rotate(-45)\"/><rect x=\"2.34\" y=\"7\" width=\"11.31\" height=\"2\" transform=\"translate(-3.31 8) rotate(-45)\"/></svg>\")}.data_loading>.data_loading_message>span.copy_btn:after{content:url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12' fill='white'><rect x='1' width='8' height='1'/><rect x='1' y='1' width='1' height='9'/><path d='M3,2v10h5l3-3V2H3z M8,9H5V8h3V9z M9,7H5V6h4V7z M9,5H5V4h4V5z'/></svg>\")}.data_loading>.data_loading_message>span:first-of-type{margin-top:1rem}.data_loading>.data_loading_message>span:nth-of-type(2n){background-color:#eee}.summary_updated .summary_value.flash{-webkit-animation:update_summary 1s 1 ease-in-out!important;-moz-animation:update_summary 1s 1 ease-in-out!important;animation:update_summary 1s 1 ease-in-out!important;border-radius:5px}.icon:after{display:inline-block;width:1.2em;height:1.2em;vertical-align:text-top}.icon.cross:after{content:url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='black'><line x1='4' y1='4' x2='12' y2='12'/><rect x='7' y='2.34' width='2' height='11.31' transform='translate(-3.31 8) rotate(-45)'/><line x1='12' y1='4' x2='4' y2='12'/><rect x='2.34' y='7' width='11.31' height='2' transform='translate(-3.31 8) rotate(-45)'/></svg>\")}.icon.sync:after{content:url(\"data:image/svg+xml;utf8, <svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='black' stroke='none'><polygon points='5.036,3.509 5.036,6.509 14.036,6.509 14.036,10.009 19.036,5.009 14.036,0.009 14.036,3.509 '/><polygon points='16.036,14.509 16.036,11.509 7.036,11.509 7.036,8.009 2.036,13.009 7.036,18.009 7.036,14.509 '/></svg>\")}.icon.compare:after{content:url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='black'><rect x='2' y='7' width='12' height='2'/><rect x='7' y='2' width='2' height='12'/></svg>\");width:1.5em;height:1.5em}.icon.save_compare:after{content:url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='black'><rect x='2' y='14' width='16' height='4'/><polygon points='8,0 8,7 5,7 10,14 15,7 12,7 12,0'/></svg>\")}.icon.magnifier:after{content:url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='black'><path d='M14.8,12.8C15.6,11.7,16,10.4,16,9c0-3.9-3.1-7-7-7S2,5.1,2,9s3.1,7,7,7c1.4,0,2.7-0.4,3.8-1.2L17,19l2-2L14.8,12.8z M9,14c-2.8,0-5-2.2-5-5c0-2.8,2.2-5,5-5c2.8,0,5,2.2,5,5C14,11.8,11.8,14,9,14z'/></svg>\")}.icon.cursor:after{content:url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='black'><path d='M11,11l3.1,6.7c0.3,0.6,0,1.4-0.6,1.7c-0.6,0.3-1.4,0-1.7-0.6l-3-6.6L5,16H4V0h2l10,10v1H11z'/></svg>\")}.icon.menu:after{content:url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='black'><rect x='3' y='3' width='14' height='3'/><rect x='3' y='13' width='14' height='3'/><rect x='3' y='8' width='14' height='3'/></svg>\")}.icon.export:after{content:url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='black'><path d='M9 4H11L8 1L5 4H6H7L7 12H8H9V4ZM12 8H15H16V9V10V15H15H14H2H1H0V10V9V8H4V9V10H2L2 13H14V10H12V9V8Z'/></svg>\")}.icon.select:after{content:url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 6' fill='black'><polygon points='0,1 3,5 6,1'/></svg>\");width:.6em;height:auto;transition:transform .3s ease-in-out;vertical-align:baseline}.icon.select.pressed:after{transform:rotate(180deg);transform-origin:50% 50%}.icon.hand:after{content:url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='black' stroke-linejoin='round' stroke-miterlimit='10'><path d='M7.564,19.5c0,0-1.726-2.309-2.451-3.031c-0.858-0.854-2.718-2.349-3.286-4.277C1.377,10.661,2.85,10.266,3.616,10.8c1.087,0.76,2.655,1.971,2.655,1.971C5.667,9,4.875,5.688,4.688,4.167C4.535,2.927,4.9,2.105,5.66,1.864c1.25-0.396,1.727,0.523,1.903,1.23c0.184,0.74,1.101,5.375,1.101,5.375s-0.221-5.135-0.172-6.01C8.538,1.618,9.198,0.5,9.733,0.5c0.535,0,1.502,0.563,1.559,1.375c0.057,0.813,0.542,6.667,0.542,6.667s0.712-4.189,0.917-5.458c0.197-1.229,0.679-1.957,1.578-1.794c0.724,0.131,1.175,1.11,1.089,2.127c-0.079,0.942-0.448,6.114-0.448,6.114s0.534-2.663,0.843-3.72c0.263-0.898,0.657-1.78,1.594-1.686c0.518,0.052,0.758,1.116,0.719,2.148c-0.05,1.312-0.392,3.713-0.524,5.407c-0.114,1.451,0.015,4.934-0.601,6.539c-0.212,0.555-3.719,1.281-3.719,1.281H7.564z'/></svg>\")}.icon.redo:after{content:url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='black'><path d='M18,9v1l-6,6h-1v-4c0,0-4-0.6-7.7,3.5C3.3,7.6,11,7,11,7V3h1L18,9z'/></svg>\")}.icon.undo:after{content:url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='black'><path d='M3,9v1l6.3,6H10v-4c0,0,4-0.6,7.7,3.5C17.7,7.6,10,7,10,7V3H9.3L3,9z'/></svg>\")}.icon.expand:after{content:url(\"data:image/svg+xml;utf8, <svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='white' stroke='none'><polygon points='4,3 11,10 4,17 4,14 8,10 4,6'/><polygon points='11,3 18,10 11,17 11,14 15,10 11,6'/></svg>\")}.icon.frame_settings:after{content:url(\"data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\"><defs><style>.cls-1{fill:none;stroke:black;stroke-miterlimit:10;}</style></defs><path d=\"M14,2V14H2V2H14m2-2H0V16H16V0Z\"/><line class=\"cls-1\" x1=\"4\" y1=\"12\" x2=\"12\" y2=\"4\"/><rect x=\"7\" y=\"3\" width=\"6\" height=\"1\"/><rect x=\"3\" y=\"12\" width=\"6\" height=\"1\"/><rect x=\"9.5\" y=\"5.5\" width=\"6\" height=\"1\" transform=\"translate(18.5 -6.5) rotate(90)\"/><rect x=\"0.5\" y=\"9.5\" width=\"6\" height=\"1\" transform=\"translate(13.5 6.5) rotate(90)\"/></svg>\");width:2em;height:2em}.icon.frame_settings.expanded:after{content:\"\"}button.icon:after{width:1em;height:1em}.frame_settings_corner button.icon:after{margin:2px 2px 0}.icon.minus:after{content:url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='black'><rect x='2' y='10' width='16' height='4'/></svg>\")}.icon.plus:after{content:url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='black'><rect x='2' y='10' width='16' height='4'/><rect x='8' y='4' width='4' height='16'/></svg>\")}.icon.ok:after{content:url(\"data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\"><polygon fill=\"#000\" points=\"6 14.41 1.29 9.71 2.71 8.29 6 11.59 13.29 4.29 14.71 5.71 6 14.41\"/></svg>\")}.toolbar_item_caption{padding-left:.5em;white-space:nowrap;display:inline-block}.toolbar_item_caption.br:before{content:\"\";display:inline-block;height:1.2em;width:.3em;vertical-align:text-bottom;border-left:1px solid gray}div.toolbar_item_caption{display:inline-block}.no_roofs .roofs_bar{display:none}.no_hierarchy .hierarchy_item_caption{display:none!important}.plain_data .hr_settings_item{visibility:hidden}.plain_data .hr_zoom_button,.plain_data .idvcsplitter_horz_secondary,.plain_data .idvcsplitter_horz_splitter{display:none}.toolbar_item_input{vertical-align:middle;margin-top:-1px;margin-right:.5em}.toolbar_select{margin-right:.5em;max-width:12em}.roofline_group_caption_colors{background-color:#dcdcdc;color:#000}.roofline_toolbar_control{position:relative;display:inline-block;border:1px solid gray;padding-left:.5em;padding-right:.2em;background-color:#f5f5f5;color:#000}.roofline_toolbar_control.simple_click:hover{background-color:#fff!important;color:#000!important}.roofline_toolbar_control.simple_click{background-color:#f5f5f5!important;color:#000!important}.roofline_toolbar_control.simple_click.pressed{background-color:#fff!important;color:#000!important}.roofline_toolbar_control>.roofline_toolbar_control_content{margin-left:.2em;vertical-align:text-bottom}.roofline_toolbar_control>.roofline_toolbar_control_content.pictured{margin-left:1.2em}.roofline_toolbar_control>.roofline_toolbar_control_content.pictured:before{position:absolute;left:.3em;top:.3em;width:1em;height:1em;opacity:.5}.roofline_cores_caption{font-size:90%}.roofline_cores_caption+span{font-weight:700}.roofline_toolbar_control>.roofline_toolbar_control_content#roofline_compare_content:before{content:url(\"data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 16 16\" fill=\"#000\"><path d=\"M11,9c0,1.1,1.1,2,2.5,2S16,10.1,16,9l-2-5V3h1V2h-1h-1H9H7H3H2H1v1h1v1L0,9c0,1.1,1.1,2,2.5,2S5,10.1,5,9L3,4V3h4v11c-3,0-4,1.1-4,2h10c0-1-1-2-4-2V3h4v1L11,9z M4,9H1l1-2h1L4,9z M15,9h-3l1-2h1L15,9z\"/><path d=\"M8,0C7.4,0,7,0.4,7,1h2C9,0.4,8.6,0,8,0z\"/></svg>\")}.roofline_toolbar_control>.roofline_toolbar_control_content#roofline_type_content:before{content:url(\"data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 16 16\" fill=\"#000\"><polygon class=\"st1\" points=\"0,2 0,3 7,10 7,15 9,16 9,10 16,3 16,2 \"/></svg>\");top:.3em}.roofline_toolbar_control_items{display:none;position:absolute;box-sizing:border-box;top:1.5em;left:-1px;min-width:6em;background:#fff;color:#000;padding:.3em;margin:0;border:1px solid gray;z-index:1}.roofline_toolbar_control_items .roofline_type_select_items{max-height:-webkit-calc(100vh - 4.5em);max-height:-moz-calc(100vh - 4.5em);max-height:calc(100vh - 4.5em);overflow-x:hidden;overflow-y:auto}.roofline_toolbar_control_items .zoom_select_items{display:block;position:relative;top:auto;right:auto;border:none;min-height:2em;max-height:40vh;overflow-x:hidden}.roofline_toolbar_control_items .zoom_select_items:empty:after{content:attr(data-noitems);position:absolute;top:.4em;width:100%;text-align:center;color:#aaa}.roofline_toolbar_control_items .zoom_select_items.scrolled{max-height:40vh;overflow-y:scroll}#roofline_cores_control .roofline_toolbar_control_items{padding:0}.roofline_toolbar_control_btns{text-align:right;margin-top:.2em}.roofline_toolbar_control_btns>button{font-size:90%}.roofline_toolbar_control_caption{position:relative;padding:.3em;font-size:90%;box-sizing:border-box;margin-top:.3em;margin-bottom:.2em;pointer-events:none}.roofline_toolbar_control.pressed{box-shadow:3px 5px 8px #d3d3d3;border-color:gray!important;background-color:#fff!important;border-radius:0!important}.roofline_toolbar_control.pressed>.icon.select:after{transform:rotate(180deg);transform-origin:50% 50%}.roofline_toolbar_control.pressed>.idvcjs_span,.roofline_toolbar_control.pressed>.roofline_toolbar_control_items{display:block}.roofline_type_group{position:relative;margin-bottom:.7em}.roofline_type_group.with_caption{margin-top:1.6em;margin-bottom:0;padding-top:.5em;padding-bottom:.6em}.roofline_type_group.with_caption:before{content:attr(data-caption);position:absolute;top:-1.6em;width:100%;background-color:#dcdcdc;color:#000;padding:.2em;font-size:90%;box-sizing:border-box}.roofline_type_select_caption:not(:first-child){margin-left:.7em}.roofline_type_select_caption:last-child{margin-right:.7em}.roofline_toolbar_select_caption{margin-right:.8em}.settings table{border-collapse:collapse;width:100%}.settings .roofs_table tr:nth-child(2n){background-color:#eee}.no_roofs .roofs_table{display:none}.settings .loadsave_settings_button{margin-top:.5em}.settings .loadsave_settings_button,.settings .roofs_table button{width:auto;margin-left:.3em;font-size:85%;font-weight:400}.no_roofs .first_settings_title{display:none!important}.no_roofs .settings_title{margin-top:0!important}.settings td,.settings th{padding:2px 5px;cursor:default}.settings td.roof_settings_input{text-align:center;cursor:pointer}.settings td.roof_settings_input>input{cursor:pointer}.settings tr:first-child{border-top:8px solid #fff}.settings .roof_memory+.roof_calculation{border-top:10px solid #fff}.settings .settings_title{position:relative;margin:1em 0 .3em;white-space:nowrap;text-align:left;padding:.3em;padding-left:.6em}.settings .settings_title:first-child{margin-top:0}.settings .cancel_loops_settings_button{margin-left:1em}.settings .settings_item_caption{margin:.3em 1em .3em 0;white-space:nowrap;vertical-align:middle}.settings .single_settings_item{white-space:nowrap}.settings .settings_item{margin-right:.4em;vertical-align:middle}.settings .settings_item.combo{position:relative;max-width:8em;width:8em;margin-top:.2em}.settings .color_mode_combo{font-size:100%}.settings .loop_row>td{padding:5px}.roofs_strategy_setting{margin-bottom:.5em}.roofline_view_mode_setting{margin-top:.5em}.radio_settings_item{display:block}.loop_sample{border-radius:50%;border:1px solid #000;margin:.1em .5em;display:inline-block}.loop_fixed_sample{width:.8em;height:.8em;vertical-align:text-bottom}.settings input{font-size:1em}.settings .size_input{max-width:5em}.settings .color_input{max-width:8em;visibility:hidden}.settings .def_color_item{display:none}.settings .visibility_input,.settings .visibility_setting_caption{visibility:hidden}.no_self_time_item.color_input,.set_weight_colors .color_input{visibility:visible}.settings:not(.use_loops_colors) .def_color_item{display:inline-block;visibility:visible!important}.settings .value_input{max-width:5em}.settings .threshold_row>td{background-color:#eee;padding-bottom:4px}.settings .threshold_label{font-size:90%;margin:0 .5em 0 .3em}.settings .measure_label{font-size:85%;margin-left:.3em}.settings .threshold_input{max-width:4em}.settings button{width:2em;font-size:1em;font-weight:700}.settings_title button{display:inline-block;width:auto;font-weight:400;font-size:85%}.settings td.loop_sample_cell{vertical-align:bottom;text-align:center}.settings .wrong_input{outline:2px solid red}.explanation_symbol{position:absolute;width:1.2em;height:1.2em;text-align:center;background-color:red;color:#fff;border-radius:50%;border:1px solid currentColor;font-weight:700;z-index:4990;cursor:default}.settings .explanation_symbol,.summary .explanation_symbol,.zoom_toolbar .explanation_symbol{background-color:gray;width:1em;height:1em;font-size:80%;position:relative;display:inline-block;vertical-align:top;line-height:1em;margin-left:.2em;margin-top:-.2em;z-index:0}#roofline_cores_control .explanation_symbol{margin-top:0!important}.simple_view .legend_area,.simple_view .menu_button,.simple_view .settings,.simple_view .summary,.simple_view .zoom_toolbar>span{display:none!important}.simple_view .toolbar_item_caption.br:before{border-left:none!important}.roofline_popup{display:none;position:absolute;background:#fff;color:#000;list-style-type:none;border:1px solid #a9a9a9;padding:0;margin:0;box-shadow:0 5px 20px 0 rgba(0,0,0,.75);z-index:5000;font-size:90%;max-height:12.5em;overflow-x:hidden;overflow-y:auto}.roofline_popup li{padding:.1em .3em .1em 0;white-space:nowrap;cursor:pointer}.roofline_popup li:hover{background-color:#add8e6}.roofline_popup li.selected{background-color:#87cefa!important}.roofline_toast{position:relative;display:inline-block;padding:.4em 1.2em;color:#fff;background:#0071c5;border:1px solid #555;border-radius:.5em;height:auto;cursor:default;box-shadow:0 5px 10px 0 rgba(0,0,0,.5);opacity:0;-moz-transition:opacity .25s ease-in-out;-webkit-transition:opacity .25s ease-in-out;transition:opacity .25s ease-in-out}.roofline_toast.toast-show{opacity:1}.roofline_toast_holder{background-color:transparent!important;font-size:1em!important;padding-top:3em!important}.roofline_flash:after{content:\"\";left:0;right:0;top:0;bottom:0;position:absolute;animation:flash 2s infinite ease-in-out;background:#00f;box-shadow:0 0 7px 5px #00f;opacity:0;pointer-events:none}.idvcsplitter_horz_splitter{width:.4em!important}.idvc_context_menu{position:absolute;font:caption;background:menu;color:menutext;border:1px solid #d3d3d3}.idvc_context_menu_item{padding:.3em 2em .3em 1.4em;cursor:default}.idvc_context_menu_item.disabled{color:gray}.idvc_context_menu_separator{margin-top:.2em;padding:0;padding-bottom:.2em;height:0;border-style:solid none none;border-width:1px;border-color:#d3d3d3}.idvc_context_menu_item:hover{background:highlight;color:highlighttext}.idvc_context_menu_item.disabled:hover{background:#d3d3d3;color:gray}.report .loadsave_settings_button,.report .no_report,body:not(.report) .report_only{display:none}@-moz-keyframes gradient_pressed{0%{background:radial-gradient(circle at center,#ddd 0,#fff 0,#fff 100%)}25%{background:radial-gradient(circle at center,#ddd 20%,#fff 25%,#fff 100%)}50%{background:radial-gradient(circle at center,#ddd 40%,#fff 45%,#fff 100%)}75%{background:radial-gradient(circle at center,#ddd 70%,#fff 75%,#fff 100%)}to{background:radial-gradient(circle at center,#ddd 99%,#fff 100%,#fff 0)}}@-webkit-keyframes gradient_pressed{0%{background:radial-gradient(circle at center,#ddd 0,#fff 0,#fff 100%)}25%{background:radial-gradient(circle at center,#ddd 20%,#fff 25%,#fff 100%)}50%{background:radial-gradient(circle at center,#ddd 40%,#fff 45%,#fff 100%)}75%{background:radial-gradient(circle at center,#ddd 70%,#fff 75%,#fff 100%)}to{background:radial-gradient(circle at center,#ddd 99%,#fff 100%,#fff 0)}}@-o-keyframes gradient_pressed{0%{background:radial-gradient(circle at center,#ddd 0,#fff 0,#fff 100%)}25%{background:radial-gradient(circle at center,#ddd 20%,#fff 25%,#fff 100%)}50%{background:radial-gradient(circle at center,#ddd 40%,#fff 45%,#fff 100%)}75%{background:radial-gradient(circle at center,#ddd 70%,#fff 75%,#fff 100%)}to{background:radial-gradient(circle at center,#ddd 99%,#fff 100%,#fff 0)}}@keyframes gradient_pressed{0%{background:radial-gradient(circle at center,#ddd 0,#fff 0,#fff 100%)}25%{background:radial-gradient(circle at center,#ddd 20%,#fff 25%,#fff 100%)}50%{background:radial-gradient(circle at center,#ddd 40%,#fff 45%,#fff 100%)}75%{background:radial-gradient(circle at center,#ddd 70%,#fff 75%,#fff 100%)}to{background:radial-gradient(circle at center,#ddd 99%,#fff 100%,#fff 0)}}@-moz-keyframes gradient_click{0%{background:radial-gradient(circle at center,#ddd 0,#fff 0,#fff 100%)}25%{background:radial-gradient(circle at center,#ddd 10%,#fff 15%,#fff 100%)}50%{background:radial-gradient(circle at center,#ddd 30%,#fff 35%,#fff 100%)}75%{background:radial-gradient(circle at center,#ddd 50%,#fff 55%,#fff 100%)}to{background:radial-gradient(circle at center,#ddd 60%,#fff 68%,#fff 100%)}}@-webkit-keyframes gradient_click{0%{background:radial-gradient(circle at center,#ddd 0,#fff 0,#fff 100%)}25%{background:radial-gradient(circle at center,#ddd 10%,#fff 15%,#fff 100%)}50%{background:radial-gradient(circle at center,#ddd 30%,#fff 35%,#fff 100%)}75%{background:radial-gradient(circle at center,#ddd 50%,#fff 55%,#fff 100%)}to{background:radial-gradient(circle at center,#ddd 60%,#fff 68%,#fff 100%)}}@-o-keyframes gradient_click{0%{background:radial-gradient(circle at center,#ddd 0,#fff 0,#fff 100%)}25%{background:radial-gradient(circle at center,#ddd 10%,#fff 15%,#fff 100%)}50%{background:radial-gradient(circle at center,#ddd 30%,#fff 35%,#fff 100%)}75%{background:radial-gradient(circle at center,#ddd 50%,#fff 55%,#fff 100%)}to{background:radial-gradient(circle at center,#ddd 60%,#fff 68%,#fff 100%)}}@keyframes gradient_click{0%{background:radial-gradient(circle at center,#ddd 0,#fff 0,#fff 100%)}25%{background:radial-gradient(circle at center,#ddd 10%,#fff 15%,#fff 100%)}50%{background:radial-gradient(circle at center,#ddd 30%,#fff 35%,#fff 100%)}75%{background:radial-gradient(circle at center,#ddd 50%,#fff 55%,#fff 100%)}to{background:radial-gradient(circle at center,#ddd 60%,#fff 68%,#fff 100%)}}@-moz-keyframes visible_click{0%{box-shadow:0 0 0 .5em #999;width:.1em;height:.1em}to{box-shadow:0 0 1em .5em #777;width:1.5em;height:1.5em}}@-webkit-keyframes visible_click{0%{box-shadow:0 0 0 .5em #999;width:.1em;height:.1em}to{box-shadow:0 0 1em .5em #777;width:1.5em;height:1.5em}}@-o-keyframes visible_click{0%{box-shadow:0 0 0 .5em #999;width:.1em;height:.1em}to{box-shadow:0 0 1em .5em #777;width:1.5em;height:1.5em}}@keyframes visible_click{0%{box-shadow:0 0 0 .5em #999;width:.1em;height:.1em}to{box-shadow:0 0 1em .5em #777;width:1.5em;height:1.5em}}@-moz-keyframes visible_pressing{0%{box-shadow:0 0 1em .5em #777;border-radius:50%;background-color:#bbb}to{box-shadow:0 0 0 0 #bbb;border-radius:0;background-color:#777}}@-webkit-keyframes visible_pressing{0%{box-shadow:0 0 1em .5em #777;border-radius:50%;background-color:#bbb}to{box-shadow:0 0 0 0 #bbb;border-radius:0;background-color:#777}}@-o-keyframes visible_pressing{0%{box-shadow:0 0 1em .5em #777;border-radius:50%;background-color:#bbb}to{box-shadow:0 0 0 0 #bbb;border-radius:0;background-color:#777}}@keyframes visible_pressing{0%{box-shadow:0 0 1em .5em #777;border-radius:50%;background-color:#bbb}to{box-shadow:0 0 0 0 #bbb;border-radius:0;background-color:#777}}@-moz-keyframes click_clear{0%{box-shadow:0 0 0 1px #fff}to{box-shadow:0 0 0 1.2em #fff}}@-webkit-keyframes click_clear{0%{box-shadow:0 0 0 1px #fff}to{box-shadow:0 0 0 1.2em #fff}}@-o-keyframes click_clear{0%{box-shadow:0 0 0 1px #fff}to{box-shadow:0 0 0 1.2em #fff}}@keyframes click_clear{0%{box-shadow:0 0 0 1px #fff}to{box-shadow:0 0 0 1.2em #fff}}@-moz-keyframes update_summary{0%{background-color:transparent;color:#000;box-shadow:0 0 6px transparent}50%{background-color:#00f;color:#fff;box-shadow:0 0 6px 3px #00f}to{background-color:transparent;color:#000;box-shadow:0 0 6px 3px transparent}}@-webkit-keyframes update_summary{0%{background-color:transparent;color:#000;box-shadow:0 0 6px transparent}50%{background-color:#00f;color:#fff;box-shadow:0 0 6px 3px #00f}to{background-color:transparent;color:#000;box-shadow:0 0 6px 3px transparent}}@-o-keyframes update_summary{0%{background-color:transparent;color:#000;box-shadow:0 0 6px transparent}50%{background-color:#00f;color:#fff;box-shadow:0 0 6px 3px #00f}to{background-color:transparent;color:#000;box-shadow:0 0 6px 3px transparent}}@keyframes update_summary{0%{background-color:transparent;color:#000;box-shadow:0 0 6px transparent}50%{background-color:#00f;color:#fff;box-shadow:0 0 6px 3px #00f}to{background-color:transparent;color:#000;box-shadow:0 0 6px 3px transparent}}@-moz-keyframes flash{0%{opacity:0}50%{opacity:1}to{opacity:0}}@-webkit-keyframes flash{0%{opacity:0}50%{opacity:1}to{opacity:0}}@-o-keyframes flash{0%{opacity:0}50%{opacity:1}to{opacity:0}}@keyframes flash{0%{opacity:0}50%{opacity:1}to{opacity:0}}@-moz-keyframes loading{0%{background-size:100% 100%}50%{background-size:10% 10%}to{background-size:100% 100%}}@-webkit-keyframes loading{0%{background-size:100% 100%}50%{background-size:10% 10%}to{background-size:100% 100%}}@-o-keyframes loading{0%{background-size:100% 100%}50%{background-size:10% 10%}to{background-size:100% 100%}}@keyframes loading{0%{background-size:100% 100%}50%{background-size:10% 10%}to{background-size:100% 100%}}",""])},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var o=e.protocol+"//"+e.host,i=o+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var n=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(n))return t;var r;return r=0===n.indexOf("//")?n:0===n.indexOf("/")?o+n:i+n.replace(/^\.\//,""),"url("+JSON.stringify(r)+")"})}},function(t,e,o){var i=o(8);"string"==typeof i&&(i=[[t.i,i,""]]);var n={hmr:!0};n.transform=void 0;o(1)(i,n);i.locals&&(t.exports=i.locals)},function(t,e,o){e=t.exports=o(0)(!1),e.push([t.i,'.idvcgrid_body{border-spacing:0;left:0;right:0;overflow-y:hidden;overflow-x:auto;background-color:Window;color:WindowText;-moz-user-select:none;user-select:none;outline:none}.idvcgrid_body,.idvcgrid_column{position:absolute;top:0;bottom:0}.idvcgrid_column{width:400px;min-width:20px;cursor:default}.idvcgrid_header_section{position:relative;background-color:ThreeDFace;color:ButtonText;padding:.3em;border-width:0 1px 1px 0;border-style:solid;line-height:1em;height:1em;border-color:ThreeDShadow;overflow:hidden;text-overflow:ellipsis;box-sizing:content-box;display:flex;justify-content:center;align-items:center}.idvcgrid_hidden_header .idvcgrid_header_section{display:none}.idvcgrid_header_section:hover{background-color:ThreeDHighlight}.idvcgrid_header_section.idvc_grid_notsortable:hover{background-color:ThreeDFace}.idvcgrid_ownerdraw .idvcgrid_header_section{text-overflow:clip!important}.idvcgrid_header_section_active{padding:.36em .24em .24em .36em;background:-webkit-linear-gradient(top,ThreeDFace,ThreeDHighlight)!important;background:-moz-linear-gradient(to bottom,ThreeDFace 0,ThreeDHighlight 100%)!important;background:linear-gradient(180deg,ThreeDFace 0,ThreeDHighlight)!important}.idvcgrid_header_section_hover{background-color:ThreeDHighlight}.idvcgrid_header_section_moving{position:absolute;background-color:ThreeDShadow!important;border-color:currentColor;box-sizing:border-box;opacity:.6}.idvcgrid_header_section_moving_container{position:absolute;background-color:transparent;z-index:5000;overflow:hidden}.idvcgrid_header_section_text{text-align:center;pointer-events:none;overflow:hidden;text-overflow:ellipsis;padding:.1em 0;max-height:100%}.idvcgrid_header_expand_collapse{padding-right:1.11em}.idvcgrid_header_section_active.idvcgrid_header_expand_collapse{padding-right:1.05em}.idvcgrid_expand_collapse_column{position:absolute;top:.3em;right:.3em;width:.8em;height:.8em;line-height:.8em;border-style:none;border-radius:.3em;color:GrayText;box-sizing:content-box}.idvcgrid_expand_collapse_column:active{background-color:ThreeDLightShadow}.idvcgrid_header_section_active .idvcgrid_expand_collapse_column{top:.36em;right:.22em}.idvcgrid_expand_collapse_column:hover{color:WindowText}.idvcgrid_collapsed_column:after,.idvcgrid_expanded_column:after{position:absolute;top:-.1em;right:.125em}.idvcgrid_expanded_column:after{content:"\\AB"}.idvcgrid_collapsed_column:after{content:"\\BB"}.idvcgrid_column_scrolled{overflow:hidden;position:absolute;top:-webkit-calc(1.6em + 1px);top:-moz-calc(1.6em + 1px);top:calc(1.6em + 1px);left:0;right:0;bottom:0}.idvcgrid_inactive_column{bottom:auto;height:-webkit-calc(1.6em + 1px);height:-moz-calc(1.6em + 1px);height:calc(1.6em + 1px)}.idvcgrid_inactive_column .idvcgrid_column_scrolled{display:none}.idvcgrid_hidden_header .idvcgrid_column_scrolled{top:0!important}.idvcgrid_visible_footer .idvcgrid_column_scrolled{bottom:-webkit-calc(1em + 7px)!important;bottom:-moz-calc(1em + 7px)!important;bottom:calc(1em + 7px)!important}.idvcgrid_header_container{flex-direction:column;justify-content:space-around;max-width:100%}.idvcgrid_header_caption{overflow:hidden}.idvcgrid_header_caption,.idvcgrid_header_legend{position:relative;display:flex;flex-direction:row;justify-content:center;align-items:center}.idvcgrid_header_legend{padding-top:2px}.idvcgrid_legend_color{background-color:currentColor;width:1em;height:1em;margin-left:.3em;margin-right:.3em;border:1px solid #333;border-radius:3px}.idvcgrid_legend_text{pointer-events:none;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.idvcgrid_column_sorting{color:ThreeDDarkShadow;padding:0 0 0 .24em}.idvcgrid_column_sorting:after{content:"\\25BC"}.idvcgrid_column_sorting.idvcgrid_sorting_backward:after{content:"\\25B2"}.idvcgrid_column_sorting.idvcgrid_sorting_waiting:after{content:"\\25C6";-webkit-animation:idvcgrid_wait 1.5s infinite ease-in-out!important;-moz-animation:idvcgrid_wait 1.5s infinite ease-in-out!important;animation:idvcgrid_wait 1.5s infinite ease-in-out!important;font-size:1.2em}.idvcgrid_footer_section{position:absolute;padding:3px 4px;margin:0;border:1px;border-style:solid solid solid none;border-color:ThreeDShadow;background-color:ThreeDFace;color:WindowText;line-height:1em;height:1em;vertical-align:middle;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;box-sizing:content-box;display:none;left:0;right:0;bottom:0}.idvcgrid_visible_footer .idvcgrid_footer_section{display:block!important}.idvcgrid_cell{position:relative;padding:3px 4px 2px;margin:0;border:1px;border-style:solid solid solid none;border-color:ThreeDLightShadow ThreeDLightShadow transparent transparent;background-color:Window;color:WindowText;line-height:1em;height:1em;vertical-align:middle;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;box-sizing:content-box}.idvcgrid_cell:first-child{border-top-color:transparent}.idvcgrid_cell:last-child{border-bottom-color:ThreeDLightShadow}.idvcgrid_cell_content_container{display:flex;align-items:center;flex-wrap:nowrap;pointer-events:none}.idvcgrid_ownerdraw .idvcgrid_cell{text-overflow:clip!important}.idvcgrid_selected_row{background-color:ThreeDLightShadow;color:ButtonText}.idvcgrid_focused .idvcgrid_selected_row{background-color:Highlight;color:HighlightText}.idvcgrid_focused .idvcgrid_current_row{border-style:dashed solid dashed none;border-top-color:WindowText;border-bottom-color:WindowText}.idvcgrid_focused .idvcgrid_current_row+.idvcgrid_cell{border-top-color:transparent!important}.idvcgrid_vertical_scroll{width:1pc;position:absolute;right:0;top:0;bottom:0;overflow-x:hidden;overflow-y:auto;visibility:hidden;pointer-events:auto!important}.idvcgrid_scroll_size{width:1px;height:1px}.idvcgrid_expand_collapse{margin:0 .4em 0 0;padding:0;left:1em;width:0;height:0;display:inline-block;vertical-align:-10%;border-style:solid;border-width:.4em 0 .4em .6em;border-color:transparent transparent transparent currentColor;-webkit-transition:-webkit-transform .2s ease-in-out;-moz-transition:-moz-transform .2s ease-in-out;transition:transform .2s ease-in-out;opacity:.6}.idvcgrid_expand_collapse:hover{opacity:1}.idvcgrid_expanded{-webkit-transform:rotate(90deg);-moz-transform:rotate(90deg);transform:rotate(90deg)}.idvcgrid_empty{margin-right:.44em;border-width:.3em!important;border-color:transparent!important}.idvcgrid_waiting{margin-right:.34em;border-width:.34em!important;border-color:currentColor!important;border-radius:.34em;vertical-align:3%;-webkit-animation:idvcgrid_wait 1.5s infinite ease-in-out!important;-moz-animation:idvcgrid_wait 1.5s infinite ease-in-out!important;animation:idvcgrid_wait 1.5s infinite ease-in-out!important}.idvcgrid_more{margin:0 .4em 0 0;padding:0;left:1em;border:.34em solid transparent;display:inline-block;vertical-align:middle;-webkit-transition:all .2s ease-in-out;-moz-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.idvcgrid_more_text{opacity:.6}.idvcgrid_more_text:hover{opacity:1;-webkit-animation:idvcgrid_pulse 1.5s infinite ease-in-out;-moz-animation:idvcgrid_pulse 1.5s infinite ease-in-out;animation:idvcgrid_pulse 1.5s infinite ease-in-out}.idvcgrid_search_str{background-color:#90ee90}.idvcgrid_current_search_str{background-color:#ffa07a}.idvcgrid_line_num{color:GrayText;font-size:-webkit-calc(100% - 2px);font-size:-moz-calc(100% - 2px);font-size:calc(100% - 2px);margin:0 6px 0 2px}.idvcgrid_line_num,.idvcgrid_source_line{white-space:pre;display:inline-block;font-family:Consolas!important}.idvcgrid_leftgrid_holder{margin:0;position:absolute;top:0;bottom:0;left:0;width:20em;border-bottom:1px solid ThreeDShadow}.idvcgrid_splitter_holder{margin:0;position:absolute;top:0;bottom:0;left:0;right:0;z-index:1}.idvcgrid_splitter{margin:0;border-width:1px;border-style:none solid;border-color:ThreeDShadow;position:absolute;top:0;bottom:0;width:2px;left:40%;cursor:ew-resize;box-sizing:content-box}.idvcgrid_splitter:hover{border-color:ThreeDDarkShadow;background-color:ThreeDShadow}.idvcgrid_splitter_hover{border-color:ThreeDDarkShadow;background-color:ThreeDShadow!important}.idvcgrid_central_column{margin:0;position:absolute;left:0;top:0;bottom:0;width:40%}.idvcgrid_central_column .idvcgrid_header_section{border-width:0 0 1px}.idvcgrid_central_column .idvcgrid_cell{border-right-style:none}.idvcgrid_central_column .idvcgrid_footer_section{border-style:solid none}.idvcgrid_right_grid{margin:0;position:absolute;left:-webkit-calc(40% + 4px);left:-moz-calc(40% + 4px);left:calc(40% + 4px);right:0;top:0;bottom:0}.idvcgrid_global_cursor{width:100%;height:100%;background-color:transparent;cursor:ew-resize}.idvcgrid_arrow_up,.idvcgrid_global_cursor{position:absolute;left:0;top:0;z-index:5000}.idvcgrid_arrow_up{width:0;height:0;border-left:.8em solid transparent;border-right:.8em solid transparent;border-bottom:.8em solid red;box-sizing:content-box}.idvcgrid_hierarchical_line{position:absolute;left:0;top:0;width:3px;height:0;z-index:5000;border-left:1px solid ThreeDShadow;border-bottom:1px solid ThreeDDarkShadow;border-top:1px solid ThreeDShadow;box-sizing:content-box}.idvcgrid_popup{position:absolute;left:0;top:0;z-index:5000;box-shadow:0 0 0 1px currentColor,3px 3px 5px 0 #555;pointer-events:none;white-space:normal;word-wrap:break-word}.idvcgrid_tooltip{background-color:InfoBackground;color:InfoText;font:caption;border-width:1px;padding:2px 4px;margin-top:2em;box-sizing:content-box;-moz-appearance:none!important}.idvcgrid_tooltip_ellipsis{margin-top:0!important;overflow:hidden}.idvcgrid_tooltip_ellipsis:after{content:"...";position:absolute;right:4px;bottom:2px;height:1em;line-height:1em;background-color:inherit;font-weight:700}.idvcgrid_cell_item{background:currentColor;border:1px solid #333;border-radius:3px;min-height:1em;box-sizing:content-box;pointer-events:none}.idvcgrid_cell_text{width:6ch;text-align:right;flex-shrink:0;pointer-events:none}.idvcgrid_cell_items_container{margin-left:8px;min-width:5em;display:flex;align-items:center;flex-grow:1;pointer-events:none}.idvcgrid_disabler{position:absolute;left:0;top:0;width:100%;height:100%;color:ThreeDFace;background-color:rgba(0,0,0,.7);z-index:5000;text-align:center;padding-top:1em;font-size:xx-large;text-shadow:0 0 .5em #fff}.idvc_disable_hover,.idvc_disable_hover *{pointer-events:none}.idvc_disable,.idvc_disable *{pointer-events:none;color:GrayText!important}.idvc_disable .idvcgrid_selected_row{background-color:Window!important}.idvc_disable .idvcgrid_current_row{border-color:transparent!important}.idvc_disable .idvcgrid_current_row+.idvcgrid_cell{border-top-color:ThreeDLightShadow!important}.idvcsplitter_horz_primary{margin:0;position:absolute;left:0;top:0;bottom:0}.idvcsplitter_horz_splitter{position:absolute;top:0;bottom:0;width:.3em;cursor:ew-resize;box-sizing:border-box}.idvcsplitter_horz_secondary{margin:0;position:absolute;right:0;top:0;bottom:0}.idvcsplitter_vert_primary{margin:0;position:absolute;left:0;top:0;right:0}.idvcsplitter_vert_splitter{position:absolute;left:0;height:.3em;right:0;cursor:ns-resize;box-sizing:border-box}.idvcsplitter_vert_secondary{margin:0;position:absolute;right:0;left:0;bottom:0}.idvcsplitter_folded,.idvcsplitter_sash{cursor:pointer}.idvcsplitter_vert_splitter>.idvcsplitter_sash{position:relative;width:2em;margin:auto;height:100%}.idvcsplitter_vert_splitter>.idvcsplitter_sash:after{content:"";position:absolute;display:block;left:0;right:0;top:1px;bottom:1px;background:repeating-linear-gradient(90deg,GrayText,GrayText 2px,transparent 0,transparent 4px);border:0;margin:0}.idvcsplitter_horz_splitter>.idvcsplitter_sash{position:absolute;width:100%;height:2em;top:50%;margin-top:-1em}.idvcsplitter_horz_splitter>.idvcsplitter_sash:after{content:"";position:absolute;display:block;top:0;bottom:0;left:1px;right:1px;background:repeating-linear-gradient(180deg,GrayText,GrayText 2px,transparent 0,transparent 4px);border:0;margin:0}.idvc_hierarchy_caption{position:relative;cursor:pointer;margin-left:1.1em}.idvc_hierarchy_caption:before{content:"";position:absolute;padding:0;width:0;height:0;margin:-.2em .32em 0 0;border-style:solid;border-width:.34em 0 .34em .68em;border-color:transparent transparent transparent currentColor;-webkit-transition:all .2s ease-in-out;-moz-transition:all .2s ease-in-out;transition:all .2s ease-in-out;left:-1em;top:.45em;color:GrayText}.idvc_hierarchy_caption:hover:before{color:WindowText}.idvc_hierarchy_caption.idvc_hierarchy_expanded:before{-webkit-transform:rotate(90deg);-moz-transform:rotate(90deg);transform:rotate(90deg)}.idvc_hierarchy_body{display:none;overflow:hidden;cursor:default;margin-left:1.1em}.idvc_hierarchy_item{display:flex;justify-content:space-between}.idvc_hierarchy_caption.idvc_hierarchy_expanded+.idvc_hierarchy_body,.idvc_hierarchy_container{display:flex;flex-direction:column}@-moz-keyframes idvcgrid_pulse{0%{text-shadow:0 0 0 currentColor}50%{text-shadow:0 0 .8em currentColor}to{text-shadow:0 0 0 currentColor}}@-webkit-keyframes idvcgrid_pulse{0%{text-shadow:0 0 0 currentColor}50%{text-shadow:0 0 .8em currentColor}to{text-shadow:0 0 0 currentColor}}@-o-keyframes idvcgrid_pulse{0%{text-shadow:0 0 0 currentColor}50%{text-shadow:0 0 .8em currentColor}to{text-shadow:0 0 0 currentColor}}@keyframes idvcgrid_pulse{0%{text-shadow:0 0 0 currentColor}50%{text-shadow:0 0 .8em currentColor}to{text-shadow:0 0 0 currentColor}}@-moz-keyframes idvcgrid_wait{0%{opacity:1}50%{opacity:.2}to{opacity:1}}@-webkit-keyframes idvcgrid_wait{0%{opacity:1}50%{opacity:.2}to{opacity:1}}@-o-keyframes idvcgrid_wait{0%{opacity:1}50%{opacity:.2}to{opacity:1}}@keyframes idvcgrid_wait{0%{opacity:1}50%{opacity:.2}to{opacity:1}}',""])},function(t,e,o){var i=o(10);"string"==typeof i&&(i=[[t.i,i,""]]);var n={hmr:!0};n.transform=void 0;o(1)(i,n);i.locals&&(t.exports=i.locals)},function(t,e,o){e=t.exports=o(0)(!1),e.push([t.i,".idvcroofline_point{stroke:#0ff;fill:#add8e6;stroke-width:1;vector-effect:non-scaling-stroke;shape-rendering:geometricPrecision}.idvcroofline_point_selected{stroke:#d3d3d3;fill:#4169e1}.idvcroofline_point_current{stroke:#fff}.idvcroofline_point_current.idvcroofline_point_selected{fill:#00bfff}.idvcroofline_line{stroke:#ff0;stroke-width:1}.idvcroofline_grid_line,.idvcroofline_line{fill:none;vector-effect:non-scaling-stroke;shape-rendering:crispEdges}.idvcroofline_grid_line{stroke:#d3d3d3;stroke-width:1}.idvcchart_roofline_text{cursor:default}.idvcchart_roofline_center_marker{fill:none;stroke-width:1;stroke:#000}.idvcchart_roofline_center_marker.active{stroke:#00f}",""])},function(t,e,o){var i=o(12);"string"==typeof i&&(i=[[t.i,i,""]]);var n={hmr:!0};n.transform=void 0;o(1)(i,n);i.locals&&(t.exports=i.locals)},function(t,e,o){e=t.exports=o(0)(!1),e.push([t.i,".idvcchart_content{overflow-x:hidden!important;overflow-y:hidden!important;-moz-user-select:-moz-none;user-select:none}.idvcchart_vertaxis{position:absolute;left:0;top:0;bottom:0;width:11ch}.idvcchart_right .idvcchart_vertaxis{left:auto;right:0}.idvcchart_horzaxis{position:absolute;left:11ch;bottom:0;height:2em;right:0}.idvcchart_right .idvcchart_horzaxis{left:0;right:11ch}.idvcchart_top .idvcchart_horzaxis{top:0;bottom:auto}.idvcchart_body{position:absolute;left:11ch;top:0;bottom:2em;right:0}.idvcchart_right .idvcchart_body{left:0;right:11ch}.idvcchart_top .idvcchart_body{top:2em;bottom:0}.idvc_canvas{position:absolute;left:0;top:0;width:100%;height:100%;pointer-events:none}.idvc_active{pointer-events:auto}.idvc_hidden{visibility:hidden}.idvcchart_axis{fill:none;stroke:gray;stroke-width:1;vector-effect:non-scaling-stroke;shape-rendering:crispEdges}.idvcchart_axis_text{fill:#fff;stroke:none;stroke-width:1;vector-effect:non-scaling-stroke}.idvcchart_axis_text_secondary{font-size:90%}.idvcchart_roofline_text{fill:#fff;stroke:none;stroke-width:1;vector-effect:non-scaling-stroke}.idvcchart_empty{fill:none;stroke:none}.idvcchart_tooltip{margin-top:2em!important;margin-left:1em;padding:4px!important}.idvcchart_selection{pointer-events:none;fill:#00f;stroke:#00f;stroke-width:1;opacity:.15}",""])},function(t,e,o){var i=o(14);"string"==typeof i&&(i=[[t.i,i,""]]);var n={hmr:!0};n.transform=void 0;o(1)(i,n);i.locals&&(t.exports=i.locals)},function(t,e,o){e=t.exports=o(0)(!1),e.push([t.i,"body{width:100%;height:100%;position:fixed}body.body_area{font-size:1rem}body div.content{position:absolute;top:4.2rem;bottom:0;left:0;right:0;border-top:1px solid #555}body.no_data>.content{display:none}.summary_info{white-space:nowrap;cursor:pointer}.summary_info .roofline_toolbar_control_content{margin:0;color:#2c3035;font-weight:700}.summary_info .roofline_toolbar_control{margin-top:.2rem;margin-right:.2rem;border-color:transparent;display:block;border:none;box-shadow:none}.summary_info .roofline_toolbar_control_caption{text-align:center;background:none;font-style:italic;color:gray;padding:0;font-size:90%;box-sizing:border-box;margin-top:.75em;margin-bottom:0}.summary_info .item{padding:0;margin:0}.summary_info .item>li{list-style-type:none;padding-top:.3rem}.summary_info .item li>span{min-width:50%;display:inline-block}.summary_info .item li>span:first-child{text-align:right}.summary_info .text{-moz-user-select:text;-webkit-user-select:text;user-select:text;cursor:text;top:1.7rem;box-shadow:none;right:-1px;border:none}.summary_info .icon{width:.9em;height:1.2rem}.summary_info .icon.select:after{width:.6rem}.top_report_area{display:flex;position:relative;top:0;left:0;right:0;color:#fff;background-color:#b5bac1;padding:.3em;align-items:center}.top_report_area .path{opacity:.5;font-family:monospace;position:relative;overflow:hidden;white-space:nowrap;padding-left:.5em;text-overflow:ellipsis;font-size:large}.top_report_area .path:before{content:\"\";background:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cpath fill='%23FFF' xmlns='http://www.w3.org/2000/svg' d='M50 40c-8.285 0-15 6.718-15 15 0 9.285 6.715 15 15 15 8.283 0 15-6.715 15-15 0-8.282-6.717-15-15-15zm40-15H78c-1.65 6-3.428-1.28-3.949-2.846l-3.102-9.309C70.426 11.28 68.65 10 67 10H33c-1.65 0-3.428 1.28-3.949 2.846l-3.102 9.309C25.426 23.72 23.65 25 22 25H10C4.5 25 0 29.5 0 35v45c0 5.5 4.5 10 10 10h80c5.5 0 10-4.5 10-10V35c0-5.5-4.5-10-10-10zM50 80c-13.807 0-25-11.193-25-25 0-13.806 11.193-25 25-25 13.805 0 25 11.194 25 25 0 13.807-11.195 25-25 25zm36.5-38.007c-1.932 1.568-3.5 3.5-3.5a3.5 3.5 0 0 1 3.5 3.5c-3.5-1.566-5.067 0-7 0z'/%3E%3C/svg%3E\") no-repeat;display:inline-block;width:20px;height:20px;vertical-align:bottom;margin:0 6px 0 0}.top_report_area .brand_name{position:relative;flex-grow:1;text-align:right;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.top_report_area .brand_name sup{font-size:.5em;opacity:.5}.top_report_area .brand_name a{color:inherit}.top_report_area .background_layer{position:absolute;left:0;right:0;top:0;bottom:0;overflow:hidden}.top_report_area .background_layer:after{content:\"\";position:absolute;z-index:0;top:-21px;right:20px;width:305px;height:106px;background:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 305 106'%3E%3Cpath fill='%23a2a6ad' d='M0 106L157 5l68 34 77-39-75 52-67-29-119 83z'/%3E%3Cpath fill='%23a2a6ad' d='M75 106l87-68 67 28 75-61-73 73-66-24-55 52z'/%3E%3Cpath fill='%23a2a6ad' d='M134 106l33-36 66 22 72-80-70 91-65-16-11 20z'/%3E%3C/svg%3E\") no-repeat}.combo{padding-left:.5ch}.no_roofs .roofs_table{display:table}.idvcgrid_tooltip{background-color:#fbfcc5;color:#000}",""])},function(t,e){var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};if(Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(t,e){"use strict";if(void 0===t||null===t)throw new TypeError("Cannot convert first argument to object");for(var o=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(void 0!==n&&null!==n)for(var r=Object.keys(Object(n)),a=0,s=r.length;a<s;a++){var l=r[a],c=Object.getOwnPropertyDescriptor(n,l);void 0!==c&&c.enumerable&&(o[l]=n[l])}}return o}}),!window.Promise){var i=function(){},n=function(t,e){return function(){t.apply(e,arguments)}},r=function t(e){if(!(this instanceof t))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],u(e,this)},a=function(t,e){for(;3===t._state;)t=t._value;if(0===t._state)return void t._deferreds.push(e);t._handled=!0,r._immediateFn(function(){var o=1===t._state?e.onFulfilled:e.onRejected;if(null===o)return void(1===t._state?s:l)(e.promise,t._value);var i;try{i=o(t._value)}catch(t){return void l(e.promise,t)}s(e.promise,i)})},s=function(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"===(void 0===e?"undefined":o(e))||"function"==typeof e)){var i=e.then;if(e instanceof r)return t._state=3,t._value=e,void c(t);if("function"==typeof i)return void u(n(i,e),t)}t._state=1,t._value=e,c(t)}catch(e){l(t,e)}},l=function(t,e){t._state=2,t._value=e,c(t)},c=function(t){2===t._state&&0===t._deferreds.length&&r._immediateFn(function(){t._handled||r._unhandledRejectionFn(t._value)});for(var e=0,o=t._deferreds.length;e<o;e++)a(t,t._deferreds[e]);t._deferreds=null},d=function(t,e,o){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=o},u=function(t,e){var o=!1;try{t(function(t){o||(o=!0,s(e,t))},function(t){o||(o=!0,l(e,t))})}catch(t){if(o)return;o=!0,l(e,t)}},f=setTimeout;r.prototype.catch=function(t){return this.then(null,t)},r.prototype.then=function(t,e){var o=new this.constructor(i);return a(this,new d(t,e,o)),o},r.prototype.finally=function(t){var e=this.constructor;return this.then(function(o){return e.resolve(t()).then(function(){return o})},function(o){return e.resolve(t()).then(function(){return e.reject(o)})})},r.all=function(t){return new r(function(e,i){function n(t,s){try{if(s&&("object"===(void 0===s?"undefined":o(s))||"function"==typeof s)){var l=s.then;if("function"==typeof l)return void l.call(s,function(e){n(t,e)},i)}r[t]=s,0==--a&&e(r)}catch(t){i(t)}}if(!t||void 0===t.length)throw new TypeError("Promise.all accepts an array");var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);for(var a=r.length,s=0;s<r.length;s++)n(s,r[s])})},r.resolve=function(t){return t&&"object"===(void 0===t?"undefined":o(t))&&t.constructor===r?t:new r(function(e){e(t)})},r.reject=function(t){return new r(function(e,o){o(t)})},r.race=function(t){return new r(function(e,o){for(var i=0,n=t.length;i<n;i++)t[i].then(e,o)})},r._immediateFn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){f(t,0)},r._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},window.Promise=r}},function(t,e,o){function i(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var n,r,n,a,n,s,n,l,n,c,n,d,n,u,n,f,n,h,n,p,n,m,n,g,n,v,n,_,n,y,n,b,n,x,n,w,n,C,n,L,n,S,n,P,n,k,n,R,n,T,n,E,n,M,n,z,n,I,n,A,n,D,B,X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};n=[],r=function(){}.apply(e,n),n=[],a=function(){}.apply(e,n),n=[],s=function(){function t(t){var e=document.createElement("link");e&&(e.setAttribute("href",t),e.setAttribute("rel","stylesheet"),e.setAttribute("type","text/css")),document.getElementsByTagName("head")[0].appendChild(e)}function e(t,e,o){var i=document.getElementsByTagName("head")[0],n=document.createElement("script");n.setAttribute("src",t),n.setAttribute("type","text/javascript"),e&&(n.onload=e),o&&(n.onerror=o),i.appendChild(n)}function o(t){var e=g(t)||document.body,o=document.createElement("button");o.style.position="absolute",o.style.left="0",o.style.top="0",e.appendChild(o),z(e,window.getComputedStyle(o,null),!0),e.removeChild(o)}function i(t,e,o){var i=Math.pow(10,e);return Math[o](t*i)/i}function n(t,e){return i(t,e,"round")}function r(t,e){return i(t,e,"floor")}function a(t,e){return i(t,e,"ceil")}function s(t,e){return t<=10&&t>=1||t<=-1&&t>=-10?n(t,e):t.toExponential(e)}function l(t,e,o,i,n,r){n=n||"div";var a=document.createElement(n);return e&&(a.className=e),o&&(a.id=o),t&&(a.innerHTML=t),r&&r(a),i&&i.appendChild(a),a}function c(t){if(t){var e=t.getBoundingClientRect(),o=document.documentElement,i=window.pageYOffset||o.scrollTop,n=window.pageXOffset||o.scrollLeft,r=e.top+i-o.clientTop;return{x:e.left+n-o.clientLeft,y:r,width:e.width,height:e.height}}}function d(t,e){return"number"==typeof t||"boolean"==typeof t?e-t:"string"==typeof t?e.localeCompare(t):0}function u(){var t=arguments,e=arguments[0];if(e)return e=e.replace(/\{\d+\}/g,function(e){return t[parseInt(e.slice(1,-1),10)]})}function f(t,e){var o=[].slice.call(arguments,2);return function(){return t.apply(e,o.concat([].slice.call(arguments)))}}function h(t){var e=[].slice.call(arguments,1);return e.unshift(void 0),e.unshift(t),f.apply(void 0,e)}function p(t){var e=[].slice.call(arguments,1);return function(){var o=[].slice.call(arguments),i=e.shift();if(i){var n=i.apply(t,o);return e.forEach(function(e){n=e.call(t,n)}),n}}}function m(){var t=[].slice.call(arguments);return t.unshift(void 0),p.apply(void 0,t)}function g(t){return"string"==typeof t?document.getElementById(t):t}function v(t,e){if(t){var o;if(t.hasAttribute(nt)?o=!0:t.refreshSize&&(o=t.refreshSize(e)),!o&&t.children)for(var i=0,n=t.children.length;i<n;i++)v(t.children[i],e)}}function _(t,e,o,i){function n(t){var i=5;e.getDeltaThreshold&&(i=e.getDeltaThreshold());var n={x:t.pageX,y:t.pageY},r=e.getDelta.call(o,n,s.mousePos,s.startMousePos);s.isStarted?(t.preventDefault(),e.onProcess.call(o,r),s.mousePos=n):Math.abs(r)>i&&(s.isStarted=!0)}function r(t){s.globalCursor&&(document.body.removeChild(s.globalCursor),s.globalCursor=null),s={},window.removeEventListener("mousemove",n,!0),window.removeEventListener("mouseup",r,!0),a&&++a.count>1&&(e.onDblClick.call(o),clearTimeout(a.timeout),a=void 0),e.onEnd.call(o),"moz"===tt.engine&&Y({x:t.pageX,y:t.pageY},"mousemove")}o=o||e,void 0===i&&(i=0);var a,s={},l=g(t);l.addEventListener("mousedown",function(t){t.button===i&&e.accepted.call(o,t.target)&&(s.isStarted=!1,s.startMousePos={x:t.pageX,y:t.pageY},s.mousePos={x:t.pageX,y:t.pageY},s.globalCursor=document.createElement("div"),s.globalCursor.className="idvcgrid_global_cursor",s.globalCursor.style.cursor=e.getCursor(),document.body.appendChild(s.globalCursor),window.addEventListener("mousemove",n,!0),window.addEventListener("mouseup",r,!0),t.preventDefault(),t.stopPropagation(),e.onDblClick&&!a&&(a={count:0,timeout:setTimeout(function(){a=void 0},800)}))},!1)}function y(t,e,o,i){function n(e,o){var i,n=t[e];return n&&(i=g(n),i.classList.add(o),u=i.offsetParent||u),i}function r(t){var e=document.createElement("div");return e.className=t,e.idvcCreatedBySplitter=!0,u.appendChild(e),e}function a(t){if(t||!i.refreshSizeByUserAction){var e={};e[i.size]=!0,v(f,e),v(p,e),L&&L.onRefreshSize&&L.onRefreshSize()}}function s(t,e,o){if("100%"===t)t=tt.browserPrefix+"calc(100% - "+e+"px)",f.style[i.size]=t,h.style[i.pos]=t,p.style[i.pos]="100%";else{f.style[i.size]=t,h.style[i.pos]=t;var n=tt.browserPrefix+"calc("+t+" + "+e+"px)";p.style[i.pos]=n}a(o)}function l(t,e,o){f.style[i.size]=t+"px",h.style[i.pos]=t+"px",t+=e,p.style[i.pos]=t+"px",a(o)}function c(){w||(w=f.style[i.size],h.classList.add("idvcsplitter_folded"),_.dragged&&x())}function d(){var t=h[i.offsetSize];return t<0&&(t=0),function(){return h&&"none"===h.style.display}()||t||(t=C),t}if(o=o||.3,t){var u,f=n("primaryDiv",i.primaryDivClass),h=n("splitterDiv",i.splitterDivClass),p=n("secondaryDiv",i.secondaryDivClass);if(u||(u=g(t)),u){f||(f=r(i.primaryDivClass)),h||(h=r(i.splitterDivClass)),p||(p=r(i.secondaryDivClass)),h.onselectstart=function(){return!1};var m=function(t,e,o){var n=d();if(function(t){var e=t.style[i.size];return e&&"%"===e[e.length-1]||!e}(f)){s(100*t/(e+n)+"%",n,o)}else l(t,n,o)},_={pos:-1,dragged:!1},y=null,b=function(t){if(!w&&_.dragged){e=e||100;var o=t[i.eventPos],n=f[i.offsetSize],r=p[i.offsetSize],a=n+r,s=o-_.pos;i.backward&&(s=-s),n+=s,n>=e&&r-s>=e&&(m(n,a,!0),_.pos=o)}},x=function t(){document.body.removeChild(y),y=null,_.pos=-1,_.dragged=!1,h.classList.remove("idvcgrid_splitter_hover"),window.removeEventListener("mousemove",b,!0),window.removeEventListener("mouseup",t,!0),L&&L.onStopUpdateSplitter&&L.onStopUpdateSplitter()};h.onmousedown=function(t){if(t=t||event,w)return void L.unfold(!0);if(!t.ctrlKey&&!t.shiftKey&&t.target===h){t.preventDefault(),y=document.createElement("div"),y.className="idvcgrid_global_cursor";var e=window.getComputedStyle(h,null);y.style.cursor=e.cursor,document.body.appendChild(y),h.classList.add("idvcgrid_splitter_hover"),_.pos=t[i.eventPos],_.dragged=!0,window.addEventListener("mousemove",b,!0),window.addEventListener("mouseup",x,!0),L&&L.onStartUpdateSplitter&&L.onStartUpdateSplitter()}};var w,C=A(o),L={primaryDiv:f,splitterDiv:h,secondaryDiv:p,setSize:function(t,e){if(w)return void(w=t);var o=d();"%"===t[t.length-1]?s(t,o,e):l(parseInt(t,10),o,e)},getSize:function(){return f.style[i.size]},foldPrimary:function(t,e){c(),f.style.display="none",f.setAttribute(nt,"1"),p.style.display="block",p.removeAttribute(nt),t&&(h.style.display="none"),l(0,d(),e),this.afterFoldPrimary&&this.afterFoldPrimary(e)},isPrimaryFolded:function(){return"none"===f.style.display},foldSecondary:function(t,e){c(),p.style.display="none",p.setAttribute(nt,"1"),f.style.display="block",f.removeAttribute(nt),h.style.display=t?"none":"block",s("100%",d(),e),this.afterFoldSecondary&&this.afterFoldSecondary(e)},isSecondaryFolded:function(){return"none"===p.style.display},isSplitterHidden:function(){return"none"===h.style.display},unfold:function(t){if(w){f.style.display="block",f.removeAttribute(nt),p.style.display="block",p.removeAttribute(nt),h.style.display="block";var e=w;w=void 0,this.setSize(e,t),h.classList.remove("idvcsplitter_folded"),this.afterUnfold&&this.afterUnfold(t)}},addSash:function(t,e){e=e||"idvcsplitter_sash";var o=document.createElement("div");return o.className=e,o.onmousedown=function(e){w?this.unfold(!0):t?this.foldPrimary(!1,!0):this.foldSecondary(!1,!0),e.stopPropagation(),e.preventDefault()}.bind(this),h.appendChild(o),this.sashDiv=o,o},removeSash:function(){J(h),delete this.sashDiv},remove:function(){function t(t){t.idvcCreatedBySplitter&&t.parentNode.removeChild(t)}f.classList.remove(i.primaryDivClass),p.classList.remove(i.secondaryDivClass),h.classList.remove(i.splitterDivClass),f.style[i.size]="",h.style[i.pos]="",p.style[i.pos]="",t(f),t(p),t(h)}};return L.setSize("50%"),L}}}function b(t,e,o){o=o||{};var i=!o.backward,n={primaryDivClass:o.primaryDivClass||(i?"idvcsplitter_vert_primary":"idvcsplitter_vert_secondary"),splitterDivClass:o.splitterDivClass||"idvcsplitter_vert_splitter",secondaryDivClass:o.secondaryDivClass||(i?"idvcsplitter_vert_secondary":"idvcsplitter_vert_primary"),size:"height",pos:i?"top":"bottom",offsetSize:"offsetHeight",eventPos:"pageY",backward:!i,refreshSizeByUserAction:o.refreshSizeByUserAction};return y(t,e,o.splitterSize,n)}function x(t,e,o){o=o||{};var i=!o.backward,n={primaryDivClass:o.primaryDivClass||(i?"idvcsplitter_horz_primary":"idvcsplitter_horz_secondary"),splitterDivClass:o.splitterDivClass||"idvcsplitter_horz_splitter",secondaryDivClass:o.secondaryDivClass||(i?"idvcsplitter_horz_secondary":"idvcsplitter_horz_primary"),size:"width",pos:i?"left":"right",offsetSize:"offsetWidth",eventPos:"pageX",backward:!i,refreshSizeByUserAction:o.refreshSizeByUserAction};return y(t,e,o.splitterSize,n)}function w(t,e,o){function i(t){f.elem&&f.elem!==t&&f.elem!==s&&n(),t&&t!==f.elem&&t!==s&&t.addEventListener("mouseout",p,!1),f.elem=t}function n(){f.elem&&f.elem!==s&&(f.elem.removeEventListener("mouseout",p,!1),f.elem=null)}function r(t){c&&clearTimeout(c),c=void 0,t>0&&(c=setTimeout(function(){c=void 0,h()},t))}function a(t){var n=e.needUpdate||function(t,e){return t!==e};if(t=t||event,l=t,n(f.elem,t.target,t.pageX,t.pageY)){var a=e.getInfo(t.target,t.pageX,t.pageY);if(a){if(a.keepCurrent&&f.tooltip)a.tracking&&(a.text&&(f.tooltip.innerHTML=a.text),v(f.tooltip,t.pageX,t.pageY));else if(h(),a.text){var s=void 0!==a.delay?a.delay:o;i(a.target),f.timer=window.setTimeout(m.bind(a.target,a.text,a.x,a.y,a.style),s)}f.tooltip&&$(f.tooltip.style,a.style),c||r(a.autoHideDelay)}else f.tooltip&&h()}}if(e){var s=g(t);if(s){var l,c,d,u,f={tooltip:null,timer:null},h=function(t){c&&(clearTimeout(c),c=void 0),f.tooltip&&document.body.removeChild(f.tooltip),t&&(d=!0,u||(u=F(function(){d=void 0},window,t)),u.call()),f.timer&&(window.clearTimeout(f.timer),f.timer=null),f.tooltip=null,n()},p=function(){h(),e.getInfo(void 0,0,0)},m=function(t,o,i,n){if(!d){f.timer=void 0;var r=e.create(this,t);r&&($(r.style,n),v(r,o,i),f.tooltip=r)}},v=function(t,o,i){void 0===o&&(o=l.pageX),void 0===i&&(i=l.pageY),e.simpleMode||(t.classList.remove("idvcgrid_tooltip_ellipsis"),t.style.height=""),t.offsetWidth>.8*window.innerWidth&&(t.style.height="auto",t.style.width=Math.floor(.8*window.innerWidth)+"px");var n=window.getComputedStyle(t,null),r=parseInt(n.getPropertyValue("margin-left"),10),a=o;a<0?a=0:a+r+t.offsetWidth+6>window.innerWidth+window.scrollX&&(a=window.innerWidth+window.scrollX-t.offsetWidth-r-6);var s=parseInt(n.getPropertyValue("margin-top"),10),c=i;if(c<0&&(c=0),c+t.offsetHeight+s+2>window.innerHeight+window.scrollY&&(c=window.innerHeight+window.scrollY-t.offsetHeight-s-2,!e.simpleMode&&c<3)){c=1;var d=window.innerHeight-c-2*(parseInt(n.getPropertyValue("padding-top"),10)+2);if(t.style.height=d+"px",t.classList.add("idvcgrid_tooltip_ellipsis"),t.style.lineHeight){parseInt(t.style.lineHeight)>d&&(t.style.lineHeight=t.style.height)}}if(!e.ignoreOverlapping&&a<o-.5*r&&c<i-.5*s){var u=o-6-1.5*r-t.offsetWidth;if(u>=0)a=u;else{var f=i-2-1.5*s-t.offsetHeight;f>=0&&(c=f)}}t.style.left=a+"px",t.style.top=c+"px"};return s.addEventListener("mouseout",p,!1),s.addEventListener("mousemove",a,!1),{show:function(t,e,o,n,a,s){i(t),f.tooltip?(f.tooltip.innerHTML=e,$(f.tooltip.style,s),v(f.tooltip,o,n)):m(e,o,n,s),r(a)},hide:function(t){h(t)},update:function(){f.tooltip&&setTimeout(a.bind(this,l),0)},getTooltipDOMElement:function(){if(f)return f.tooltip},getParentDOMElement:function(){if(f)return f.elem}}}}}function C(t,e){if(t&&t.length){var o=document.createElement("div");return o.className="idvcgrid_popup idvcgrid_tooltip",e&&o.classList.add(e),o.innerHTML=t,document.body.appendChild(o),o}}function L(t,e,o,i){return w(t,{needUpdate:function(t,e,i,n){return(o=o||function(t,e){return t!==e})(t,e)},getInfo:function(t,o,i){var n,r;return r="function"==typeof e?e(t,o,i):e,r&&("object"===(void 0===r?"undefined":X(r))?(n={},$(n,r)):n={text:r,target:t}),n},create:function(t,e){var o=C(e,i);return z(o,window.getComputedStyle(document.body,null)),o}},250)}function S(t,e,o){t&&e&&(z(t,e),t.style.paddingLeft=e.paddingLeft,t.style.paddingTop=e.paddingTop,t.style.paddingRight=e.paddingRight,t.style.paddingBottom=e.paddingBottom,t.style.borderTopStyle=e.borderTopStyle,t.style.borderTopWidth=e.borderTopWidth,t.style.borderRightStyle=e.borderRightStyle,t.style.borderRightWidth=e.borderRightWidth,t.style.borderBottomStyle=e.borderBottomStyle,t.style.borderBottomWidth=e.borderBottomWidth,t.style.borderLeftStyle=e.borderLeftStyle,t.style.borderLeftWidth=e.borderLeftWidth,t.style.color=e.color,t.style.borderColor=o||e.backgroundColor,t.style.backgroundColor=o||e.backgroundColor,t.style.backgroundImage=e.backgroundImage,t.style.backgroundRepeat=e.backgroundRepeat,t.style.backgroundPosition=e.backgroundPosition,t.style.backgroundOrigin=e.backgroundOrigin)}function P(t,e,o,i,n){if(t&&e){i=i||function(t,e){e.innerHTML=t.innerHTML},i(t,e);var r=window.getComputedStyle(t,null);e.style.boxSizing=r.boxSizing,e.style.lineHeight=r.lineHeight,n?e.style.width=r.width:e.style.height=r.height,S(e,r,o)}}function k(t,e,o,i){e=e||function(t){return t};var n;n=i?{check:function(t,e){if(!t||!e)return!1;var o=c(t),i=t.offsetHeight;return o.y+i>window.innerHeight+window.scrollY&&(i=window.innerHeight+window.scrollY-o.y),e.offsetHeight-1>i}}:{check:function(t,e){if(!t||!e)return!1;var o=c(t),i=t.offsetWidth;return o.x+i>window.innerWidth+window.scrollX&&(i=window.innerWidth+window.scrollX-o.x),e.offsetWidth-1>i}};var r=w(t,{ignoreOverlapping:!0,simpleMode:!0,needUpdate:function(t,e){return t!==e},getInfo:function(t,o,i){if(t=e(t,o,i)){var n=c(t);return{x:n.x,y:n.y,target:t,text:"exp"}}},create:function(t){if(t.innerHTML.length){var e=document.createElement("div");return e.className="idvcgrid_popup",P(t,e,o,a.processContent,i),document.body.appendChild(e),a.afterCreateTooltip&&a.afterCreateTooltip(e),n.check(t,e)?e:void document.body.removeChild(e)}}},50),a={update:function(){P(r.getParentDOMElement(),r.getTooltipDOMElement())},hide:function(){r.hide()}};return a}function R(t,e,o,i,n){function r(t,e,o){function i(t,e){var o,i,n,r=document.createElement("div");return e?(r.className=l,i=document.createElement("div"),i.className=s,i.appendChild(r),o=document.createElement("div"),o.className=d,i.appendChild(o),n=i):(r.className=c,n=r),t.appendChild(n),{expand:r,body:o,container:i}}if(t&&e){var n=e.children;Array.isArray(n)&&n.forEach(function(n){var s=i(t,n.hasChildren||n.children&&n.children.length),l=o(s,n,e),c=s.expand;l||(n.expanded&&c.classList.add(u),n.className&&c.classList.add(n.className)),n.expanded?r(s.body,a(n),o):c.hierarchicalObj=n})}}function a(t){var o=t;return"function"==typeof e&&(o=e(t)),o}var s="idvc_hierarchy_container",l="idvc_hierarchy_caption",c="idvc_hierarchy_leaf",d="idvc_hierarchy_body",u="idvc_hierarchy_expanded",f=g(t);o=o||function(t,e){if(t&&t.expand&&e){var o=t.expand;(e.html||e.displayName)&&(o.innerHTML=e.html||e.displayName)}};var h=a(e);Array.isArray(h)&&(h={children:h}),r(f,h,o),function(t,e,i){e=e||function(){return!1},i=i||function(){},t=t||document,t.addEventListener("click",function(t){t=t||window.event;for(var n=t.target;n&&n.classList&&!n.classList.contains(l);)n=n.parentNode;n&&n.classList&&n.classList.contains(l)&&!e(n,n.classList.contains(u))&&(n.hierarchicalObj&&(r(n.nextElementSibling,a(n.hierarchicalObj),o),delete n.hierarchicalObj),n.classList.toggle(u),i(n))})}(f,i,n)}function T(t,e){var o=document.createElement("div");o.className="idvcgrid_popup",P(t,o),document.body.appendChild(o);var i=o.offsetWidth;return document.body.removeChild(o),i}function E(t,e,o){if(!(o=o||function(){return!0})())return{disabler:i,disabled:n,end:function(){}};var i=null,n=g(t);return n&&(i=document.createElement("div"),i.className="idvcgrid_disabler",n.appendChild(i),e&&(i.innerText=e),i.getBoundingClientRect()),{disabler:i,disabled:n,end:function(){i.parentNode&&i.parentNode.removeChild(i)}}}function M(t,e){var o="<b>"+t+"</b>";return e&&(o+=" ("+e+")"),o}function z(t,e,o){if(t&&e){if(o){var i=parseInt(e.fontSize);i=2*Math.floor(i/2),t.style.fontSize=i+"px"}else t.style.fontFamily=e.fontFamily,t.style.fontSize=e.fontSize;t.style.fontStyle=e.fontStyle,t.style.fontWeight=e.fontWeight,t.style.fontVariant=e.fontVariant}}function I(t){var e=document.createElement("div");e.style.overflow="hidden",e.style.position="absolute",e.style.left="0",e.style.top="0",e.style.width="100%",e.style.height="100%";var o=document.createElement("div");o.style.width="120%",o.style.height="120%",e.appendChild(o),document.body.appendChild(e),o.style.cursor=t,e.scrollLeft=1,e.scrollLeft=0,document.body.removeChild(e)}function A(t,e){return e=e||document.documentElement,t*parseFloat(getComputedStyle(e).fontSize)}function D(t,e){if(t&&e){var o=t.className.split(" "),i=e.split(" ").filter(function(t){return-1===o.indexOf(t)}).join(" ");i.length&&(t.className+=" "+i)}}function B(t,e){if(t&&e){var o=e.split(" ");t.className=t.className.split(" ").filter(function(t){return-1===o.indexOf(t)}).join(" ")}}function H(t,e){for(;t&&!t.classList.contains(e);)t=t.parentElement;return t}function V(t,e){function o(r){if(n){var a=r-n;t(a)?i(o):e&&e(a)}else n=r,i(o)}var i=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;if(i){var n;i(o)}}function Y(t,e,o,i){e=e||"click",t=t||{x:0,y:0},void 0===t.x&&(t.x=0),void 0===t.y&&(t.y=0);var n={view:window,bubbles:!0,cancelable:!0,screenX:t.x,screenY:t.y,clientX:t.x,clientY:t.y};$(n,i),o=o||document.elementFromPoint(t.x,t.y)||window;var r;try{r=new MouseEvent(e,n)}catch(o){r=document.createEvent("MouseEvents"),r.initMouseEvent(e,!0,!0,window,0,t.x,t.y,t.x,t.y,!1,!1,!1,!1,0,null)}r.simulation=!0,o.dispatchEvent(r)}function O(t,e){if(e){var o=c(e);Y({x:o.x+o.width/2,y:o.y+o.height/2},t,e)}}function N(t){t&&!t.classList.contains(rt)&&t.classList.add(rt)}function W(t){t&&t.classList.remove(rt)}function F(t,e,o){o=o||0,e=e||window,t=t||function(){};var i;return{call:function(){this.cancel();var n=arguments;i=setTimeout(function(){t.apply(e,n),i=void 0},o)},cancel:function(){i&&(clearTimeout(i),i=void 0)},isCalled:function(){return!!i},setFunction:function(e){t=e||function(){}},setThisArg:function(t){e=t||window},setDelay:function(t){o=t}}}function j(){"function"==typeof et&&et.apply(this,arguments)}function $(t,e){t&&e&&"object"===(void 0===e?"undefined":X(e))&&Object.getOwnPropertyNames(e).forEach(function(o){"object"!==X(e[o])||U(e[o])?"className"===o&&t.classList?t.classList.add(e.className):t[o]=e[o]:(t[o]||(Array.isArray(e[o])?t[o]=[]:t[o]={}),$(t[o],e[o]))})}function G(t,e,o){t&&e&&"object"===(void 0===e?"undefined":X(e))&&(o=o||function(){return!0},Object.getOwnPropertyNames(t).forEach(function(i){if(!Z(i)){var n=t[i];if("function"!=typeof n&&o(n,i))if("object"===(void 0===n?"undefined":X(n))){if(U(n))return;e[i]||(Array.isArray(n)?e[i]=[]:e[i]={}),G(n,e[i],o)}else e[i]=n}}))}function U(t){return t instanceof Node&&void 0!==t.nodeType&&void 0!==t.nodeName}function Z(t){var e=t.length;return e>4&&("_"===t[0]&&"_"===t[1]&&"_"===t[e-1]&&"_"===t[e-2])}function q(){function t(){l.length=0,n=r=-1,s=!1,i=void 0,a=!1}function e(t){t&&(s=!1,a=!0,n++,r=n,void 0!==i?t(i):t())}function o(t){t(),this.end()}var i,n=-1,r=-1,a=!1,s=!1,l=[];return{do:function(t){if(t)return l.splice(r+1,0,t),r++,a||e(t),this},do_:function(t){return this.do(o.bind(this,t))},end:function(o){if(a)return i=o,a=!1,n<l.length-1?e(l[n+1]):t(),this},end_:function(t){return setTimeout(this.end.bind(this,t),0),this},nextStep:function(t){return s?this.end():(setTimeout(t,0),this)},cancel:function(){return a?(s=!0,l.splice(n+1)):t(),this},canceled:function(){return s},forEach:function(t,e,o){function i(){if(s)return void this.end();n(),r-=o,a+=o,r>0?this.nextStep(i.bind(this)):this.end()}function n(){for(var i=a,n=a+Math.min(r,o);i<n;i++)e(t[i],i,t)}if(Array.isArray(t)){o=o||t.length;var r=t.length,a=0;r>o?i.call(this):(n(),this.end())}}}}function K(t){t=t||0;var e=t;return{next:function(){return++e,e<t&&(e=++t),e},get:function(){return e}}}function J(t){if(t)for(;t.firstChild;)t.removeChild(t.firstChild)}function Q(t,e){e=e||{height:!0,width:!0};var o=v.bind(void 0,t,e);return window.addEventListener("resize",o,!1),{remove:function(){window.removeEventListener("resize",o,!1),o=void 0}}}var tt={browserPrefix:"-webkit-",engine:"webkit"};!function(){if(-1===navigator.userAgent.indexOf("WebKit")){tt.engine="moz",tt.browserPrefix="-moz-";var t=navigator.userAgent.lastIndexOf("/");if(-1!==t){parseInt(navigator.userAgent.substr(t+1))>=54&&(tt.browserPrefix="")}}}();var et,ot=function(){var t;return function(e){if(!t||e){var o=document.createElement("div");o.style.overflow="scroll",o.style.position="absolute",o.style.top="0",o.style.left="0",o.style.width="100px",o.style.height="100px",document.body.appendChild(o),t={width:o.offsetWidth-o.clientWidth,height:o.offsetHeight-o.clientHeight},document.body.removeChild(o)}return t}}(),it=function(){var t={};return function(e,o){var i;return o||!t[e]?(i=document.getElementById(e))&&(t[e]=i):i=t[e],i}}(),nt="data-stopRefreshSize",rt="idvc_disable_hover",at=function(){};return j.enable=function(){et=console.log.bind(console)},j.disable=function(){et=at},j.set=function(t){et=t},j.disable(),{Consts:tt,appendCSS:t,appendScript:e,applyUAFont:o,getScrollbarSize:ot,createElement:l,getElementById:it,round:n,floor:r,ceil:a,roundExp:s,getElementPos:c,defaultCompareItems:d,format:u,curry:h,curryThis:f,compose:m,composeThis:p,getDomElement:g,refreshSize:v,createResizeProcess:_,createVertSplitter:b,createHorzSplitter:x,addTooltip:L,copyAppearance:S,addExpansion:k,buildHierarchy:R,getTextWidth:T,disableElement:E,makeCaption:M,setFont:z,changeCursor:I,em2px:A,addClass:D,removeClass:B,getParentByClass:H,animate:V,dispatchMouseEvent:Y,dispatchElementMouseEvent:O,disableHover:N,enableHover:W,createAsyncCall:F,consoleLog:j,applyObjectProperties:$,copyObject:G,isHTMLNode:U,createSequence:q,createCounter:K,removeAllChildren:J,addWindowResizeListener:Q}}.apply(e,n),n=[s],l=function(t){function e(e,o,i){o=o||4;if(i||e>=-4&&e<=4){o=e>-1?2:Math.ceil(Math.abs(e))+1;var n=t.round(Math.pow(10,e),o);return i&&(e<-4||e>4)&&(n=+n.toFixed(o)),n}return t.roundExp(Math.pow(10,e),1)}function o(e,o){return o=o||4,t.round(e,o)}function i(t){return t=t||0,t.toFixed(3)}function n(t){return Math.log(t)/Math.LN10}function r(t,e){var o=t.x-e.x;if(0===o)return function(){};var i=(t.y-e.y)/o,n=t.y-t.x*i;return function(t){return i*t+n}}return{pref:": <b>",post:"</b> ",formatVal:e,simpleFormat:o,formatTime:i,log10:n,getLine:r}}.apply(e,n),n=[s],c=function(t){function e(t,e,o){var i;return!_.some(function(n){if(n)return!!n.accept(t,e,o)&&(i=n.getText(t,e,o),!0)})&&v.accept(t,e,o)?v.getText(t,e,o):i}function o(e,o){var i=t.getElementPos(e);o.style.left=i.x+i.width+2+"px",o.style.top=i.y-2+"px"}function n(e,i){if(i){var n=t.createElement("?","explanation_symbol","",document.body,"div",function(o){var n=window.getComputedStyle(e,null);o.setAttribute(y,i),t.setFont(o,n)});return o(e,n),n}}function r(){var t=document.activeElement;t&&t.rooflineExplanation&&o(t,t.rooflineExplanation),t&&t.rooflinePopup&&a(t,t.rooflinePopup)}function a(e,o){var i=t.getElementPos(e),n=t.getElementPos(o);o.style.left=i.x+"px";var r=i.y+i.height+1;r+n.height<window.innerHeight+window.scrollY?o.style.top=r+"px":o.style.top=i.y-n.height-1+"px",o.style.minWidth=i.width+"px"}function s(t,e){if(t){var o=t.rooflineIndex;if(o>=0){var i=t.children[o];i&&i.classList.remove("selected")}if(e>=0){var n=t.children[e];n&&(n.classList.add("selected"),n.offsetTop<t.scrollTop?n.scrollIntoView(!0):n.offsetTop+n.offsetHeight>t.offsetHeight+t.scrollTop&&n.scrollIntoView(!1),window.scrollY&&window.scrollTo(0,0))}t.rooflineIndex=e}}function l(t){function e(t){if(t){var e=t.rooflineIndex;e>0&&s(t,--e)}}function o(t){if(t){var e=t.rooflineIndex;e<t.children.length-1&&s(t,++e)}}function i(t){if(t){var e=t.rooflineIndex;if(e>=0){var o=t.children[e];o&&o.click()}}}t.addEventListener("keydown",function(n){var r=t.rooflinePopup;if(r)switch(n.keyCode){case 13:i(r),n.preventDefault();break;case 27:C(t,[]),n.preventDefault();break;case 38:e(r),n.preventDefault();break;case 40:o(r),n.preventDefault()}},!1),t.addEventListener("blur",function(e){C(t,[])},!1)}function c(t,e){t&&(e=e||function(){return!0},t.addEventListener("input",function(o){var i=o.target.value,n=L.filter(function(t){return-1!==t.toLowerCase().indexOf(i.toLowerCase())});C(t,e(i,n)?n:[],function(e){t.value=e,t.oninput({target:t})},function(t){return'<div class="loop_sample loop_fixed_sample" style="background-color:'+t+'"></div>'+t})},!1),l(t))}function d(e){function o(){i.classList.remove("toast-show"),setTimeout(function(){n&&(n.end(),n=void 0)},400)}var i=t.createElement(e,"roofline_toast","",document.body),n=t.disableElement(document.body,"");n.disabler.classList.add("roofline_toast_holder"),n.disabler.appendChild(i),setTimeout(function(){i.classList.add("toast-show")},0);var r=setTimeout(o,5400);n.disabler.addEventListener("click",function(t){clearTimeout(r),o(),t.stopPropagation(),t.preventDefault()},!1)}function u(t){var e=t.key||String.fromCharCode(t.charCode);if(t.charCode){var o=t.target.value,i=t.target.selectionStart,n=t.target.selectionEnd,r=function(t,e,o,i){return t.substr(0,e)+i+t.substr(o)}(o,i,n,e);return!isNaN(r)&&+r>=0}}function f(t,e,o){t=t||function(){},e=e||function(){},setTimeout(function(){t(),setTimeout(function(){e()},o)},50)}function h(e,o){function i(){n(),l=[],[].forEach.call(f.children,function(t){t!==h&&t!==s&&l.push(t.offsetLeft+t.offsetWidth)})}function n(){d.forEach(function(t){t.remove(),f.insertBefore(t,h)}),d=[]}function r(){s=document.createElement("div"),s.className=e.expansionClassName,f.appendChild(s)}function a(){var e=f.clientWidth-h.clientWidth-p,o=-1;if(l.some(function(t,i){if(t>e)return o=i,c=f.scrollWidth-e,!0}),o!==l.length-d.length)if(n(),t.removeAllChildren(s),o>=0)for(var i,r=o,a=f.children.length-2;r<a;r++){var u=f.children[o];!function(t){return t&&t.classList.contains("br")}(u)&&s.children.length||(i=document.createElement("div"),s.appendChild(i)),f.removeChild(u),i.appendChild(u),d.push(u)}else c=0}o=o||function(){return!0};var s,l=[],c=0,d=[],u=!1,f=document.getElementById(e.bodyId);f.refreshSize=function(t){if(!o())return void n();(t&&t.recalcSizes||!l.length)&&i();var e=f.scrollWidth+c>f.clientWidth;e&&(f.classList.add("expandable"),s||r(),a()),e&&d.length||(f.classList.remove("expandable"),u&&h.click())};var h=document.getElementById(e.expandBtnId);h.onclick=function(){u=!u,u?(s||(r(),a()),s.style.display="block",h.classList.add("expanded")):(s.style.display="none",h.classList.remove("expanded"))};var p=t.em2px(.3,f);return{refreshSize:function(){f.refreshSize({recalcSizes:!0})}}}function p(e,o,i){function n(t){t?o():++s>1&&setTimeout(o,50)}function r(t){return t.classList&&t.classList.contains("disabled")}if(e&&o){var a;a="function"==typeof i?i:function(e){function o(t){c===l.none&&(t.classList.remove(n),t.classList.remove(r),t.classList.add(a))}function i(t){t.classList.add(r),c=l.end}var n,r,a,s;"string"==typeof e?n=e:"object"===(void 0===e?"undefined":X(e))&&(n=e.className,a=nimation.clearClassName,r=nimation.endAnimationClassName,s=e.duration),n=n||"pressing",a=a||"clear_animation",r=r||"waiting",s=s||200;var l={begin:"begin",end:"end",none:"none"},c=l.begin,d=function(){},u=t.createAsyncCall(function(){c!==l.begin?(o(this),d()):(i(this),u.call())},void 0,s);return function(t,e){e?(c=l.begin,d=e||function(){},t.classList.remove(a),t.classList.add(n),u.setThisArg(t),u.call()):c!==l.begin?(c=l.none,o(t)):c=l.none}}(i);var s=0,l=function t(o){a(e),o.target===e&&n(),window.removeEventListener("mouseup",t,!1)};e.addEventListener("mousedown",function(){r(e)||(s=0,window.addEventListener("mouseup",l,!1),a(e,n))},!1),e.addEventListener("click",function(t){r(e)||t.isTrusted||n(!0)},!1)}}function m(t,e,o,i,n){var r=o.centralPart.graphicsRoot.getDefs("line_arrows");i=i||1;var a=9*i,s=1*i,l=Math.ceil(a/2);void 0===n&&(n=a),r.createMarker(t).setMarkerWidth(a).setMarkerHeight(a).setRefX(n).setRefY(l).setOrient("auto").createPath().moveToAbs(s,s).lineToAbs(s,a-s).lineToAbs(a-s,l).lineToAbs(s,s).setD().setClass(e)}var g,v,_=[],y="data-tooltip",b=t.addTooltip(document.body,function(t){if(t)return t.getAttribute(y)});window.addEventListener("resize",function(){r(),t.refreshSize(document.body)},!1);var x=t.getElementById("roofline_settings");x.onscroll=r;var w=document.getElementById("roofline_menu_button");w.onclick=function(){var t=document.activeElement;t&&t.rooflineExplanation&&t.blur(),x.classList.toggle("visible"),w.classList.toggle("close")};var C=function(){function e(){o.style.display="none",o.rooflineElement&&(delete o.rooflineElement.rooflinePopup,delete o.rooflineElement)}var o;return document.addEventListener("click",function(t){o&&o.rooflineElement&&o.rooflineElement!==t.target&&e()},!1),function(i,n,r,l){i&&(r=r||function(){},l=l||function(t){return t},o?o.rooflineElement&&o.rooflineElement!==i&&delete o.rooflineElement.rooflinePopup:(o=t.createElement("","roofline_popup","",document.body,"ul"),o.addEventListener("click",function(t){if(t.target&&"li"===t.target.nodeName.toLowerCase()){var i=t.target.getAttribute("data-value");o.rooflinePopupCallback&&o.rooflinePopupCallback(i),e()}})),o.rooflinePopupCallback=r,o.innerHTML=n.map(function(t){return'<li data-value="'+t+'">'+l(t)+"</li>"}).join(""),n.length?(i.rooflinePopup=o,o.rooflineElement=i,o.style.display="block",a(i,o),s(o,0)):e())}}(),L=["AliceBlue","AntiqueWhite","Aqua","Aquamarine","Azure","Beige","Bisque","Black","BlanchedAlmond","Blue","BlueViolet","Brown","BurlyWood","CadetBlue","Chartreuse","Chocolate","Coral","CornflowerBlue","Cornsilk","Crimson","Cyan","DarkBlue","DarkCyan","DarkGoldenRod","DarkGray","DarkGrey","DarkGreen","DarkKhaki","DarkMagenta","DarkOliveGreen","Darkorange","DarkOrchid","DarkRed","DarkSalmon","DarkSeaGreen","DarkSlateBlue","DarkSlateGray","DarkSlateGrey","DarkTurquoise","DarkViolet","DeepPink","DeepSkyBlue","DimGray","DimGrey","DodgerBlue","FireBrick","FloralWhite","ForestGreen","Fuchsia","Gainsboro","GhostWhite","Gold","GoldenRod","Gray","Grey","Green","GreenYellow","HoneyDew","HotPink","IndianRed","Indigo","Ivory","Khaki","Lavender","LavenderBlush","LawnGreen","LemonChiffon","LightBlue","LightCoral","LightCyan","LightGoldenRodYellow","LightGray","LightGrey","LightGreen","LightPink","LightSalmon","LightSeaGreen","LightSkyBlue","LightSlateGray","LightSlateGrey","LightSteelBlue","LightYellow","Lime","LimeGreen","Linen","Magenta","Maroon","MediumAquaMarine","MediumBlue","MediumOrchid","MediumPurple","MediumSeaGreen","MediumSlateBlue","MediumSpringGreen","MediumTurquoise","MediumVioletRed","MidnightBlue","MintCream","MistyRose","Moccasin","NavajoWhite","Navy","OldLace","Olive","OliveDrab","Orange","OrangeRed","Orchid","PaleGoldenRod","PaleGreen","PaleTurquoise","PaleVioletRed","PapayaWhip","PeachPuff","Peru","Pink","Plum","PowderBlue","Purple","Red","RosyBrown","RoyalBlue","SaddleBrown","Salmon","SandyBrown","SeaGreen","SeaShell","Sienna","Silver","SkyBlue","SlateBlue","SlateGray","SlateGrey","Snow","SpringGreen","SteelBlue","Tan","Teal","Thistle","Tomato","Turquoise","Violet","Wheat","White","WhiteSmoke","Yellow","YellowGreen"];return window.onscroll=function(){document.body.classList.contains("data_loading")||document.body.classList.contains("no_data")||window.scrollTo(0,0)},document.body.onselectstart=function(){return!1},g={getTooltipText:e,addTooltipProcessor:function(t){return _&&_.push(t),t},addDefTooltipProcessor:function(t){return v=t,t},hideStdTooltip:function(){b.hide()},tooltipAttr:y,addExplanation:n,markWrong:function(t,e){if(t&&(t.classList.add("wrong_input"),!t.rooflineExplanation)){var o=n(t,e);t.rooflineExplanation=o}},markNormal:function(t){t&&(t.classList.remove("wrong_input"),t.rooflineExplanation&&(document.body.removeChild(t.rooflineExplanation),delete t.rooflineExplanation))},setPopup:C,addPopupNavigation:l,addColorPicker:c,toast:d,filterNumberInput:u},i(g,"tooltipAttr",y),i(g,"flashElement",f),i(g,"addExpansion",h),i(g,"setAnimatedClick",p),i(g,"updatePopupPos",function(e,o){if(o&&o.offsetParent){var i=t.getElementPos(o),n=t.getElementPos(e);i.x+i.width>window.innerWidth&&(o.style.left=window.innerWidth-n.x-i.width-1+"px"),i.x+i.width<n.x+n.width&&(o.style.left=n.width-i.width-1+"px")}}),i(g,"updatePopupWidth",function(t,e){e&&e.offsetParent&&t&&e.offsetWidth<t.offsetWidth&&(e.style.minWidth=t.offsetWidth+1+"px")}),i(g,"getChartAreaPadding",function(){return.05}),i(g,"createLineArrowMarker",m),g}.apply(e,n),n=[],d=function(){function t(t,e){var n=o[t];if(n&&n.process)try{n.process(function(t){return"string"==typeof t?new Function("return "+t)():t}(e))}catch(t){i={message:t.message,stack:t.stack,data:e},n.onerror&&n.onerror(t,e),console.error(t)}else"executeScript"===t&&new Function(e)()}var e,o={},i=null;!function(){var o=document.createElement("div");o.style.display="none",o.id="idvc_global_request",o.onclick=function(){var e=o.getAttribute("data-consumer-id");e&&t(e,o.getAttribute("data-consumer-data")),o.setAttribute("data-consumer-id",""),o.setAttribute("data-consumer-data","")},document.body.appendChild(o),e=document.createElement("a"),e.style.display="none",document.body.appendChild(e)}();var n={addConsumer:function(t,e){o[t]=e},receiveData:t,sendNotification:function(t){e&&t&&(window.idvcGlobalSender?window.idvcGlobalSender.sendNotification(t):(e.setAttribute("href","callbackdata:"+t),e.click()))},getLastError:function(){return i},clearLastError:function(){i=null},getLastErrorMessage:function(){function t(t){return t?t+"\n":""}return i?t(i.message)+t(i.stack)+t(i.data):""},isRequestClick:function(t){return t&&(t===e||"idvc_global_request"===t.id)}};return window.idvcGlobalRequest=n,n}.apply(e,n),n=[s,d],u=function(t,e){function o(t,e,i,n){t=t||[],n=n||document.body,e=e||function(){},i=i||function(){};var r=n.childNodes;r&&[].forEach.call(r,function(n){if("svg"!==n.nodeName)switch(n.nodeType){case 1:t.forEach(function(t){e(n,t)}),o(t,e,i,n);break;case 3:i(n)}})}function i(e,i){i=t.getDomElement(i)||document.body,o(e,r,a,i),d()}function n(t){var e=m.exec(t);if(e&&e.length>1)return e[1]}function r(t,e){var o=n(t.getAttribute(e));if(o){var i=f.get(o);i?s(t,e,i):h.set(o,s.bind(window,t,e))}}function a(t){var e=n(t.nodeValue);if(e){var o=f.get(e);o?l(t,o):h.set(e,l.bind(window,t))}}function s(t,e,o){t.setAttribute(e,o)}function l(t,e){t.nodeValue=e}function c(t){t&&(Array.isArray(t)||(t=[t]),t.forEach(function(t){if(t&&t.id){var e=p.get(t.id);e&&(e(t.message),p.delete(t.id)),f.set(t.id,t.message)}}))}function d(){var t="i18n-";h.forEach(function(e,o){t+=o+",",p.set(o,e)}),h.clear(),e.sendNotification(t)}function u(t){e.sendNotification("i18n-"+t)}var f=new Map,h=new Map,p=new Map,m=/^%(\w+)%/;return e.addConsumer("i18n",{process:c}),{processElement:i,processId:function(t,e){var o=f.get(t);o?e(o):(p.set(t,e),u(t))},addMessage:function(t,e){f.set(t,e)},getMessage:function(t){return f.get(t)||""}}}.apply(e,n),n=[],f=function(){function t(t){this._roofsMap=t||{},this._strategyId=void 0,this._threadCount=void 0,this._packageCount=0,this._allRoofsLoaded=!1}function e(t,e){if(t=t||this._threadCount,e=e||this._packageCount,!t)return 0;(!e||e<=0)&&(e=0);var o=parseFloat(t+"."+e);return o||0}function o(t){return Math.floor(t)}function i(t){return t%1}return t.prototype.add=function(t,o,i,n){t&&(o=o||this._threadCount,i=i||this._strategyId,n=n||this._packageCount,this._roofsMap[i]||(this._roofsMap[i]={}),this._roofsMap[i][e(o,n)]=t)},t.prototype.get=function(t,o,i){if(t=t||this._threadCount,o=o||this._strategyId,i=i||this._packageCount,!this._roofsMap[o])return null;var n=e(t,i);return this._roofsMap[o][n]?this._roofsMap[o][n]:null},t.prototype.removeIfEmpty=function(t,o,i){var n=this.get(t,o,i);n&&("object"!==(void 0===n?"undefined":X(n))||Object.keys(n).length||delete this._roofsMap[o][e(t,i)]),this._roofsMap[o]&&(Object.keys(this._roofsMap[o]).length||delete this._roofsMap[o])},t.prototype.forEach=function(t){for(var e in this._roofsMap)for(var n in this._roofsMap[e]){var r=this._roofsMap[e][n];threadCount=o(n),packageCount=i(n);for(var a in r)t(r[a],threadCount,e,packageCount)}},t.prototype.clear=function(){this._roofsMap={},this._strategyId=void 0,this._threadCount=void 0,this._allRoofsLoaded=!1,this._packageCount=void 0},t.prototype.empty=function(){return!Object.keys(this._roofsMap).length},t.prototype.setStrategyId=function(t){t&&(this._strategyId=t)},t.prototype.getStrategyId=function(){return this._strategyId},t.prototype.setThreadCount=function(t){t&&(this._threadCount=t)},t.prototype.getThreadCount=function(t){return this._threadCount},t.prototype.setAllRoofsLoaded=function(t){this._allRoofsLoaded=t},t.prototype.areAllRoofsLoaded=function(){return this._allRoofsLoaded},t.prototype.setPackageCount=function(t){this._packageCount=t||0},t.prototype.getPackageCount=function(){return this._packageCount},{create:function(e){return new t(e)}}}.apply(e,n),n=[s,u,f],h=function(t,e,o){function i(t){return t&&t.resultInfo?t.resultInfo.path||t.resultInfo.caption.toLowerCase():""}function n(){return X?"-":"+"}function r(){return X?"+":"-"}function a(t){if(t){var e=[];return t.forEach(function(t,o){t&&t.state===r()&&e.push({i:o,n:t.name})}),e}}function s(t){function e(t,e){return t.name===e.n}A&&(A.forEach(function(o){if(o){var i=t[o.i];i&&e(i,o)&&i.state===n()&&(i.state=r())}}),A=void 0)}function l(t,e){function o(t){r=Math.min(r,t),a=Math.max(a,t)}function i(t){s=Math.min(s,t),l=Math.max(l,t)}if(t&&Array.isArray(t.loops)){if(e&&!t.wholeMinMax&&void 0!==t.minX&&void 0!==t.maxX&&void 0!==t.minY&&void 0!==t.maxY){var n={minX:t.minX,maxX:t.maxX,minY:t.minY,maxY:t.maxY};t.wholeMinMax=n}if(t.loops.length){var r=Number.MAX_VALUE,a=-Number.MAX_VALUE,s=Number.MAX_VALUE,l=-Number.MAX_VALUE;if(t.loops.forEach(function(t){void 0!==t.x&&void 0!==t.y&&(o(t.x),i(t.y)),void 0!==t.x1&&void 0!==t.y1&&(o(t.x1),i(t.y1))}),t.minX=r,t.maxX=a,t.minY=s,t.maxY=l,e&&!t.fitMinMax&&void 0!==t.minX&&void 0!==t.maxX&&void 0!==t.minY&&void 0!==t.maxY){var c={minX:t.minX,maxX:t.maxX,minY:t.minY,maxY:t.maxY};t.fitMinMax=c}}else t.minX=t.maxX=t.minY=t.maxY=void 0}}function c(t,e){t&&t.forEach(function(t){e(t,void 0)})}function d(t,e,o,i){function n(t,o,i){if(t){var n=!o;t.forEach(function(t){var s;(s="number"==typeof t?a[t]:t)&&(n&&void 0!==s.parent||(e(s,o,i),r.push({loop:s,isHidden:i})))})}}if(t&&D&&D.loops){var r=[],a=D.loops;if(!i&&X&&!O.items.length)n([t[0]],void 0,!1);else{var s=!!i&&"-"!==i.state;n(t,i,s)}for(var l=0;l<r.length;l++){var c=r[l];s=c.isHidden||"-"!==c.loop.state,!o&&s||n(c.loop.children,c.loop,s)}}}function u(){B=t.createAsyncCall(window.saveLocalProperty.bind(window,"hierarchy"),window,1e4)}function f(t){t&&t.sort(function(t,e){var o=0;return t.isMem&&!e.isMem?o=-1:!t.isMem&&e.isMem&&(o=1),o||(o=e.val-t.val),o})}function h(t){return!t||(t.state&&"+"!==t.state||!t.state)&&(void 0===t.x||void 0===t.y)}function p(t,e){return t?(void 0===e&&(e=h(t)),{x:(e||"+"===t.state?t.x1:t.x)||t.x,y:(e||"+"===t.state?t.y1:t.y)||t.y}):{}}function m(t,e,o){if(!t||!e)return!1;var i=p(t),n=p(e);return Math.abs(i.x1-n.x1)<=o.x&&Math.abs(i.y1-n.y1)<=o.y}function g(t){if(t>=0)return D.loops[t]}function v(t,e){if(t&&e&&(void 0!==t.parent&&(t.parent+=e),t.children))for(var o=0,i=t.children.length;o<i;o++)t.children[o]+=e}function _(t,e,o,i){if(t&&i){for(var n=e,r=O.items.length;n<r;n++)O.items[n].resultInfo.baseIndex+=i;for(n=o,r=t.loops.length;n<r;n++)v(t.loops[n],i)}}function y(){O.items.length||(D.resultInfo?(D.resultInfo.baseIndex=0,D.resultInfo.loopCount=D.loops.length):D.resultInfo={caption:e.getMessage("roofline_compare_current_result_label"),id:"cr",baseIndex:0,loopCount:D.loops.length},D.resultInfo.id=D.resultInfo.id||N(),O.items.push(D))}function b(t){t&&t.length&&(O.items.length||y(),t.forEach(function(t){t&&t.resultInfo&&(t.resultInfo.pointConstructor=Y.use()),O.items.push(t)}))}function x(t,e){if(t&&t.loops&&t.resultInfo){O.items.length||y();var o=O.getIndexByPath(t.resultInfo.path);if(o>=0&&(e=O.items[o].resultInfo.baseIndex),e){var i=o>=0?o:O.items.length;t.loops.forEach(function(t){t.resIndex=i,v(t,e)}),t.resultInfo.baseIndex=e,t.resultInfo.loopCount=t.loops.length,t.resultInfo.id=t.resultInfo.id||N(),l(t);var n;return o>=0?(n=O.items[o],t.resultInfo.pointConstructor=n.resultInfo.pointConstructor,O.items[o]=t,n.replasedResultIndex=o):(t.resultInfo.pointConstructor=Y.use(),O.items.push(t)),n}}}function w(t){if(t){if(l(t,!0),O.items.length&&void 0!==O.originalLoopsCount){var e=t.loops.length,o=O.originalLoopsCount,i=e-o,n=O.items[0],r=[];D.loops.length>o&&(r=D.loops,r.splice(0,o)),n.resultInfo.loopCount=O.originalLoopsCount=e,r.length&&(t.loops=t.loops.concat(r)),_(t,1,e,i),n.loops&&delete n.loops}D=t,D.compareData&&(b(D.compareData),delete D.compareData),X=!!t.withCallstacks,f(H.get()),t.isFiltered&&k(t.loops)}}function C(t){return t.objId||t.id}function L(t){var e,o=C(t);if(t.resIndex){var n=O.getItem(t.resIndex);n&&(e=i(n))}return o+=e||t.resIndex||0}function S(t){d(t,function(t,e,o){t&&o&&(t.filtered=!0)})}function P(t,e,o){function i(t,e,o,i){function n(t,e){var o=L(t);return e.some(function(t){return t===o})}t&&e&&(o=o||F.out,t.forEach(function(t){o(n(t,e))&&(i?t.filtered?t.filtered++:t.filtered=1:(t.filtered||console.error("Filtering undo failed"),--t.filtered||delete t.filtered))}))}t&&o&&(i(t,o[W.in],F[W.in],e),i(t,o[W.out],F[W.out],e))}function k(t){S(t),V.forEach(P.bind(void 0,t,!0))}function R(t){if(D&&t&&t.loops&&t.resultInfo){var e=D.loops.length,o=x(t,e);if(t.isFiltered&&k(t.loops),o){var i=t.loops.length-o.resultInfo.loopCount,n=o.resultInfo.baseIndex+o.resultInfo.loopCount,r=D.loops.slice(0,o.resultInfo.baseIndex),a=D.loops.slice(n);D.loops=r.concat(t.loops,a),n+=i,_(D,o.replasedResultIndex+1,n,i),I(t.resultInfo.path)}else D.loops=D.loops.concat(t.loops);delete t.loops,O.originalLoopsCount||(O.originalLoopsCount=e)}}function T(t,e,o){t.matchingLoops&&t.matchingLoops.forEach(e,o||this)}function E(t,e){function o(t,e){t.compared?t.compared.add(e):t.compared=new Set([e])}function i(t){return!!(t.compared.size>=O.items.findIndex(function(e){return e===t})&&t.resultInfo)&&(delete t.resultInfo.comparing,!0)}var n=t.resultInfo&&t.resultInfo.path?t.resultInfo.path:"current";return o(t,e.resultInfo&&e.resultInfo.path?e.resultInfo.path:"current"),o(e,n),i(t)|i(e)}function M(t){var e=t.path1,o=t.path2,i="current"===e?0:O.getIndexByPath(e);if(!(i<0)){var n="current"===o?0:O.getIndexByPath(o);if(!(n<0)&&i!==n){var r=function(t,e){return!t&&!e||t===e},a=function(t,e,o){return C(t)===C(e)&&r(t.resIndex,o)};return t.comparison&&t.comparison.forEach(function(t){var s=D.loops.find(function(o){return a(o,t[e],i)});if(s){var l=D.loops.find(function(e){return a(e,t[o],n)});if(l){s.matchingLoops||(s.matchingLoops=[]),l.matchingLoops||(l.matchingLoops=[]);var c=s.matchingLoops.findIndex(function(t){return r(l.resIndex,t.resIndex)});s.matchingLoops.splice(c,c>-1?1:0,l);var d=l.matchingLoops.findIndex(function(t){return r(s.resIndex,t.resIndex)});l.matchingLoops.splice(d,d>-1?1:0,s)}}},this),E(O.items[i],O.items[n])}}}function z(t){T(t,function(e){if(e.matchingLoops){var o=e.matchingLoops.indexOf(t);o>-1&&e.matchingLoops.splice(o,1)}}),delete t.matchingLoops}function I(t){O.items.forEach(function(e){return e&&e.compared&&e.compared.delete(t)})}var A,D,B,X=!1,H=o.create(),V=[],Y=function(){var t,e;return{init:function(o){e=o,t=e.concat()},use:function(){if(t&&t.length){var e=t.shift();return t.push(e),e}},unUse:function(e){if(t&&t.length){var o=t.indexOf(e);o>0&&(t.splice(o,1),t.unshift(e))}},revert:function(){t=e.concat()}}}(),O={items:[],originalLoopsCount:0,clear:function(){this.items=[],this.originalLoopsCount=0,this.minMax&&delete this.minMax},getIndexByPath:function(t){var e=-1;return this.items.some(function(o,i){var n=o.resultInfo.path===t;return n&&(e=i),n}),e},getItem:function(t){return t<this.items.length&&t>=0?this.items[t]:void 0}},N=function(){var t=0;return function(e){return t++,(e=e||"id")+t}}(),W={in:"in",out:"out"},F={in:function(t){return!t},out:function(t){return t}};return{isNewData:function(t){return!!(!D||!t.resultInfo||t.resultInfo.isNew||!O.items.length&&t.resultInfo&&t.resultInfo.replase&&D.resultInfo&&t.resultInfo.id===D.resultInfo.id)},setRooflineData:function(t,e,o,i){t&&(this.isNewData(t)?(H.clear(),e&&o&&(H.setThreadCount(e),H.setStrategyId(o),H.setPackageCount(i),t.allRoofs?(t.allRoofs.forEach(function(t){H.add(t.roofs,t.threadCount,t.strategyId,t.packageCount)}),delete t.allRoofs):t.roofs&&t.roofs.length&&(H.add(t.roofs),delete t.roofs)),w(t)):R(t),O.minMax&&delete O.minMax)},updateComparisonResults:M,getRooflineData:function(){return D},getRooflineData4Loop:function(t){if(t)return t.resIndex?O.items[t.resIndex]:D},getMemoryLevelPrefix:function(t,e){return e=e||this.getRooflineData4Loop(t),t&&t.memoryLevelPref||(e&&e.memoryLevelPref?e.memoryLevelPref:"L1 ")},isHierarchical:function(){return X},isScalarRoof:function(t){return!(!t||!t.name)&&t.name.toLowerCase().indexOf("scalar")>=0},getProp:function(t){if(D)return D[t]},getTotalTime:function(t){return this._getTime("totalTime",t)},getMaxSelfTime:function(t){return this._getTime("maxSelfTime",t)},_getTime:function(t,e){var o=0;return e=e||0,D&&(o=e>0&&e<O.items.length?O.items[e][t]:D[t]),o||0},getMaxTotalTime:function(){return this._getMaxTime("totalTime")},getMaxMaxSelfTime:function(){return this._getMaxTime("maxSelfTime")},_getMaxTime:function(t){var e=0;if(D){e=D[t];var o=O.items.length;if(o>1)for(var i=1;i<o;i++)e=Math.max(O.items[i][t]||0,e)}return e},getLoops:function(){return D&&D.loops?D.loops:[]},getRoofs:function(t,e,o){return H.get(t,e,o)||[]},getParent:function(t,e){if(t&&D&&D.loops&&void 0!==t.parent){if(e)for(var o;(o=g(t.parent))&&m(t,o,e);)t=o;return g(t.parent)}},setHierarchicalData:function(t){A=t},addRoofs:function(t,e,o,i){t&&(f(t),H.add(t,e,o,i))},setRoofsStrategyId:function(t){H.setStrategyId(t)},getRoofsStrategyId:function(){return H.getStrategyId()},setThreadCount:function(t){H.setThreadCount(t)},getThreadCount:function(){return H.getThreadCount()},setPackageCount:function(t){H.setPackageCount(t)},getPackageCount:function(){return H.getPackageCount()},setAllRoofsLoaded:function(t){H.setAllRoofsLoaded(t)},areAllRoofsLoaded:function(){return H.areAllRoofsLoaded()},applySavedHierarchy:s,saveHierarchy:function(){D&&(B||u(),B.call(a(D.loops)))},isNoLoopPosition:h,getLoopPosition:p,forEachLoops:d,forEachLoopsSimple:c,forEachChildren:function(t,e,o){if(t&&t.children&&D&&D.loops){for(var i;o&&t.children&&1===t.children.length&&(i=g(t.children[0]))&&i.children&&i.children.length&&m(t,i,o);)t=i;t&&t.children&&t.children.forEach(function(t){var o=g(t);o&&e(o)})}},forEachChildrenEx:function(t,e,o){t&&this.forEachLoops(t.children,e,o,t)},forEachRoofs:function(t){this.getRoofs().forEach(t)},forEachAllRoofs:function(t){H.forEach(t)},isResultEmpty:function(t){var e=O.items[t];return!(e&&0!==e.resultInfo.loopCount)},getResultCount:function(){return O.items.length},getResultCaption:function(t){var e=O.items[t];if(e&&e.resultInfo)return e.resultInfo.caption},getResultInfo:function(t){var e=O.items[t];return e&&e.resultInfo},setExtraData:function(t,e,o){function i(o){o&&(o.extraData||(o.extraData={}),o.extraData[t]=e)}i(o?O.items[o]:D)},getExtraData:function(t,e){function o(e){if(e&&e.extraData)return e.extraData[t]}return o(e?O.items[e]:D)},removeResult:function(t){if(!(t<=0)){var e=O.items[t];if(e&&e.resultInfo){Y.unUse(e.resultInfo.pointConstructor);for(var o=e.resultInfo.loopCount,i=e.resultInfo.baseIndex,n=i;n<i+o;++n)z(D.loops[n]);D.loops.splice(i,o),I(e.resultInfo.path),O.items.splice(t,1),o>0&&_(D,t,i,-o);for(var n=i,r=D.loops.length;n<r;n++){var a=D.loops[n];a.resIndex&&(a.resIndex-=1)}O.items.length<=1&&(O.clear(),Y.revert())}}},removeResultByPath:function(t){if(!t)return!1;var e=O.getIndexByPath(t);return this.removeResult(e),e>=1},clearCompareData:function(){var t=D.loops.length-O.originalLoopsCount;D.loops.splice(O.originalLoopsCount,t),D.loops.forEach(function(t){z(t)}),O.clear(),Y.revert()},getCompareData:function(){for(var e=[],o=1,i=O.items.length;o<i;o++){var n={};t.copyObject(O.items[o],n,function(t,e){return 0!==e.indexOf("roof")&&"compareItem"!==e}),e.push(n)}return e},forEachMatchingLoops:T,getMinMax:function(){var t=[{name:"minX",fn:Math.min},{name:"minY",fn:Math.min},{name:"maxX",fn:Math.max},{name:"maxY",fn:Math.max}];if(!O.minMax){var e={minX:0,minY:0,maxX:0,maxY:0};D&&t.forEach(function(t){e[t.name]=D[t.name]});var o=O.items.length;if(o>1)for(var i=1;i<o;i++){var n=O.items[i];t.forEach(function(t){var o=n[t.name];void 0!==o&&(e[t.name]=t.fn(o,e[t.name]))})}O.minMax=e}return O.minMax},getViewFrame:function(){var t={minIntens:0,minPerf:0,maxIntens:0,maxPerf:0};return D&&(t.minIntens=D.minIntens,t.minPerf=D.minPerf,t.maxIntens=D.maxIntens,t.maxPerf=D.maxPerf),t},FilterOperation:W,clearFiltering:function(){var t=V;return V=[],this.forEachLoopsSimple(this.getLoops(),function(t){t.filtered&&delete t.filtered}),t},isFiltered:function(){return!!V.length},addFilterInfo:function(t){t&&(Array.isArray(t)||(t=[t]),V.length||S(this.getLoops()),t.forEach(P.bind(void 0,this.getLoops(),!0)),V=V.concat(t))},remFilterInfo:function(t){t&&(Array.isArray(t)||(t=[t]),V.length===t.length&&V.every(function(e,o){return e===t[o]})?this.clearFiltering():t.forEach(function(t){var e=V.indexOf(t);e>=0&&(P(this.getLoops(),!1,t),V.splice(e,1))}.bind(this)))},getLoopId:L,setPointConstructors:function(t){Y.init(t)},getPointConstructor:function(t){var e;if(t>0){var o=O.items[t];o&&o.resultInfo&&(e=o.resultInfo.pointConstructor)}return e},setWholeView:function(t){var e;(e=t?D.wholeMinMax:D.fitMinMax)&&(D.minX=e.minX,D.maxX=e.maxX,D.minY=e.minY,D.maxY=e.maxY,delete O.minMax)}}}.apply(e,n),n=[],p=function(){function t(){this._subscribers=[]}return t.prototype.find=function(t,e){for(var o=0,i=this._subscribers.length;o<i;o++)if(t===this._subscribers[o].obj&&(e===this._subscribers[o].funct||void 0===e&&void 0===this._subscribers[o].funct))return o;return-1},t.prototype.subscribe=function(t,e){this.find(t,e)<0&&this._subscribers.push({obj:t,funct:e})},t.prototype.unsubscribe=function(t,e){var o=this.find(t,e);o>=0&&this._subscribers.splice(o,1)},t.prototype.unsubscribeAll=function(t){for(var e=this._subscribers.length-1;e>=0;e--)t===this._subscribers[e].obj&&this._subscribers.splice(e,1)},t.prototype.raise=function(){for(var t=0;t<this._subscribers.length;t++){var e=this._subscribers[t].obj||window;this._subscribers[t].funct?this._subscribers[t].funct.apply(e,arguments):e.raise&&e.raise.apply(e,arguments)}},t.prototype.clear=function(){this._subscribers.length=0},{create:function(){return new t}}}.apply(e,n),n=[l,c,h,p],m=function(t,e,o,i){function n(){function t(t){return!t||void 0!==t.minX&&void 0!==t.minY&&void 0!==t.maxX&&void 0!==t.maxY}function e(t,e){if(a||(a={}),a.frames||(a.frames=[]),void 0===a.zoomIndex&&(a.zoomIndex=-1),void 0===a.index?a.index=-1:a.index<a.frames.length-1&&a.frames.splice(a.index+1),a.frames.push(t),a.index++,e&&(a.zoomIndex=a.index),a.frames.length>s){var o=Math.round(s/2);a.frames.splice(0,o),a.index-=o,a.zoomIndex-=o}}function n(t,e,o){t=t||2,o=o||function(t){return t};var i=this.getMinMax(),n=i.maxX-i.minX,r=i.maxY-i.minY;e=e||{x:i.minX+n/2,y:i.minY+r/2};e.x<=i.minX&&(e.x=i.minX+.05*n),e.x>=i.maxX&&(e.x=i.maxX-.05*n),e.y<=i.minY&&(e.y=i.minY+.05*r),e.y>=i.maxY&&(e.y=i.maxY-.05*r);var a=e.x-i.minX,s=i.maxX-e.x,l=e.y-i.minY,c=i.maxY-e.y;return i.minX=e.x-o(a,t),i.maxX=e.x+o(s,t),i.minY=e.y-o(l,t),i.maxY=e.y+o(c,t),this.setZoom(i)}function r(t){if(t){var e=o.getRooflineData(),i=0;t.minX-1e-7<e.minIntens&&(t.minX=e.minIntens,i++),t.maxX+1e-7>e.maxIntens&&(t.maxX=e.maxIntens,i++),t.minY-1e-7<e.minPerf&&(t.minY=e.minPerf,i++),t.maxY+1e-7>e.maxPerf&&(t.maxY=e.maxPerf,i++),4===i&&(t.isNoZoom=!0),(t.maxX<=t.minX||t.maxY<=t.minY)&&(t.isWrongZoom=!0)}return t}var a={},s=200;return{zoomChanged:i.create(),undoListChanged:i.create(),zoomIn:function(t,e){return n.call(this,t,e,function(t,e){return t/e})},zoomOut:function(t,e){if(this.getCurrentZoom())return n.call(this,t,e,function(t,e){return t*e})},setZoom:function(t,o){var i=!1;if(t=r(t),!t.isWrongZoom){var n=this.getCurrentZoom();if(!n||n.minX!=t.minX||n.maxX!=t.maxX||n.minY!=t.minY||n.maxY!=t.maxY){Math.abs(t.maxX-t.minX)>.02&&Math.abs(t.maxX-t.minX)>.02&&(e(t,!0),this._notifyChangeZoomState(o),i=!0)}return i}},addUndoFrame:function(t){e(t),this._notifyChangeUndoList()},getCurrentZoom:function(){var t;return a&&a.frames&&void 0!==a.zoomIndex&&a.zoomIndex>=0&&(t=r(a.frames[a.zoomIndex]))&&t.isNoZoom&&(t=void 0),t},undoZoom:function(){a&&a.frames&&a.index>=0&&(this._checkCurrentFrame(),a.index--,this._notifyChangeUndoList(),this._updateZoomFrame(!0))},redoZoom:function(){a&&a.frames&&a.index<a.frames.length-1&&(a.index++,this._checkCurrentFrame(),this._notifyChangeUndoList(),this._updateZoomFrame())},cancelZoom:function(){if(a&&a.frames){var t=o.getRooflineData();this.setZoom({minX:t.minIntens,maxX:t.maxIntens,minY:t.minPerf,maxY:t.maxPerf})}},getZoomState:function(){var t=!1,e=!1,o=!1;if(a&&(t=a.index>=0,a.frames)){e=a.index<a.frames.length-1;var i=this.getCurrentZoom();i=r(i),o=i&&!i.isNoZoom}return{undo:t,redo:e,cancel:o}},getMinMax:function(t){var e=o.getViewFrame(),i=o.getMinMax(),n=(t?0:e.minIntens)||i.minX,r=(t?0:e.maxIntens)||i.maxX,a=(t?0:e.minPerf)||i.minY,s=(t?0:e.maxPerf)||i.maxY,l=this.getCurrentZoom();return l&&(n=l.minX,r=l.maxX,a=l.minY,s=l.maxY),{minX:n,maxX:r,minY:a,maxY:s}},saveMinMax:function(t){(t=t||o.getRooflineData())&&void 0!==t.minIntens&&void 0!==t.maxIntens&&void 0!==t.minPerf&&void 0!==t.maxPerf&&(this.minMaxFrame={minX:t.minIntens,maxX:t.maxIntens,minY:t.minPerf,maxY:t.maxPerf})},moveCurrentZoomFrame:function(t,e){var o,i=this.getCurrentZoom();return i&&(o={minX:i.minX+t,maxX:i.maxX+t,minY:i.minY+e,maxY:i.maxY+e},o=r(o)),o},clearDataUndo:function(){if(a&&a.frames)for(var e=a.frames.length-1;e>=0;e--)t(a.frames[e])||(a.frames.splice(e,1),void 0!==a.zoomIndex&&a.zoomIndex>=e&&a.zoomIndex--,void 0!==a.index&&a.index>=e&&a.index--)},_checkCurrentFrame:function(){if(a){var t=a.frames[a.index];t&&t.process&&t.process()}},_updateZoomFrame:function(e){if(a){var o,i=a.frames[a.index];if(t(i))o=a.index;else if(e&&a.zoomIndex>a.index)for(o=a.index-1,i=a.frames[o];!t(i);)o--,i=a.frames[o];void 0!==o&&a.zoomIndex!==o&&(a.zoomIndex=o,this._notifyChangeZoomState())}},_notifyChangeZoomState:function(t){this.zoomChanged.raise(t)},_notifyChangeUndoList:function(){this.undoListChanged.raise()}}}var r,a={init:function(){if(!this.maxPerfEdit){this.maxPerfEdit=document.getElementById("frame_max_perf"),this.maxPerfEdit.onblur=this._checkValue.bind(this,"maxY"),this.minPerfEdit=document.getElementById("frame_min_perf"),this.minPerfEdit.onblur=this._checkValue.bind(this,"minY"),this.maxIntensEdit=document.getElementById("frame_max_intens"),this.maxIntensEdit.onblur=this._checkValue.bind(this,"maxX"),this.minIntensEdit=document.getElementById("frame_min_intens"),this.minIntensEdit.onblur=this._checkValue.bind(this,"minX"),this.maxPerfEdit.onkeypress=this.minPerfEdit.onkeypress=this.maxIntensEdit.onkeypress=this.minIntensEdit.onkeypress=e.filterNumberInput;document.getElementById("frame_apply_btn").onclick=this.apply.bind(this);document.getElementById("frame_cancel_btn").onclick=this.close.bind(this)}var t=this._getEditableFrame();this.maxPerfEdit.value=t.maxY,this.minPerfEdit.value=t.minY,this.maxIntensEdit.value=t.maxX,this.minIntensEdit.value=t.minX},apply:function(){var e=this._getEditableFrame();e.minX.toString()===this.minIntensEdit.value&&e.maxX.toString()===this.maxIntensEdit.value&&e.minY.toString()===this.minPerfEdit.value&&e.maxY.toString()===this.maxPerfEdit.value||r.setZoom({maxY:t.log10(this.maxPerfEdit.value),minY:t.log10(this.minPerfEdit.value),maxX:t.log10(this.maxIntensEdit.value),minX:t.log10(this.minIntensEdit.value)}),this.close()},close:function(){s.classList.remove("expanded")},_checkValue:function(e,o){var i=o.target,n=i.value;if(isNaN(n)||!n){var a=r.getMinMax();i.value=t.formatVal(a[e],4,!0)}},_getEditableFrame:function(){var e=r.getMinMax();return{maxY:t.formatVal(e.maxY,4,!0),minY:t.formatVal(e.minY,4,!0),maxX:t.formatVal(e.maxX,4,!0),minX:t.formatVal(e.minX,4,!0)}}},s=document.getElementById("roofline_frame_settings");return s.onclick=function(){!s.classList.contains("expanded")&&r&&(a.init(),s.classList.add("expanded"))},{get:function(){return r||(r=n()),r}}}.apply(e,n),n=[s,p],g=function(t,e){function o(t,e){return{get:function(){var o=c.getState();return e?!!o[t]:!1!==o[t]},set:function(e){var o=c.getState();o[t]!==e&&(o[t]=e,c.save(t))}}}function i(t,e,o){t&&t.doProcessing&&e&&e(o)}function n(e,o,n,r,a){var s=t.getDomElement(e);s&&(a=a||function(t){return t},s.onchange=function(t){c.save(o),n&&n(t.target.checked)},c.addProcessor(o,{apply:function(t,e){if(t){var l=a(!0),c=a(!1);s.checked=r?t[o]===l:t[o]!==c,i(e,n,s.checked)}},saveState:function(t){t[o]=a(s.checked)}}))}function r(e,o,n,r,a){var s=t.getDomElement(e);s&&(a=a||function(t){return t},s.onchange=function(t){c.save(o),n&&n(t.target.selectedIndex)},c.addProcessor(o,{apply:function(t,e){if(t){var l=r,c=t[o];if(void 0!==c){var d=a(c);if(c===d)l=d;else for(var u=0,f=s.length;u<f;u++)if(c===a(u)){l=u;break}}s.selectedIndex=l,i(e,n,s.selectedIndex)}},saveState:function(t){t[o]=a(s.selectedIndex)}}))}function s(e,o,n,r,a){var s=t.getDomElement(e);s&&(s.oninput=function(t){n&&n(t.target.value)&&c.save(o),r&&r(t.target.value)},c.addProcessor(o,{apply:function(t,e){if(t){var n=a,l=t[o];void 0!==l&&(n=l),s.value=n,i(e,r,s.value)}},saveState:function(t){var e=t[o],i=s.value;i!==e&&(i&&i!==a?t[o]=i:e&&delete t[o])}}))}function l(e,o,n,r){function a(t){return s.querySelector('input[value="'+t+'"]')}var s=t.getDomElement(e);if(s){var l=r;s.onchange=function(t){t&&t.target&&(l=t.target.value,c.save(o),n&&n(l))},c.addProcessor(o,{apply:function(t,e){if(t){var r=t[o];r&&(l=r);var s=a(l);s&&(s.checked=!0),i(e,n,l)}},saveState:function(t){l!==r?t[o]=l:delete t[o]}})}}var c=function(){function e(){n&&n("rooflineState-"+JSON.stringify(l))}function o(t){Object.getOwnPropertyNames(r).forEach(function(e){var o=r[e];o&&t&&t(o)})}var i,n,r={},s=!1,l={};return{init:function(t,e){n=e,new Promise(function(t){t()}).then(function(){var e=[a];(function(){window.rooflineState&&(l=window.rooflineState,delete window.rooflineState),t()}).apply(null,e)}).catch(t.bind(this))},disableSaving:function(){s=!0},enableSaving:function(){s=!1},apply:function(e,i){if(e&&t.applyObjectProperties(l,e),l){var n=[].slice.call(arguments,2),a=function(t){t&&t.apply&&this._callProcessor(t,t.apply,l,n)}.bind(this);i?a(r[i]):o(a)}},save:function(o){if(!s){if(o){var n=r[o];if(n&&n.saveState){var a=[].slice.call(arguments,1);this._callProcessor(n,n.saveState,this.getState(),a)}}d.onChangeSettings.raise(o),i||(i=t.createAsyncCall(e,void 0,2e3)),i.call()}},changeSetting:function(t,e,o){this.getState()[t]=e,this.apply(void 0,t,o?{doProcessing:!0}:void 0)},onClose:function(){i&&i.isCalled()&&(i.cancel(),e())},getState:function(e){var i=!!e;if(e=e||l||{},i){t.copyObject(l,e);var n=[].slice.call(arguments,1);o(function(t){t&&t.saveState&&this._callProcessor(t,t.saveState,e,n)}.bind(this))}return e},addProcessor:function(t,e){return e&&(r[t]=e),e},_callProcessor:function(t,e,o,i){e&&t&&(i=i||[],e.apply(t,[o].concat(i)))}}}(),d={onChangeSettings:e.create(),get:function(){return c},addBoolSetting:o,addCheckSetting:n,addComboSetting:r,addTextSetting:s,addRadioGroupSetting:l};return d}.apply(e,n),n=[s],v=function(t){function e(e,r,a){e=e||[],n=!0,o.forEach(function(t){t.process(e)});var l=t.getElementById(i);l||(l=s.createMenu()),t.removeAllChildren(l),e.forEach(function(t){l.appendChild(s.createMenuItem(t))}),s.showMenu(l,r,a)}var o=[],i="defContextMenu",n=!1,r={createMenu:function(){return menu=document.createElement("menu"),menu.setAttribute("id",i),menu.setAttribute("type","context"),menu.style.display="none",t.getElementById("roofline_content").setAttribute("contextmenu",i),document.body.appendChild(menu),menu},createMenuItem:function(t){var e;return"-"!==t.caption?(e=document.createElement("menuitem"),e.setAttribute("label",t.caption),e.onclick=t.command,t.disabled&&e.setAttribute("disabled","")):e=document.createElement("hr"),e},showMenu:function(t,e,o){}},a={shownMenu:void 0,createMenu:function(){return menu=t.createElement("","idvc_context_menu","",document.body,"div"),menu.style.display="none",menu},createMenuItem:function(e){var o;return"-"!==e.caption?(o=t.createElement(e.caption,"idvc_context_menu_item","",void 0,"div"),e.disabled&&o.classList.add("disabled"),o.onclick=this._processClick.bind(this,e.command)):o=t.createElement("","idvc_context_menu_separator","",void 0,"div"),o},showMenu:function(t,e,o){this.shownMenu&&(this.shownMenu.style.display="none"),this.shownMenu=t,t.style.display="block",this._setMenuPos(t,e,o),document.addEventListener("click",a._documentClick,!1)},defMenuProcessing:function(t){t.stopPropagation(),t.preventDefault()},_processClick:function(t,e){e.target&&e.target.classList.contains("disabled")?(e.stopPropagation(),e.preventDefault()):setTimeout(t,0)},_documentClick:function(t){0===t.button&&a._hideMenu()},_hideMenu:function(){this.shownMenu&&(this.shownMenu.style.display="none",this.shownMenu=void 0,document.removeEventListener("click",this._documentClick,!1))},_setMenuPos:function(t,e,o){e<0?e=0:e+t.offsetWidth>window.innerWidth+window.scrollX&&(e=window.innerWidth+window.scrollX-t.offsetWidth),o<0&&(o=0),o+t.offsetHeight>window.innerHeight+window.scrollY&&(o=window.innerHeight+window.scrollY-t.offsetHeight),t.style.left=e+"px",t.style.top=o+"px"}},s=r;"moz"!==t.Consts.engine&&(s=a),document.addEventListener("contextmenu",function(t){n||l.clear(),n=!1},!1);var l={show:e,addProcessor:function(t){o.push(t)},clear:function(){var e=t.getElementById(i);e&&t.removeAllChildren(e)},defProcessing:function(t){s&&s.defMenuProcessing&&s.defMenuProcessing(t)}};return l}.apply(e,n),n=[s],_=function(t){function e(t){this.el=document.createElementNS(R,t),this.el.owner=this}function o(t){e.call(this,t)}function i(){e.call(this,"filter")}function n(t){e.call(this,t)}function r(){n.call(this,"linearGradient")}function a(){n.call(this,"radialGradient")}function s(){e.call(this,"path"),this.segs=[]}function l(){e.call(this,"rect")}function c(){e.call(this,"image")}function d(){e.call(this,"line")}function u(){e.call(this,"circle")}function f(){e.call(this,"ellipse")}function h(t){return t.join(" ")}function p(t){var e=[];return t&&(e=t.split(" ").map(function(t){return t.split(",").map(function(t){return parseFloat(t)})})),e}function m(){e.call(this,"polyline")}function g(){e.call(this,"polygon")}function v(t,o){o=o||"text",e.call(this,o),void 0!==t&&this.setText(t)}function _(){e.call(this,"use")}function y(t){e.call(this,t)}function b(){y.call(this,"defs")}function x(){y.call(this,"clipPath")}function w(){y.call(this,"pattern")}function C(t){y.call(this,t)}function L(){C.call(this,"marker")}function S(t){C.call(this,"svg"),this.id=T(),this.setId(this.id),t&&(this._simpleCTM=!0),this.setAttr("preserveAspectRatio","none")}function P(t,e,o){var i;return this._simpleCTM?(i=this[e])||(this[e]=i=t[o]()):i=t[o](),i}function k(t,e){return t=t||"idvc_canvas",new S(e).setClass(t)}var R="http://www.w3.org/2000/svg",T=function(){var t=0;return function(){return"SVG_"+t+++"_"}}();return e.prototype.activate=function(){return this.el.classList.add("idvc_active"),this},e.prototype.deactivate=function(){return this.el.classList.remove("idvc_active"),this},e.prototype.hide=function(){return this.el.classList.add("idvc_hidden"),this},e.prototype.isHidden=function(){return this.el.classList.contains("idvc_hidden")},e.prototype.show=function(){return this.el.classList.remove("idvc_hidden"),this},e.prototype.getAttr=function(t,e){e=e||null;var o;return t&&(o=this.el.getAttributeNS(e,t)),o},e.prototype.setAttr=function(t,e,o){return o=o||null,t&&void 0!==e&&this.el.setAttributeNS(o,t,e),this},e.prototype.remAttr=function(t,e){return e=e||null,t&&this.el.removeAttributeNS(e,t),this},e.prototype.setRef=function(t){return this.setAttr("href",t,"http://www.w3.org/1999/xlink")},e.prototype.remRef=function(){return this.remAttr("href","http://www.w3.org/1999/xlink")},e.prototype.setClass=function(t){return t=t||"",this.setAttr("class",t)},e.prototype.addClass=function(t){return this.el.classList.add(t),this},e.prototype.remClass=function(t){return this.el.classList.remove(t),this},e.prototype.hasClass=function(t){return this.el.classList.contains(t)},e.prototype.toggleClass=function(t){return this.el.classList.toggle(t),this},e.prototype.getStyle=function(){return this.getAttr("style")},e.prototype.setStyle=function(t){return this.setAttr("style",t)},e.prototype.style=function(t,e){return this.el.style[t]=e,this},e.prototype.setId=function(t){return this.setAttr("id",this.getLocalId(t))},e.prototype.getLocalId=function(t){if(t){var e=this.getCanvas();return e?e.getLocalId(t):t}},e.prototype.getElementById=function(t){if(t){var e=this.getCanvas();return e?e.getElementById(t):void 0}},e.prototype.localRef=function(t){return"#"+this.getLocalId(t)},e.prototype.localUrl=function(t){return"url("+this.localRef(t)+")"},e.prototype.setTransform=function(t){return this.setAttr("transform",t)},e.prototype.setTitle=function(t){for(var e=this.el;e.hasChildNodes();)e.removeChild(e.lastChild);var o=document.createElementNS(R,"title");o.textContent=t,e.appendChild(o)},e.prototype.getCanvas=function(){var t=this.el.ownerSVGElement;if(t)return t.owner},e.prototype.getViewport=function(){var t=this.el.viewportElement;if(t)return t.owner},e.prototype.getParent=function(){var t=this.el.parentNode;if(t)return t.owner},e.prototype.createAnimation=function(t,e){var i=new o(t);return this.el.appendChild(i.el),i.setId(e),i},e.prototype.setFilter=function(t){return this.setAttr("filter",this.localUrl(t)),this},e.prototype.remFilter=function(t){return this.remAttr("filter"),this},e.prototype.getBoundingRect=function(){var t;try{t=this.el.getBBox()}catch(e){t=new DOMRect(0,0,0,0)}return t},e.prototype.remove=function(){var t=this.el.parentNode;return t&&t.removeChild(this.el),this},e.prototype.release=function(){return delete this.el.owner,this},e.prototype.front=function(){var t=this.getParent();return t&&t.toFront(this),this},e.prototype.back=function(){var t=this.getParent();return t&&t.toBack(this),this},e.prototype.before=function(t){var e=this.getParent();return e&&e.beforeElement(this,t),this},e.prototype.after=function(t){var e=this.getParent();return e&&e.afterElement(this,t),this},e.prototype.on=function(t,e,o){return void 0===o&&(o=!1),this.el.addEventListener(t,e,o),this},e.prototype.off=function(t,e,o){return void 0===o&&(o=!1),this.el.removeEventListener(t,e,o),this},e.prototype.createTransform=function(){var t=this.el.ownerSVGElement,e=this.el.scaleIndependentXForm=t.createSVGTransform();return this.el.transform.baseVal.clear(),this.el.transform.baseVal.appendItem(e),e},o.prototype=Object.create(e.prototype),o.prototype.setPath=function(t){var o=new e("mpath");return this.el.appendChild(o.el),o.setRef(this.localRef(t)),this},i.prototype=Object.create(e.prototype),i.prototype.addElement=function(t){var o=new e(t);return this.el.appendChild(o.el),o},n.prototype=Object.create(e.prototype),n.prototype.addStop=function(t,o,i){var n=new e("stop");return this.el.appendChild(n.el),n.setAttr("offset",t),n.setAttr("stop-color",o),i&&n.setAttr("stop-opacity",i),this},n.prototype.addStopClass=function(t,o){var i=new e("stop");return this.el.appendChild(i.el),i.setAttr("offset",t),i.setAttr("class",o),this},n.prototype.setTransform=function(t){return this.setAttr("gradientTransform",t)},n.prototype.useAbsoluteCoords=function(){return this.setAttr("gradientUnits","userSpaceOnUse")},n.prototype.clear=function(){return t.removeAllChildren(this.el),this},r.prototype=Object.create(n.prototype),r.prototype.setX1=function(t){return this.setAttr("x1",t)},r.prototype.setY1=function(t){return this.setAttr("y1",t)},r.prototype.setX2=function(t){return this.setAttr("x2",t)},r.prototype.setY2=function(t){return this.setAttr("y2",t)},r.prototype.setTopBottom=function(){return this.setX1("0%").setX2("0%").setY1("0%").setY2("100%")},r.prototype.setBottomTop=function(){return this.setX1("0%").setX2("0%").setY1("100%").setY2("0%")},r.prototype.setLeftRight=function(){return this.setX1("0%").setX2("100%").setY1("0%").setY2("0%")},r.prototype.setRightLeft=function(){return this.setX1("100%").setX2("0%").setY1("0%").setY2("0%")},a.prototype=Object.create(n.prototype),a.prototype.setCX=function(t){return this.setAttr("cx",t)},a.prototype.setCY=function(t){return this.setAttr("cy",t)},a.prototype.setR=function(t){return this.setAttr("r",t)},a.prototype.setFX=function(t){return this.setAttr("fx",t)},a.prototype.setFY=function(t){return this.setAttr("fy",t)},s.prototype=Object.create(e.prototype),s.prototype.setD=function(){return this.setAttr("d",this.segs.join(" "))},s.prototype.moveToAbs=function(t,e){return this.segs.push("M "+t+" "+e),this},s.prototype.moveToRel=function(t,e){return this.segs.push("m "+t+" "+e),this},s.prototype.lineToAbs=function(t,e){return this.segs.push("L "+t+" "+e),this},s.prototype.lineToRel=function(t,e){return this.segs.push("l "+t+" "+e),this},s.prototype.curveToCubicAbs=function(t,e,o,i,n,r){return this.segs.push("C "+[].join.call(arguments," ")),this},s.prototype.curveToCubicRel=function(t,e,o,i,n,r){return this.segs.push("c "+[].join.call(arguments," ")),this},s.prototype.curveToQuadraticAbs=function(t,e,o,i){return this.segs.push("Q "+[].join.call(arguments," ")),this},s.prototype.curveToQuadraticRel=function(t,e,o,i){return this.segs.push("q "+[].join.call(arguments," ")),this},s.prototype.arcAbs=function(t,e,o,i,n,r,a){return this.segs.push("A "+[].join.call(arguments," ")),this},s.prototype.arcRel=function(t,e,o,i,n,r,a){return this.segs.push("a "+[].join.call(arguments," ")),this},s.prototype.lineToHorizontalAbs=function(t){return this.segs.push("H "+t),this},s.prototype.lineToHorizontalRel=function(t){return this.segs.push("h "+t),this},s.prototype.lineToVerticalAbs=function(t){return this.segs.push("V "+t),this},s.prototype.lineToVerticalRel=function(t){return this.segs.push("v "+t),this},s.prototype.curveToCubicSmoothAbs=function(t,e,o,i){return this.segs.push("S "+[].join.call(arguments," ")),this},s.prototype.curveToCubicSmoothRel=function(t,e,o,i){return this.segs.push("s "+[].join.call(arguments," ")),this},s.prototype.curveToQuadraticSmoothAbs=function(t,e){return this.segs.push("T "+t+" "+e),this},s.prototype.curveToQuadraticSmoothRel=function(t,e){return this.segs.push("t "+t+" "+e),this},s.prototype.closePath=function(){return this.segs.push("Z"),this},s.prototype.getTotalLength=function(){return this.el.getTotalLength()},s.prototype.getPointAtLength=function(t){return this.el.getPointAtLength(t)},s.prototype.getSegmentsCount=function(){return this.segs.length},s.prototype.gatSegment=function(t){return this.segs[t]},s.prototype.clearSegments=function(){return this.segs.length=0,this},s.prototype.animateDrawing=function(t,e,o){e=e||"linear";var i=this.getTotalLength();return this.el.style.transition="none",this.el.style.strokeDasharray=[i,i].join(" "),this.el.style.strokeDashoffset=i,o&&(this.el.style.stroke=o),this.el.getBoundingClientRect(),this.el.style.transition="stroke-dashoffset "+t+" "+e,this.el.style.strokeDashoffset="0",this},l.prototype=Object.create(e.prototype),l.prototype.setX=function(t){return this.setAttr("x",t)},l.prototype.setY=function(t){return this.setAttr("y",t)},l.prototype.setWidth=function(t){return this.setAttr("width",t)},l.prototype.setHeight=function(t){return this.setAttr("height",t)},l.prototype.getX=function(){return this.getAttr("x")},l.prototype.getY=function(){return this.getAttr("y")},l.prototype.getWidth=function(){return this.getAttr("width")},l.prototype.getHeight=function(){return this.getAttr("height")},c.prototype=Object.create(e.prototype),c.prototype.setX=function(t){return this.setAttr("x",t)},c.prototype.setY=function(t){return this.setAttr("y",t)},c.prototype.setWidth=function(t){return this.setAttr("width",t)},c.prototype.setHeight=function(t){return this.setAttr("height",t)},d.prototype=Object.create(e.prototype),d.prototype.setX1=function(t){return this.setAttr("x1",t)},d.prototype.setY1=function(t){return this.setAttr("y1",t)},d.prototype.setX2=function(t){return this.setAttr("x2",t)},d.prototype.setY2=function(t){return this.setAttr("y2",t)},u.prototype=Object.create(e.prototype),u.prototype.setCX=function(t){return this.setAttr("cx",t)},u.prototype.setCY=function(t){return this.setAttr("cy",t)},u.prototype.setR=function(t){return this.setAttr("r",t)},u.prototype.getCX=function(){return this.getAttr("cx")},u.prototype.getCY=function(){return this.getAttr("cy")},u.prototype.getR=function(){return this.getAttr("r")},f.prototype=Object.create(e.prototype),f.prototype.setCX=function(t){return this.setAttr("cx",t)},f.prototype.setCY=function(t){return this.setAttr("cy",t)},f.prototype.setRX=function(t){return this.setAttr("rx",t)},f.prototype.setRY=function(t){return this.setAttr("ry",t)},f.prototype.getCX=function(){return this.getAttr("cx")},f.prototype.getCY=function(){return this.getAttr("cy")},f.prototype.getRX=function(){return this.getAttr("rx")},f.prototype.getRY=function(){return this.getAttr("ry")},m.prototype=Object.create(e.prototype),m.prototype.setPoints=function(t){return t.length?this.setAttr("points",h(t)):this},m.prototype.getPoints=function(){return p(this.getAttr("points"))},g.prototype=Object.create(e.prototype),g.prototype.setPoints=function(t){return t.length?this.setAttr("points",h(t)):this},g.prototype.getPoints=function(){return p(this.getAttr("points"))},v.prototype=Object.create(e.prototype),v.prototype.setX=function(t){return this.setAttr("x",t)},v.prototype.setY=function(t){return this.setAttr("y",t)},v.prototype.setDX=function(t){return this.setAttr("dx",t)},v.prototype.setDY=function(t){return this.setAttr("dy",t)},v.prototype.setText=function(t){return this.textNode?this.textNode.data=t:(this.textNode=document.createTextNode(t),this.el.appendChild(this.textNode)),this},v.prototype.setPath=function(t,o){this.el.removeChild(this.textNode),this.textPath=new e("textPath"),this.el.appendChild(this.textPath.el),this.textPath.el.appendChild(this.textNode),this.textPath.setRef(this.localRef(t)).setAttr("startOffset",o)},v.prototype.addSpan=function(t){var e=new v(t,"tspan");return this.el.appendChild(e.el),e},v.prototype.getSpan=function(t){var e=this.el.children[t];if(e)return e.owner},_.prototype=Object.create(e.prototype),_.prototype.setX=function(t){return this.setAttr("x",t)},_.prototype.setY=function(t){return this.setAttr("y",t)},_.prototype.setWidth=function(t){return this.setAttr("width",t)},_.prototype.setHeight=function(t){return this.setAttr("height",t)},_.prototype.getX=function(){return this.getAttr("x")},_.prototype.getY=function(){return this.getAttr("y")},_.prototype.getWidth=function(){return this.getAttr("width")},_.prototype.getHeight=function(){return this.getAttr("height")},y.prototype=Object.create(e.prototype),y.prototype.appendChild=function(t){return t&&this.el.appendChild(t.el?t.el:t),this},y.prototype.createChild=function(t,e,o,i){var n=new o(i);return e&&this.el.firstChild?this.el.insertBefore(n.el,this.el.firstChild):this.el.appendChild(n.el),n.setId(t),n},y.prototype.toFront=function(t){var e=this.el.removeChild(t.el);return e&&this.el.appendChild(e),this},y.prototype.toBack=function(t){var e=this.el.removeChild(t.el);return e&&this.el.insertBefore(e,this.el.firstChild),this},y.prototype.beforeElement=function(t,e){if(!e)return this.toBack(t);var o=this.el.removeChild(t.el);return o&&e.el&&this.el.insertBefore(o,e.el),this},y.prototype.afterElement=function(t,e){if(!e)return this.toFront(t);var o=this.el.removeChild(t.el);return o&&e.el&&(this.el.lastElementChild===e.el?this.el.appendChild(o):this.el.insertBefore(o,e.el.nextSibling)),this},y.prototype.getChildrenCount=function(){return this.el.children.length},y.prototype.getChild=function(t){return this.el.children[t]},y.prototype.forEach=function(t){return[].forEach.call(this.el.children,t),this},y.prototype.createPath=function(t,e){return this.createChild(t,e,s)},y.prototype.createRect=function(t,e){return this.createChild(t,e,l)},y.prototype.createImage=function(t,e){return this.createChild(t,e,c)},y.prototype.createLine=function(t,e){return this.createChild(t,e,d)},y.prototype.createCircle=function(t,e){return this.createChild(t,e,u)},y.prototype.createEllipse=function(t,e){return this.createChild(t,e,f)},y.prototype.createPolyline=function(t,e){return this.createChild(t,e,m)},y.prototype.createPolygon=function(t,e){return this.createChild(t,e,g)},y.prototype.createText=function(t,e,o){return this.createChild(e,o,v,t)},y.prototype.createUse=function(t,e){return this.createChild(t,e,_)},y.prototype.createG=function(t,e){return this.createChild(t,e,y,"g")},y.prototype.createDefs=function(t,e){return this.createChild(t,e,b)},y.prototype.getDefs=function(t,e){if(t){var o=this.getElementById(t);return o||(o=this.createDefs(t,e)),o}},y.prototype.createClipPath=function(t,e){return this.createChild(t,e,x)},y.prototype.createSymbol=function(t,e){return this.createChild(t,e,C,"symbol")},y.prototype.createCanvas=function(t,e){return this.createChild(t,e,S)},y.prototype.addRect=function(t,e,o,i,n,r,a){return this.createRect(r,a).setX(t).setY(e).setWidth(o).setHeight(i).setClass(n)},y.prototype.addLine=function(t,e,o,i,n,r,a){return this.createLine(r,a).setX1(t).setY1(e).setX2(o).setY2(i).setClass(n)},y.prototype.addText=function(t,e,o,i,n,r){return this.createText(o,n,r).setX(t).setY(e).setClass(i)},y.prototype.clear=function(){return t.removeAllChildren(this.el),this},b.prototype=Object.create(y.prototype),b.prototype.createLinearGradient=function(t,e){return this.createChild(t,e,r)},b.prototype.createRadialGradient=function(t,e){return this.createChild(t,e,a)},b.prototype.createFilter=function(t,e){return this.createChild(t,e,i)},b.prototype.createMarker=function(t,e){return this.createChild(t,e,L)},b.prototype.createPattern=function(t,e){return this.createChild(t,e,w)},x.prototype=Object.create(y.prototype),w.prototype=Object.create(y.prototype),w.prototype.setX=function(t){return this.setAttr("x",t)},w.prototype.setY=function(t){return this.setAttr("y",t)},w.prototype.setWidth=function(t){return this.setAttr("width",t)},w.prototype.setHeight=function(t){return this.setAttr("height",t)},w.prototype.useLocalCoords=function(){return this.setAttr("patternUnits","userSpaceOnUse")},w.prototype.useParentContentCoords=function(){return this.setAttr("patternContentUnits","objectBoundingBox")},C.prototype=Object.create(y.prototype),C.prototype.setViewSize=function(t,e,o,i,n){var r=[t,e,o,i].join(" ");return this.setAttr("viewBox",r),n=n||"none",this.setAttr("preserveAspectRatio",n),this},C.prototype.getViewSize=function(){var t=this.getAttr("viewBox");if(t){var e=t.split(" ");return{minX:parseInt(e[0],10),minY:parseInt(e[1],10),width:parseInt(e[2],10),height:parseInt(e[3],10),par:this.getAttr("preserveAspectRatio")}}},L.prototype=Object.create(C.prototype),L.prototype.setMarkerUnits=function(t){return this.setAttr("markerUnits",t)},L.prototype.setRefX=function(t){return this.setAttr("refX",t)},L.prototype.setRefY=function(t){return this.setAttr("refY",t)},L.prototype.setMarkerWidth=function(t){return this.setAttr("markerWidth",t)},L.prototype.setMarkerHeight=function(t){return this.setAttr("markerHeight",t)},L.prototype.setOrient=function(t){return this.setAttr("orient",t)},S.prototype=Object.create(C.prototype),S.prototype.getCanvas=function(){return this},S.prototype.getElementById=function(t){var e=document.getElementById(this.getLocalId(t));if(e)return e.owner},S.prototype.getLocalId=function(t){return this.id?this.id+t:t},S.prototype.Screen2SVG=function(t,e,o){o=o||this;var i=this.el.createSVGPoint();i.x=t,i.y=e;var n=P.call(this,o.el,"_screenCTM","getScreenCTM");return n?i.matrixTransform(n.inverse()):i},S.prototype.Element2SVG=function(t,e,o){o=o||this;var i=this.el.createSVGPoint();i.x=t,i.y=e;var n=P.call(this,o.el,"_CTM","getCTM");return n?i.matrixTransform(n.inverse()):i},S.prototype.SVG2Screen=function(t,e,o){o=o||this;var i=this.el.createSVGPoint();i.x=t,i.y=e;var n=P.call(this,o.el,"_screenCTM","getScreenCTM");return n?i.matrixTransform(n):i},S.prototype.SVG2Element=function(t,e,o){o=o||this;var i=this.el.createSVGPoint();i.x=t,i.y=e;var n=P.call(this,o.el,"_CTM","getCTM");return n?i.matrixTransform(n):i},S.prototype.Screen2SVGX=function(t,e){return this.Screen2SVG(t,0,e).x},S.prototype.Element2SVGX=function(t,e){return this.Element2SVG(t,0,e).x},S.prototype.SVG2ScreenX=function(t,e){return this.SVG2Screen(t,0,e).x},S.prototype.SVG2ElementX=function(t,e){return this.SVG2Element(t,0,e).x},S.prototype.Screen2SVGY=function(t,e){return this.Screen2SVG(0,t,e).y},S.prototype.Element2SVGY=function(t,e){return this.Element2SVG(0,t,e).y},S.prototype.SVG2ScreenY=function(t,e){return this.SVG2Screen(0,t,e).y},S.prototype.SVG2ElementY=function(t,e){return this.SVG2Element(0,t,e).y},S.prototype.getTextHeight=function(t){t=t||{};var e=this.createText("TEST");void 0!==t.fontFamily&&e.setAttr("font-family",t.fontFamily),void 0!==t.fontSize&&e.setAttr("font-size",t.fontSize),void 0!==t.className&&e.setClass(t.className);var o=e.getBoundingRect().height;return e.remove(),o},{create:k,createItem:function(t){return new e(t)},createContainer:function(t){return new y(t)},createScalableContainer:function(t){return new C(t)}}}.apply(e,n),n=[s,_],y=function(t,e){function o(t){var e=t.canvas.getViewSize();return e?t.L2PY(e.minY+e.height):t.body.getBoundingClientRect().height}function i(t,e){return t&&t.classList&&t.classList.contains(e)}function n(t){return i(t,"idvcchart_right")}function r(t){return i(t,"idvcchart_top")}function a(){return void 0===this._sizes.top&&(this._sizes.top=this._centralPart.body.offsetTop),this._sizes.top}function s(){return this._sizes.height||(this._sizes.height=o(this._centralPart)),this._sizes.height}function l(){return this._sizes.boundingHeight||(this._sizes.boundingHeight=this.body.getBoundingClientRect().height),this._sizes.boundingHeight}function c(t){var e=t.canvas.getViewSize();return e?t.L2PX(e.minX+e.width):t.body.getBoundingClientRect().width}function d(){return this._sizes.width||(this._sizes.width=c(this._centralPart)),this._sizes.width}function u(){return this._sizes.boundingWidth||(this._sizes.boundingWidth=this.body.getBoundingClientRect().width),this._sizes.boundingWidth}function f(t){t._checkedPos&&(t.representation.setPos(t._checkedPos),delete t._checkedPos)}function h(t,e){var o=this._layout.getValueLayout.call(this,t.value);t.representation.create(t,this.canvas,this.getFormatValue(),o,e),t._checkedPos={x:o.textX,y:o.textY}}function p(){if(!this.axisLine){var t=this._layout.getLineLayout.call(this);this.axisLine=this.canvas.addLine(t.startX,t.startY,t.endX,t.endY,t.lineClass)}}function m(){if(void 0!==this.from){var t=this.getFormatValue(),e=0,o=7,i="text-before-edge;",n=this.body.offsetHeight;r(this._parent)&&(o=n-7,i="text-after-edge;",e=n);this.fromText=this.canvas.addText(5,o,t(this.from),P,"minValue"),this.fromText.setStyle("text-anchor: start; dominant-baseline:"+i);var a=this.body.offsetWidth-5;this.toText=this.canvas.addText(a,o,t(this.to),P,"maxValue"),this.toText.setStyle("text-anchor: end; dominant-baseline:"+i),this.line=this.canvas.addLine(0,e,a,e,S),this.body.refreshSize=function(){var t=this.body.offsetWidth-5;return this.toText.setX(t),this.line.setX2(t),!0}.bind(this)}}function g(){this.values.forEach(this._layout.checkValuePos.bind(this)),this.values.forEach(f.bind(this))}function v(o,i,n){this._parent=t.getDomElement(o),this._layout=i,this.values=[],this.body=document.createElement("div"),this.body.className=i.getClass(),this._parent.appendChild(this.body),this.canvas=e.create(void 0,!n),this.body.appendChild(this.canvas.el),this._sizes={},this.body.refreshSize=function(t){if(this._centralPart)return t&&t.movingZoomFrame||(this._sizes={}),this.values.forEach(this._layout.updateValuePos.bind(this)),this._layout.updateLinePos.call(this),g.call(this),!0}.bind(this)}function _(){}function y(o,i){this._parent=t.getDomElement(o),this.body=document.createElement("div"),this.body.className="idvcchart_horzaxis",this._parent.appendChild(this.body),this.canvas=e.create(void 0,!i),this.body.appendChild(this.canvas.el)}function b(t){var e=!1,o=function(t){t=t||event,this.dragProcessor&&this.dragProcessor.dragging(t.pageX,t.pageY)}.bind(this),i=function(t){t=t||event,this.dragProcessor&&this.dragProcessor.stopDragging(t.pageX,t.pageY),e=!1,window.removeEventListener("mousemove",o,!0),window.removeEventListener("mouseup",i,!0)}.bind(this);t.onmousedown=function(t){this.dragProcessor&&(t=t||event,0===t.button&&(t.ctrlKey||t.shiftKey||(t.preventDefault(),this.dragProcessor.startDragging(t.pageX,t.pageY),e=!0,window.addEventListener("mousemove",o,!0),window.addEventListener("mouseup",i,!0))))}.bind(this),t.addEventListener("mousemove",function(t){this.dragProcessor&&(t=t||event,t.ctrlKey||t.shiftKey||(t.preventDefault(),!e&&this.dragProcessor.movingOver&&this.dragProcessor.movingOver(t.pageX,t.pageY)))}.bind(this),!1)}function x(o,i){this._parent=t.getDomElement(o),t.addClass(this._parent,"idvcchart_content"),this.body=document.createElement("div"),this.body.className="idvcchart_body",this._parent.appendChild(this.body),this.canvas=e.create(void 0,!i),this.body.appendChild(this.canvas.el),this.graphicsRoot=this.canvas,this.dragProcessor=void 0,b.call(this,this.body),this.body.addEventListener("dblclick",function(t){if(t=t||event,this.ondblclick){var e=this.screenP2L(t.pageX,t.pageY);this.ondblclick(e.x,e.y)}}.bind(this),!1);var n=t.addTooltip(this.body,function(t,e,o){if(!this._disabledTooltip&&t){var i=this.screenP2L(e,o),n=this.ontooltiptext(t,i.x,i.y),r={};return this.ontooltipattrs&&(r=this.ontooltipattrs(t,n,i.x,i.y)),{text:n,target:t,keepCurrent:!0,tracking:!0,autoHideDelay:r.autoHideDelay||4e3,delay:r.showDelay||0}}}.bind(this),function(){return!0},"idvcchart_tooltip");this._updateTooltip=n.update.bind(n),this.hideTooltip=n.hide.bind(n)}function w(t,e,o,i,n){return t.createG().createRect().setClass("idvcchart_empty").setX(e).setY(o).setWidth(i).setHeight(n).getParent()}function C(t,e){return e<0?{start:t+e,width:-e}:{start:t,width:e}}function L(t,e){return t>e?{start:e,end:t}:{start:t,end:e}}var S="idvcchart_axis",P="idvcchart_axis_text",k={getClass:function(){return"idvcchart_vertaxis"},getValueLayout:function(t){if(this._centralPart){var e={},o="",i=a.call(this),r=this._centralPart.L2PY(t)+i;if(e.tickClass=S,e.textClass=P,e.tickStartY=r,e.tickEndY=r,e.textY=r,n(this._parent))e.tickStartX=6,e.tickEndX=0,e.textX=10,o="start;";else{var s=u.call(this);e.tickStartX=s-6,e.tickEndX=s,e.textX=s-10,o="end;"}return e.textStyle="text-anchor: "+o+"dominant-baseline: middle",e}},getLineLayout:function(){var t={},e=a.call(this),o=s.call(this);if(t.startY=e,t.endY=e+o+1,t.lineClass=S,n(this._parent))t.startX=.5,t.endX=.5;else{var i=u.call(this);t.startX=i-.5,t.endX=i-.5}return t},getRectLayout:function(t){return{alongStart:t.y,alongSize:t.height,acrossStart:t.x,acrossSize:t.width}},updateValuePos:function(t){if(this._centralPart&&t){var e=a.call(this),o=this._centralPart.L2PY(t.value)+e;t.representation.updatePos({y:o}),t._checkedPos={y:o}}},updateLinePos:function(){if(this._centralPart){var t=a.call(this),e=s.call(this)+t;this.axisLine.setY2(e)}},checkValuePos:function(t){if(t._checkedPos){var e=t.representation.getBoundingRect();e.y<0?t._checkedPos.y-=e.y:delete t._checkedPos}}},R={getClass:function(){return"idvcchart_horzaxis"},getValueLayout:function(t){if(this._centralPart){var e={},o=this._centralPart.L2PX(t),i="";if(e.tickClass=S,e.textClass=P,e.tickStartX=o,e.tickEndX=o,e.textX=o,r(this._parent)){var n=l.call(this);e.tickStartY=n-6,e.tickEndY=n,e.textY=n-10,i="text-after-edge;"}else e.tickStartY=6,e.tickEndY=0,e.textY=10,i="text-before-edge;";return e.textStyle="text-anchor: middle; dominant-baseline:"+i,e}},getLineLayout:function(){var t={},e=d.call(this);if(t.startX=0,t.endX=e,t.lineClass=S,r(this._parent)){var o=l.call(this);t.startY=o-.5,t.endY=o-.5}else t.startY=.5,t.endY=.5;return t},getRectLayout:function(t){return{alongStart:t.x,alongSize:t.width,acrossStart:t.y,acrossSize:t.height}},updateValuePos:function(t){if(this._centralPart&&t){var e=this._centralPart.L2PX(t.value);t.representation.updatePos({x:e}),t._checkedPos={x:e}}},updateLinePos:function(){if(this._centralPart){var t=d.call(this);this.axisLine.setX2(t)}},checkValuePos:function(t){if(t._checkedPos){var e=t.representation.getBoundingRect();e.x<0?t._checkedPos.x-=e.x:delete t._checkedPos}}};v.prototype.getFormatValue=function(){return this.onformat||function(t){return t}},_.prototype.create=function(t,e,o,i,n){this.line=e.addLine(i.tickStartX,i.tickStartY,i.tickEndX,i.tickEndY,i.tickClass),this.text=e.addText(i.textX,i.textY,o(t.value),i.textClass,t.id),n&&this.text.addClass(n),this.text.setStyle(i.textStyle)},_.prototype.updatePos=function(t){t&&(void 0!==t.y?(this.text.setY(t.y),this.line.setY1(t.y).setY2(t.y)):void 0!==t.x&&(this.text.setX(t.x),this.line.setX1(t.x).setX2(t.x)))},_.prototype.setPos=function(t){t&&(void 0!==t.y&&this.text.setY(t.y),void 0!==t.x&&this.text.setX(t.x))},_.prototype.getBoundingRect=function(){return this.text.getBoundingRect()},_.prototype.setLabel=function(t,e){this.text.setText(e(t))},v.prototype.addValue=function(t,e,o){return o=o||_,this.values.push({value:t,id:e,representation:new o}),this._centralPart&&h.call(this,this.values[this.values.length-1]),this},v.prototype.changeValue=function(t,e){if(t>=0&&t<this.values.length){var o=this.values[t];o.value=e,this._layout.updateValuePos.call(this,o,!0),o.representation.setLabel(o.value,this.getFormatValue())}return this},v.prototype.layoutValues=function(){return g.call(this),this},v.prototype.setCentralPart=function(t){return this._centralPart=t,p.call(this),this},v.prototype.clear=function(){return this._centralPart=void 0,this.values.length=0,this.canvas.clear(),this.axisLine=void 0,this},y.prototype.getFormatValue=function(){return this.onformat||function(t){return t}},y.prototype.setTime=function(t,e){return this.from=t,this.to=e,this._centralPart&&m.call(this),this},y.prototype.setCentralPart=function(t){return this._centralPart=t,m.call(this),this},y.prototype.clear=function(){return this._centralPart=void 0,this.from=void 0,this.to=void 0,this.canvas.clear(),this};return x.prototype.enableTooltip=function(t){t?delete this._disabledTooltip:this._disabledTooltip=!0},x.prototype.setDragProcessor=function(t){this.removeSelection(),this.dragProcessor=t},x.prototype.setViewbox=function(t,e,o,i,n){var a=i-e,s=o-t;if(n=n||w(this.canvas,t,e,s,a),this.graphicsRoot=n,this.canvas.setViewSize(t,e,s,a),!r(this._parent)){var l=a+2*e;n.setAttr("transform","translate(0,"+l+") scale(1,-1)")}this._updateTooltip()},x.prototype.updateCursor=function(){var e=this.body.style.cursor;e&&t.changeCursor(e)},x.prototype.removeSelection=function(){this.selection&&(this.selection.remove(),delete this.selection)},x.prototype.createHorzSelection=function(t,e){function o(t,e){return e>t-4&&e<t+4}if(this.selection)return this.selection;this.selection=this.canvas.addRect(0,t,0,e-t,"idvcchart_selection");var i=this.selection;i.el.onselectstart=function(){return!1};var n=this,r={x:-1,dragged:!1,isBorder:!1,width:0,start:0},a=function(t,e){if(e){var o=C(t,e),r=o.start,a=o.start+o.width;n.graphicsRoot&&(r=n.graphicsRoot.getCanvas().Screen2SVGX(r,n.graphicsRoot),a=n.graphicsRoot.getCanvas().Screen2SVGX(a,n.graphicsRoot)),i.setX(r).setWidth(Math.abs(a-r))}},s=function(t){var e=t-r.x;!r.dragged&&Math.abs(e)>1&&(r.dragged=!0,n.body.style.cursor="e-resize",r.isBorder?o(r.start,r.x)&&(r.start+=r.width,r.width=-r.width):(r.width=0,r.start=r.x),n.onselectionstarted&&n.onselectionstarted(n.screenP2LX(r.start))),r.dragged&&(r.width+=e,a(r.start,r.width),r.x=t)};return this.dragProcessor={startDragging:function(t){r.x=t,r.isBorder="e-resize"===n.body.style.cursor},stopDragging:function(t){r.dragged&&r.width&&(this.movingOver(t),n.onselectionchanged&&n.onselectionchanged(n.screenP2LX(r.start),n.P2LX(r.width))),r.x=-1,r.dragged=!1},dragging:function(t){s(t)},movingOver:function(t){o(r.start,t)||o(r.start+r.width,t)?n.body.style.cursor="e-resize":n.body.style.cursor=""}},this.selection},x.prototype.createFreeSelection=function(){if(this.selection)return this.selection;this.selection=this.canvas.addRect(0,0,0,0,"idvcchart_selection");var t=this.selection;t.el.onselectstart=function(){return!1};var e=this,o={x:-1,y:-1,dragged:!1,width:0,height:0,startX:0,startY:0},i=function(o,i,n,r){if(n||r){var a=C(o,n),s=C(i,r),l=a.start,c=s.start,d=a.start+a.width,u=s.start+s.width;e.graphicsRoot&&(l=e.graphicsRoot.getCanvas().Screen2SVGX(l,e.graphicsRoot),c=e.graphicsRoot.getCanvas().Screen2SVGY(c,e.graphicsRoot),d=e.graphicsRoot.getCanvas().Screen2SVGX(d,e.graphicsRoot),u=e.graphicsRoot.getCanvas().Screen2SVGY(u,e.graphicsRoot)),t.setX(l).setY(c).setWidth(Math.abs(d-l)).setHeight(Math.abs(u-c))}},n=function(t,n){var r=t-o.x,a=n-o.y;!o.dragged&&(Math.abs(r)>1||Math.abs(a)>1)&&(o.dragged=!0,o.width=0,o.height=0,o.startX=o.x,o.startY=o.y,e.onselectionstarted&&e.onselectionstarted(e.screenP2LX(o.startX),e.screenP2LY(o.startY))),o.dragged&&(o.width+=r,o.height+=a,i(o.startX,o.startY,o.width,o.height),o.x=t,o.y=n)};return this.dragProcessor={startDragging:function(t,e){o.x=t,o.y=e},stopDragging:function(t,i){o.dragged&&o.width&&o.height&&e.onselectionchanged&&setTimeout(function(){var t=e.screenP2LX(o.startX),i=e.screenP2LY(o.startY),n=e.screenP2LX(o.startX+o.width),r=e.screenP2LY(o.startY+o.height),a=L(t,n),s=L(i,r);e.onselectionchanged(a.start,s.start,a.end,s.end)},0),o.x=-1,o.y=-1,o.dragged=!1},dragging:function(t,e){n(t,e)}},this.selection},x.prototype.setSelection=function(t,e){var o=this.selection;if(o){var i=C(t,e);o.setX(i.start).setWidth(i.width),this.onselectionchanged&&this.onselectionchanged(t,e)}},x.prototype.getSelection=function(){var t=this.selection;if(t)return{start:parseFloat(t.getAttr("x")),width:parseFloat(t.getAttr("width"))}},x.prototype.hideSelection=function(){var t=this.selection;t&&t.setX(0).setY(0).setWidth(0).setHeight(0)},x.prototype.event2SVGPos=function(t){return this.screenP2L(t.pageX,t.pageY)},x.prototype.clear=function(){return this.selection&&delete this.selection,this.canvas.clear(),this},x.prototype.L2P=function(t,e){var o={x:t,y:e};return this.tr?o=this.tr.L2P(t,e):this.graphicsRoot&&(o=this.graphicsRoot.getCanvas().SVG2Element(t,e,this.graphicsRoot)),o},x.prototype.L2PX=function(t){var e=t;return this.tr?e=this.tr.L2PX(t):this.graphicsRoot&&(e=this.graphicsRoot.getCanvas().SVG2ElementX(t,this.graphicsRoot)),e},x.prototype.L2PY=function(t){var e=t;return this.tr?e=this.tr.L2PY(t):this.graphicsRoot&&(e=this.graphicsRoot.getCanvas().SVG2ElementY(t,this.graphicsRoot)),e},x.prototype.P2L=function(t,e){var o={x:t,y:e};return this.tr?o=this.tr.P2L(t,e):this.graphicsRoot&&(o=this.graphicsRoot.getCanvas().Element2SVG(t,e,this.graphicsRoot)),o},x.prototype.P2LX=function(t){var e=t;return this.tr?e=this.tr.P2LX(t):this.graphicsRoot&&(e=this.graphicsRoot.getCanvas().Element2SVGX(t,this.graphicsRoot)),e},x.prototype.P2LY=function(t){var e=t;return this.tr?e=this.tr.P2LY(t):this.graphicsRoot&&(e=this.graphicsRoot.getCanvas().Element2SVGY(t,this.graphicsRoot)),e},x.prototype.screenP2L=function(t,e){var o={x:t,y:e};return this.tr?o=this.tr.screenP2L(t,e):this.graphicsRoot&&(o=this.graphicsRoot.getCanvas().Screen2SVG(t,e,this.graphicsRoot)),o},x.prototype.screenP2LX=function(t){var e=t;return this.tr?e=this.tr.screenP2LX(t):this.graphicsRoot&&(e=this.graphicsRoot.getCanvas().Screen2SVGX(t,this.graphicsRoot)),e},x.prototype.screenP2LY=function(t){var e=t;return this.tr?e=this.tr.screenP2LY(t):this.graphicsRoot&&(e=this.graphicsRoot.getCanvas().Screen2SVGY(t,this.graphicsRoot)),e},x.prototype.getCanvas=function(){return this.canvas},{createVertAxis:function(t,e){return new v(t,k,e)},createHorzAxis:function(t,e){return new v(t,R,e)},createTimeAxis:function(t,e){return new y(t,e)},createCentralPart:function(t,e){return new x(t,e)},DefValueRepresentation:_}}.apply(e,n),n=[p,s,y,_],b=function(t,e,o,i){function n(t){return!!(t&&t.el&&t.el.el&&t.el.el.ownerSVGElement)}function r(t,e,o,i,n,r){var a=t.tr.L2P(e,o);this.el=this.init(t.centralPart.graphicsRoot,a,i,n,r),this.x=e,this.y=o,this.el.el.roofLinePoint=this}function a(t,e,o,i,n,a){r.call(this,t,e,o,i,n,a)}function s(t,e,o,i,n,a){r.call(this,t,e,o,i,n,a)}function l(t){return Math.round(t*Math.sqrt(Math.PI)/2)}function c(t,e,o,i,n,a){r.call(this,t,e,o,i,n,a)}function d(t,e,o){function i(t,e,o,i,n,r){c.call(this,t,e,o,i,n,r)}return i.prototype=Object.create(c.prototype),i.fillPatternPostfixName=o,i.createFillPattern=function(t,e,o,n,r){c.createFillPattern.call(i,t,e,o,n,r)},i.prototype.getFillPatternPostfix=function(){return i.fillPattermPostfix?i.fillPattermPostfix:""},i.getPoints=e,i.prototype.getPoints=t,i}function u(t,e,o){var i=2*o*Math.sqrt(Math.PI)/Math.pow(3,.25),n=i*Math.sqrt(3)/6;return[[t-i/2,e+n],[t,e-2*n],[t+i/2,e+n]]}function f(t){var e=.667;return[[.5-t/2,e+t/3],[.5,e-2*t/3],[.5+t/2,e+t/3]]}function h(t,e,o){var i=o*Math.sqrt(Math.PI/1.618*2);return[[t-i/2,e],[t,e-1.618*i/2],[t+i/2,e],[t,e+1.618*i/2]]}function p(t){return t/=2,[[.5-t,.5],[.5,.5-t],[.5+t,.5],[.5,.5+t]]}function m(t,e){if(t){if(e=e||"Gainsboro",t.icon||(t.icon={}),!t.icon[e]){var o=i.create(void 0,!0).setViewSize(0,0,20,20);new t({tr:{L2P:function(t,e){return{x:t,y:e}}},centralPart:{graphicsRoot:o}},10,11,7).remClass("idvc_active"),t.icon[e]="url('data:image/svg+xml;base64,"+btoa('<svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 20 20" stroke="black" fill="'+e+'">'+o.el.innerHTML+"</svg>")+"')"}return t.icon[e]}}function g(t){return"dominant-baseline:"+(t<0?"text-before-edge;":"text-after-edge;")}function v(t){return t<0?"text-anchor: end; ":""}function _(t,e,o,i,n){var r=t.centralPart.canvas.createText(e).setClass("idvcchart_roofline_text").setX(0).setY(0).setStyle(v(o)+g(i)).after(t.getLastGridLine()).deactivate();return n&&r.addSpan("?").addClass("idvcchart_roofline_explanation").setAttr("dy","-10").activate(),{svgText:r,alongOffset:o,acrossOffset:i}}function y(t,e,o){return!(!t||!t.svgText||t.alongOffset===e&&t.acrossOffset===o)&&(t.svgText.setStyle(v(e)+g(o)),t.alongOffset=e,t.acrossOffset=o,!0)}function b(t,e){var o,i,n,r;return Array.isArray(t)?1===t.length?o=t[0]:2===t.length?(n=t[0],o=t[1]):3===t.length?(o=t[0],r=t[1],i=t[2]):t.length>=4&&(n=t[0],o=t[1],r=t[2],i=t[3]):o=t,void 0===i&&(i=o),void 0===r&&(r=e.getMaxIntens()),void 0===n&&(n=e.getMinIntens()),{startX:n,startY:o,endX:r,endY:i}}function x(t,e,o,i){e=e||"idvcroofline_line";var n,r,a,s,l=b(t,i.tr);a=l.startX,n=l.startY,s=l.endX,r=l.endY;var c=S(i,a,n,s,r,e,o);this.el=c,this.startX=a,this.startY=n,this.endX=s,this.endY=r,this.roofline=i,c.el.roof=this}function w(i,r){this._parent=e.getDomElement(i),e.removeAllChildren(this._parent),this.onDblClick=t.create(),this.onContextMenu=t.create(),this.onSelectionChanged=t.create(),this.onCurrentPointChanged=t.create(),this.beforeResize=t.create(),this.onResize=t.create(),this.centralPart=o.createCentralPart(i),this.vertAxis=o.createVertAxis(i),this.horzAxis=o.createHorzAxis(i),this._selectedPoints=[],Object.defineProperty(this,"selectedPoint",{get:function(){return this._selectedPoints[0]},set:function(t){if(n(t)){var e=this._selectedPoints[0];(e!==t||this._selectedPoints.length>1)&&(this._selectedPoints.forEach(function(t){t.el.el.classList.remove(M)}),this._selectedPoints.length=0,this._selectedPoints.push(t),e=this._selectedPoints[0],e.el.el.classList.add(M),this.setPointFront(e),this.onSelectionChanged.raise(e,R.set))}}}),Object.defineProperty(this,"selectedPoints",{get:function(){return this._selectedPoints}}),this._currentPoint,Object.defineProperty(this,"currentPoint",{get:function(){return this._currentPoint},set:function(t){t&&!n(t)||this._currentPoint!==t&&(this._currentPoint&&this._currentPoint.el.el.classList.remove(z),this._currentPoint=t,this._currentPoint&&(this._currentPoint.el.el.classList.add(z),this.setPointFront(this._currentPoint)),this.onCurrentPointChanged.raise(this._currentPoint))}}),this.points=[],this.roofs=[],void 0!==r&&this._parent.setAttribute("tabindex",r),this.centralPart.body.refreshSize=function(t){return t&&t.movingZoomFrame||this.tr&&this.tr._clear(),this.beforeResize.raise(this.tr),this.points.forEach(function(t){var e=this.tr.L2P(t.x,t.y);t.move(e.x,e.y)}.bind(this)),this.roofs.forEach(function(t){t.update()}),this.gridLines&&this.addGridLines(),this.centerMarker&&this.centerMarker.move(this.tr),this.onResize.raise(this.tr),!0}.bind(this),this.centralPart.body.addEventListener("mousedown",function(t){t=t||event,0===t.button&&t.target&&t.target.roofLinePoint&&(t.ctrlKey?this.addSelectedPoint(t.target.roofLinePoint):this.selectedPoint=t.target.roofLinePoint,this.currentPoint=t.target.roofLinePoint)}.bind(this),!1),this.centralPart.ondblclick=function(t,e){this.onDblClick.raise(t,e)}.bind(this),this.windowResizeListener=e.addWindowResizeListener(this._parent)}function C(t){var e=t.ownerSVGElement,o=t.scaleIndependentXForm=e.createSVGTransform();return t.transform.baseVal.clear(),t.transform.baseVal.appendItem(o),o}function L(t,e,o,i,n,r){if(e){var a=e.svgText.el,s=e.alongOffset,l=C(a),c=t.tr,d=c.L2P(o,i),u=c.L2P(n,r),f=u.x-d.x,h=d.y-u.y,p=Math.atan2(h,f),m=s>=0?d:u,g=function(e){return t._CTM||(t._CTM=e.getCTM()),t._CTM}(a);g&&l.setMatrix(g.inverse().translate(m.x+s*Math.cos(p)-e.acrossOffset*Math.sin(p),m.y-s*Math.sin(p)-e.acrossOffset*Math.cos(p)).rotate(-p/(2*Math.PI)*360))}}function S(t,e,o,i,n,r,a,s){var l=t.tr,c=l.L2P(e,o),d=l.L2P(i,n);return t.centralPart.graphicsRoot.createLine(a,s).setClass(r).setX1(c.x).setY1(c.y).setX2(d.x).setY2(d.y)}function P(t,e,o,i,n){this.x=t,this.y=e,this.pos=o,n=n||1;var r=Math.ceil(39*n/2);this.halfMarkerSize=r,this.horzLine=i.addLine(o.x-r,o.y,o.x+r,o.y,I),this.vertLine=i.addLine(o.x,o.y-r,o.x,o.y+r,I)}function k(t){var e=this.roofs.indexOf(t);e>=0&&this.roofs.splice(e,1)}var R={set:"set",add:"add",remove:"remove"};r.prototype.show=function(){return this.el.show(),this},r.prototype.hide=function(){return this.el.hide(),this},r.prototype.isHidden=function(){return this.el.isHidden()},r.prototype.front=function(){return this.el.front(),this},r.prototype.addClass=function(t){return this.el.addClass(t),this},r.prototype.remClass=function(t){return this.el.remClass(t),this},r.prototype.setFillColor=function(t){return t?this.el.setAttr("style","fill:"+t):this.el.remAttr("style"),this},r.prototype.setPatternId=function(t){return this.el.setStyle("stroke:darkgray; fill:"+this.el.localUrl(t+this.getFillPatternPostfix())),this},a.prototype=Object.create(r.prototype),a.createFillPattern=function(t,e,o,i,n){a.fillPattermPostfix||(a.fillPattermPostfix="-cl");var r=o/e/2;t.createPattern(n+a.fillPattermPostfix).useParentContentCoords().setWidth("100%").setHeight("100%").createCircle().setCX(".5").setCY(".5").setR(".5").setAttr("fill","white").getParent().createCircle().setCX(".5").setCY(".5").setR(r).setAttr("fill",i).setAttr("stroke","black").setAttr("stroke-width","0.05")},a.prototype.getFillPatternPostfix=function(){return a.fillPattermPostfix?a.fillPattermPostfix:""},a.prototype.init=function(t,e,o,i,n){return t.createCircle(n).setClass(i).activate().setCX(e.x).setCY(e.y).setR(o)},a.prototype.move=function(t,e){return this.el.setCX(t).setCY(e),this},a.prototype.setR=function(t){return this.el.setR(t),this},a.prototype.getR=function(){return this.el.getR()},a.prototype.getX=function(){return parseFloat(this.el.getCX())},a.prototype.getY=function(){return parseFloat(this.el.getCY())},a.prototype.calcLineEndPoint=function(t,e){var o=this.getX(),i=this.getY(),n=this.getR(),r=0,a=0,s=Math.sqrt(Math.pow(o-t,2)+Math.pow(i-e,2));return s>0&&(r=(e-i)/s,a=(t-o)/s),{x:o+n*a,y:i+n*r}},s.prototype=Object.create(r.prototype),s.createFillPattern=function(t,e,o,i,n){s.fillPattermPostfix||(s.fillPattermPostfix="-sr");var r=o/e,a=r/2;t.createPattern(n+s.fillPattermPostfix).useParentContentCoords().setWidth("100%").setHeight("100%").createRect().setX("0").setY("0").setWidth("1").setHeight("1").setAttr("fill","white").getParent().createRect().setX(.5-a).setY(.5-a).setWidth(r).setHeight(r).setAttr("fill",i).setAttr("stroke","black").setAttr("stroke-width","0.05")},s.prototype.getFillPatternPostfix=function(){return s.fillPattermPostfix?s.fillPattermPostfix:""},s.prototype.init=function(t,e,o,i,n){var r=l(o);return this.delta=r,this.r=o,t.createRect(n).setClass(i).activate().setX(e.x-r).setY(e.y-r).setWidth(2*r).setHeight(2*r)},s.prototype.move=function(t,e){return this.el.setX(t-this.delta).setY(e-this.delta),this},s.prototype.setR=function(t){var e=this.getX(),o=this.getY(),i=l(t);return this.delta=i,this.r=t,this.el.setX(e-i).setY(o-i).setWidth(2*i).setHeight(2*i),this},s.prototype.getR=function(){return this.r},s.prototype.getX=function(){return parseFloat(this.el.getX())+this.delta},s.prototype.getY=function(){return parseFloat(this.el.getY())+this.delta},s.prototype.calcLineEndPoint=function(t,e){var o=t,i=e,n=this.getX(),r=this.getY(),a=this.delta,s=0,l=n-t,c=r-e;return l&&(s=c/l),Math.abs(l)+Math.abs(c)>0&&(0===l||0===c||l===c?(i=r-Math.sign(c)*a,o=n-Math.sign(l)*a):s>1||s<-1?(i=r-Math.sign(c)*a,o=function(o){return(o-e)/s+t}(i)):(o=n-Math.sign(l)*a,i=function(o){return(o-t)*s+e}(o))),{x:o,y:i}},c.prototype=Object.create(r.prototype),c.createFillPattern=function(t,e,o,i,n){this.fillPattermPostfix||(this.fillPattermPostfix=this.fillPatternPostfixName);var r=this.getPoints(1),a=this.getPoints(o/e);t.createPattern(n+this.fillPattermPostfix).useParentContentCoords().setWidth("100%").setHeight("100%").createPolygon().setPoints(r).setAttr("fill","white").getParent().createPolygon().setPoints(a).setAttr("fill",i).setAttr("stroke","black").setAttr("stroke-width","0.05")},c.prototype.init=function(t,e,o,i,n){var r=this.getPoints(e.x,e.y,o);return this.r=o,this.xP=e.x,this.yP=e.y,t.createPolygon(n).setClass(i).activate().setPoints(r)},c.prototype.move=function(t,e){this.xP=t,this.yP=e;var o=this.getPoints(t,e,this.r);return this.el.setPoints(o),this},c.prototype.setR=function(t){var e=this.getX(),o=this.getY();this.r=t;var i=this.getPoints(e,o,t);return this.el.setPoints(i),this},c.prototype.getR=function(){return this.r},c.prototype.getX=function(){return this.xP},c.prototype.getY=function(){return this.yP},c.prototype.calcLineEndPoint=function(t,e){var o;if(t===this.xP&&e===this.yP)o={x:t,y:e};else for(var i=this.el.getPoints(),n=0,r=i.length;n<r;n++){var a=n+1;a>=r&&(a=0);var s=i[n][0],l=i[n][1],c=i[a][0],d=i[a][1];if(o=function(t,e,o,i,n,r,a,s){function l(t,e,o){return t<Math.min(e,o)||t>Math.max(e,o)}var c,d,u,f,h,p,m;return t!==o&&(h=(i-e)/(o-t)),e!==i&&(f=(o-t)/(i-e)),n!==a&&(m=(s-r)/(a-n)),r!==s&&(p=(a-n)/(s-r)),t===o?(d=t,n!==a&&(u=m*d+s-m*a)):n===a&&(d=n,t!==o&&(u=h*d+i-h*o)),void 0===d&&void 0===u&&(e===i?(u=e,r!==s&&(d=p*u+a-p*s)):r===s&&(u=r,e!==i&&(d=f*u+o-f*i))),void 0===d&&void 0===u&&(d=(s-i+h*o-m*a)/(h-m),u=(a-o+f*i-p*s)/(f-p)),void 0!==d&&void 0!==u&&(l(d,t,o)||l(d,n,a)||l(u,e,i)||l(u,r,s))&&(d=u=void 0),void 0!==d&&void 0!==u&&(c={x:d,y:u}),c}(t,e,this.xP,this.yP,s,l,c,d))break}return o||(o={x:t,y:e}),o};var T=d(u,f,"-tr"),E=d(h,p,"-dm");x.prototype.setBeginText=function(t,e,o,i){return e=e||10,o=o||1,this.startText&&this.startText.svgText&&this.startText.svgText.remove(),this.startText=_(this.roofline,t,e,o,i),L(this.roofline,this.startText,this.startX,this.startY,this.endX,this.endY),this.startText.svgText.el.parentRoof=this.el,this},x.prototype.updateBeginOffsets=function(t,e){t=t||10,e=e||1,y(this.startText,t,e)&&L(this.roofline,this.startText,this.startX,this.startY,this.endX,this.endY)},x.prototype.setEndText=function(t,e,o,i){return e=e||-10,o=o||1,this.endText&&this.endText.svgText&&this.endText.svgText.remove(),this.endText=_(this.roofline,t,e,o,i),L(this.roofline,this.endText,this.startX,this.startY,this.endX,this.endY),this.endText.svgText.el.parentRoof=this.el,this},x.prototype.updateEndOffsets=function(t,e){t=t||-10,e=e||1,y(this.endText,t,e)&&L(this.roofline,this.endText,this.startX,this.startY,this.endX,this.endY)},x.prototype.show=function(){this.el.show(),this.startText&&this.startText.svgText.show(),this.endText&&this.endText.svgText.show()},x.prototype.hide=function(){this.el.hide(),this.startText&&this.startText.svgText.hide(),this.endText&&this.endText.svgText.hide()},x.prototype.isHidden=function(){return this.el.isHidden()},x.prototype.remove=function(){this.el.remove(),this.startText&&this.startText.svgText.remove(),this.endText&&this.endText.svgText.remove(),k.call(this.roofline,this)},x.prototype.change=function(t){var e,o,i,n,r=b(t,this.roofline.tr);return i=r.startX,e=r.startY,n=r.endX,o=r.endY,this.startX=i,this.startY=e,this.endX=n,this.endY=o,this.update(),this},x.prototype.update=function(){var t=this.roofline.tr.L2P(this.startX,this.startY),e=this.roofline.tr.L2P(this.endX,this.endY);this.el.setX1(t.x).setY1(t.y).setX2(e.x).setY2(e.y),L(this.roofline,this.startText,this.startX,this.startY,this.endX,this.endY),L(this.roofline,this.endText,this.startX,this.startY,this.endX,this.endY)};var M="idvcroofline_point_selected",z="idvcroofline_point_current";w.prototype.destroy=function(){this.windowResizeListener.remove(),delete this.windowResizeListener},w.prototype.addSelectedPoint=function(t){if(n(t))if(t.el.el.classList.toggle(M),t.el.el.classList.contains(M))this._selectedPoints.push(t),this.onSelectionChanged.raise(t,R.add);else{var e=this._selectedPoints.indexOf(t);e>=0&&this._selectedPoints.splice(e,1),this.onSelectionChanged.raise(t,R.remove)}},w.prototype.selectPoints=function(t,e,o,i){this.clearSelectedPoints();var n=!0,r=!0;this.points.forEach(function(a){a.x>t&&a.x<o&&a.y>e&&a.y<i&&(this.addSelectedPoint(a),r=!1,a===this.currentPoint&&(n=!1))}.bind(this)),r&&this.onSelectionChanged.raise(void 0,R.remove),n&&(this.currentPoint=this._selectedPoints[0])},w.prototype.isPointSelected=function(t){return t&&t.el.el.classList.contains(M)},w.prototype.clearSelectedPoints=function(){this._selectedPoints.forEach(function(t){t.el.el.classList.remove(M)}),this._selectedPoints.length=0},w.prototype.clear=function(){this.points=[],this.roofs=[],this._selectedPoints=[],this._currentPoint=void 0,delete this.gridLines,delete this.centerMarker,delete this.firstFrontEl,this.centralPart.clear(),this.horzAxis.clear(),this.vertAxis.clear()},w.prototype.clearRoofs=function(){this.roofs.forEach(function(t){t&&t.remove()}),this.roofs=[]},w.prototype.setViewbox=function(t,o,i,n,r,a){r=r||100,a=a||100;var s={};this.tr&&(s=this.tr._sizes),this.tr={_getClientWidth:function(){return Math.max(this._getBoundingWidth(),r)},_getClientHeight:function(){return Math.max(this._getBoundingHeight(),a)},canvas:this.centralPart.getCanvas(),body:this.centralPart.body,_sizes:{},getMinIntens:function(){return t},getMaxIntens:function(){return i},getMinPerf:function(){return o},getMaxPerf:function(){return n},getMinX:function(){return this.L2PX(t)},getMaxX:function(){return this.L2PX(i)},getMinY:function(){return this.L2PY(o)},getMaxY:function(){return this.L2PY(n)},getCanvas:function(){return this.canvas},L2P:function(t,e){return{x:this.L2PX(t),y:this.L2PY(e)}},L2PX:function(e){return(e-t)*this._getClientWidth()/(i-t)},L2PY:function(t){return this._getClientHeight()*(1-(t-o)/(n-o))},P2L:function(t,e){return{x:this.P2LX(t),y:this.P2LY(e)}},P2LX:function(e){return t+e*(i-t)/this._getClientWidth()},P2LY:function(t){return o+(n-o)*(1-t/this._getClientHeight())},screenP2L:function(t,e){return{x:this.screenP2LX(t),y:this.screenP2LY(e)}},screenP2LX:function(t){return t-=e.getElementPos(this.body).x,this.P2LX(t)},screenP2LY:function(t){return t-=e.getElementPos(this.body).y,this.P2LY(t)},_clear:function(){this._sizes={}},_getBoundingWidth:function(){return this._sizes.width||(this._sizes.width=this.body.getBoundingClientRect().width),this._sizes.width},_getBoundingHeight:function(){return this._sizes.height||(this._sizes.height=this.body.getBoundingClientRect().height),this._sizes.height}},this.tr._sizes=s,this.vertAxis.setCentralPart(this.tr),this.horzAxis.setCentralPart(this.tr),this.centralPart.tr=this.tr},w.prototype.addPoint=function(t,e,o,i,n,r){r=r||a,o=o||8,i=i||"idvcroofline_point";var s=new r(this,t,e,o,i,n);return this.points.push(s),s},w.prototype.setPointFront=function(t){t&&(this.firstFrontEl?t.el.before(this.firstFrontEl):(t.front(),this.centerMarker&&this.centerMarker.front()))};var I="idvcchart_roofline_center_marker",A="active";return P.prototype.move=function(t){var e;t?(e=t.L2P(this.x,this.y),this.pos=e):e=this.pos,this.horzLine.setX1(e.x-this.halfMarkerSize).setX2(e.x+this.halfMarkerSize).setY1(e.y).setY2(e.y),this.vertLine.setX1(e.x).setX2(e.x).setY1(e.y-this.halfMarkerSize).setY2(e.y+this.halfMarkerSize)},P.prototype.front=function(){this.horzLine.front(),this.vertLine.front()},P.prototype.activate=function(){function t(t){t.addClass(A)}var e=this.horzLine.getCanvas();if(e){var o=e.getBoundingRect();this.horzLine.setX1(0).setX2(o.width),this.vertLine.setY1(0).setY2(o.height),t(this.horzLine),t(this.vertLine)}},P.prototype.deactivate=function(){function t(t){t.remClass(A)}this.move(),t(this.horzLine),t(this.vertLine)},w.prototype.setCenterMarker=function(t,e,o,i){o=o||1;var n=this.tr.L2P(t,e);return i=i||P,this.centerMarker=new i(t,e,n,this.centralPart.graphicsRoot,o),this.centerMarker.front(),this.centerMarker},w.prototype.addRoof=function(t,e,o){var i=new x(t,e,o,this);return this.roofs.push(i),i},w.prototype.addGridLines=function(t){function e(t){return t&&t.representation&&!(t.representation.noGridLine&&t.representation.noGridLine())}t=t||"idvcroofline_grid_line";var o=function(o){if(e(o)){var i=o.value,n=i,r=this.tr.getMaxIntens(),a=this.tr.getMinIntens();this.gridLines.push(S(this,a,i,r,n,t,void 0,!0))}}.bind(this),i=function(o){if(e(o)){var i=o.value,n=i,r=this.tr.getMaxPerf(),a=this.tr.getMinPerf();this.gridLines.push(S(this,i,a,n,r,t,void 0,!0))}}.bind(this);this.gridLines&&this.gridLines.forEach(function(t){t.remove()}),this.gridLines=[],this.vertAxis.values.forEach(o),this.vertAxis.intermValues&&this.vertAxis.intermValues.values.forEach(o),this.horzAxis.values.forEach(i),this.horzAxis.intermValues&&this.horzAxis.intermValues.values.forEach(i)},w.prototype.getLastGridLine=function(){if(this.gridLines)return this.gridLines[0]},{create:function(t,e){return new w(t,e)},SelectionOperations:R,BasePoint:r,CirclePoint:a,SquarePoint:s,TrianglePoint:T,DiamondPoint:E,createPolygonPoint:d,getPointIcon:m}}.apply(e,n),n=[o,p,s],x=function(t,e,o){function i(){o.appendCSS(!function(){var t=new Error('Cannot find module "."');throw t.code="MODULE_NOT_FOUND",t}().toUrl("./grid_styles.css"))}function n(t,e){for(var o=null;t;){if(t.className.indexOf&&t.className.indexOf(e,0)>=0){o=t;break}t=t.parentElement}return o}function r(t){this.scrollBody=document.createElement("div"),this.scrollBody.className="idvcgrid_vertical_scroll",this.scrolled=[],this.scrolledCoef=1,this.scrollSize=document.createElement("div"),this.scrollSize.className="idvcgrid_scroll_size",this.scrollBody.appendChild(this.scrollSize),t.appendChild(this.scrollBody),this.scrollBody.onscroll=function(){var t=0,e=0,o=!1,i=!0;this.scrolled.forEach(function(n,r){if(n._isActive()){n._updateScrollTop(this.getScrollTop());var a=n._getScrollState(),s=a.columnScrollTop;r?s!==t&&(t=Math.min(t,s),o=!0,i=i&&e===a.topRow):(t=s,e=a.topRow)}}.bind(this)),i&&o&&this.updateColumnsScrollTop(t)}.bind(this)}function a(t){t.stopPropagation(),t.preventDefault()}function s(t,e,o){this.dataIndex=e,this.area=document.createElement("div"),this.area.columnObj=this,this.header=document.createElement("div"),this.scrollArea=document.createElement("div"),this.footer=document.createElement("div"),this.header.className="idvcgrid_header_section",this.scrollArea.className="idvcgrid_column_scrolled",this.footer.className="idvcgrid_footer_section",this.footer.onmousedown=a,this.footer.onmouseup=a,this.footer.onmousemove=a,this.setState(o),this.area.appendChild(this.scrollArea),this.area.appendChild(this.footer),this.area.appendChild(this.header),t.appendChild(this.area)}function l(t){return t||!this.visItem||this.visItem.ignoreHeaderForAutoSize()}function c(t,e,o,i,n){var r;return n&&n.getCellStyle&&(r=n.getCellStyle(t,e,"idvcgrid_cell",o,i)),r||(r="idvcgrid_cell",t&&(r+=" "+e)),r}function d(t,e,i,n){if(t&&n){var r=n.getCell(e,i);"string"==typeof r?(t.isDirty&&(t.style.cssText=null,o.removeAllChildren(t),t.getBoundingClientRect(),delete t.isDirty),null!==r&&(t.innerHTML=r)):o.isHTMLNode(r)?(o.removeAllChildren(t),t.appendChild(r),t.isDirty=!0):r&&(o.applyObjectProperties(t,r),t.isDirty=!0)}}function u(t,e,o,i,n,r){t&&(t.className=c(i,n,e,o,r),d(t,e,o,r))}function f(t){if(t&&!t.isLeaf()){for(var e,o=t.getChildrenCount()-1;o>=0&&(e=t.getChild(o),!e.isVisible());o--);return e}}function h(t){if(t&&!t.isLeaf()){for(var e,o=0,i=t.getChildrenCount();o<i&&(e=t.getChild(o),!e.isVisible());o++);return e}}function p(t){var e=null;if(t)e=window.getComputedStyle(t,null);else{var o=document.createElement("button");o.style.position="absolute",o.style.left="0",o.style.top="0",document.body.appendChild(o),e=window.getComputedStyle(o,null),document.body.removeChild(o)}return e}function m(t,i){function r(t){function e(t,e,o){if(!t||!t.area.offsetParent)return{section:void 0,left:0,top:0,width:0,height:0};var i=document.createElement("div");i.className="idvcgrid_header_section idvcgrid_header_section_moving",i.innerHTML=t.header.innerHTML;var n=t.area;i.style.left=e+"px",i.style.top=o+"px",i.style.width=n.offsetWidth+"px";var r=t.getHeaderHeight();return i.style.height=r+"px",{section:i,left:n.offsetLeft,top:n.offsetTop,width:n.offsetWidth,height:r}}function o(t,i,n,r){if(t)for(var a=t.getChildrenCount(),s=0;s<a;s++){var l=void 0,c=t.getChild(s);if(c&&c.column&&c.isVisible()){l=e(c.column,n,r);var d=i.top+r+l.height;i.bottom<d&&(i.bottom=d),l.section&&i.childSections.push(l.section)}l&&(o(c,i,n,r+l.height),n+=l.width)}}if(!t)return{section:void 0,left:0,top:0,height:0};var i=document.createElement("div");i.className="idvcgrid_header_section_moving_container";var n=e(t,0,0);return t.visItem&&(n.childSections=[],n.bottom=n.top+n.height,o(t.visItem,n,0,n.height),n.height=n.bottom-n.top),i.style.left=n.left+"px",i.style.top=n.top+"px",i.style.height=n.height+"px",i.style.width=n.width+"px",i.appendChild(n.section),n.childSections&&n.childSections.forEach(i.appendChild.bind(i)),{section:i,left:n.left,top:n.top,height:n.height}}function a(t,e,o,i){i=i||window.event;var n=i[t]*e;if(i.shiftKey)o&&(this.area.scrollLeft+=n,i.stopPropagation(),i.preventDefault());else{var r=this.getScrollTop()+n;this.setScrollTop(r)}}function s(t){return{isFooter:-2===t,isHeader:-1===t,isRow:t>=0}}this.onDblClick=e.create(),this.onContextMenu=e.create(),this.onChangeCurrentRow=e.create(),this.onFitHeaderHeight=e.create(),this.onExpandColumn=e.create(),this.onChangeColumnWidth=e.create(),this.onShowTooltip=e.create(),this.onSetFocus=e.create(),this.onLostFocus=e.create(),this.area=document.createElement("div"),this.area.className="idvcgrid_body",void 0!==i&&this.area.setAttribute("tabindex",i),this.connectedBody=null,t.appendChild(this.area),this.columns=[],this.inActiveColumns=[],this.dataModel=null,this.scrolling=null,this._expandLastColumn=!0,this.updateNum=o.createCounter(),this.fitcentralColumnAsync=o.createAsyncCall(this.fitCentralColumnWidth,this,300),this.currentChangeAsync=o.createAsyncCall(function(t,e){this.onChangeCurrentRow.raise(t,e)}.bind(this),this,50),this.S=o.createSequence(),this._sizes={},this.area.refreshSize=function(t){if(this._needRefreshView)delete this._needRefreshView,this.refreshView();else{if(t&&!t.width)return;this.fitCentralColumnHeader(),this.fitLastColumn(),this._viewport.refreshRowsContent()}return!0}.bind(this);var l=this;this._viewport=function(){function t(t,e){var o,i=l.columns.length,n=i>L;n?(e||l.updateNum.next(),o=l.getVisibleColumnsRange()):o={first:0,last:i-1};for(var r=l.updateNum.get(),a=o.first;a<=o.last;a++){var s=l.columns[a];(!n||s&&s.updateNum!==r)&&(s.updateNum=r,t(s,a))}}var e=0,o=0,i=0,n=-1,r=function(){return e},a=function(){return o},s=function(t){return t>=r()&&t<=a()},c=function(){l.columns.length&&(o=e+l.getRowBufferSize()-1)},d=function(t){return t-r()},u=function(){return l.getRowsAreaHeight()},f=function(){return l.getRowBufferSize()?l.getRowHeight():0},h=function(){var t=u(),i=f(),n=this.getColumnsScrollTop();return t<=i*(o-e+1)-n},p=function(e,o){if(l.columns.length&&s(e)){var i=d(e);i>=0&&i<l.getRowBufferSize()&&t(function(t){t.updateRowStyle(e,i,o,l.dataModel)})}},m=function(e,o){var i=d(e);t(function(t){t.moveRows4Insert(i,o)})},g=function(o,i){var n=0,r=l.getRowBufferSize(),a=d(o);a+i>=r&&(i=r-a);var s=i-(e+r-l.dataModel.getRowCount());return t(function(t){n=t.moveRows4Remove(a,i,s)}),n},v=function(e,o){t(function(t){t.moveRows4ScrollBottom(e,o)})},_=function(e){t(function(t){t.moveRows4ScrollTop(e)})},y=function(t){for(var e=l.columns.length,o=0;o<e;o++)l.columns[o].addRowsTop(t)},b=function(t){for(var e=l.columns.length,o=0;o<e;o++)l.columns[o].addRowsBottom(t)},x=function(t,e,o){if(!(e=e||f()))return 0;t=t||u(),void 0===o&&l.columns.length&&(o=l.columns[0].getScrollTop());var i=Math.ceil((t+o)/e);return l.dataModel.getRowCount()<i&&(i=l.dataModel.getRowCount()),i};return{clear:function(){e=0,o=0,i=0,n=-1},setScrollTop:function(t){t<0&&(t=0);var n=f(),r=u(),a=function(t,e,o){var i=t*e-o;return i<0&&(i=0),i}(l.dataModel.getRowCount(),n,r);if(t>a&&(t=a),t!==this.getScrollTop()&&(i=t,n&&r)){var s=Math.floor(t/n+.05),c=t-s*n;c<0&&(c=0);var d=-1,h=s-e,p=o-e+1,m=x(r,n,c);if(p<m&&-h>0){var g=m-p;y(g),e=s,g===-h?this.regetRows(e,-h):this.regetRows(e)}else{var b=o;if(this.fitRowsCount(m),!h&&b<o&&this.regetRows(b+1,o-b),b=o,o+=h,o>=l.dataModel.getRowCount()&&(o=l.dataModel.getRowCount()-1),e=s,Math.abs(h)<p/2)if(h>0){var w=o-b;d=o-w,o===l.dataModel.getRowCount()-1&&d--,v(h,w),h=void 0}else h<0&&(d=s,h=-h,_(h));else d=e,h=void 0;d>=0&&this.regetRows(d,h)}this.setColumnsScrollTop(c)}},getScrollTop:function(){return i},setColumnsScrollTop:function(t){this.columnsScrollTop=void 0,l.columns.forEach(function(e){e.setScrollTop(t)});var e=this.getColumnsScrollTop();this.columnsScrollTop=e,i+=e-t},getColumnsScrollTop:function(){if(void 0!==this.columnsScrollTop)return this.columnsScrollTop;var t=0;return l.columns.some(function(e){return e.getState()!==w.expanded&&(t=e.getScrollTop(),!0)}),t},updateCurrentRow:function(t){n=t},setCurrentRow:function(t,e){p(e),n=t,p(t,"idvcgrid_cell idvcgrid_selected_row")},getCurrentRow:function(){return n},getSelectionStyle:function(){return"idvcgrid_cell idvcgrid_selected_row"},insertRows:function(t,i){t<=this.getCurrentRow()&&(n+=i),h.call(this)?t<=o&&t+i>=e&&(t<e&&t+i>=e&&(i-=e-t,t=e),m(t,i),this.regetRows(t)):this.createRows(t,i)},createRows:function(t,e){if(l.dataModel){var o;void 0===t?t=r():t<=a()&&(o=d(t)),void 0===e&&(e=l.dataModel.getRowCount());var i,n=u();l.S.do(function(){l.S.forEach(l.columns,function(r){r&&(i=r.createRows(n,t,e,o,this.getCurrentRow(),this.getSelectionStyle(),l.dataModel,i))}.bind(this),L)}.bind(this)).do_(c)}},regetRows:function(e,o){if(l.dataModel){(void 0===e||e<r())&&(e=r());var i=a();void 0!==o&&e+o<i&&(i=e+o-1),i>=l.dataModel.getRowCount()&&(i=l.dataModel.getRowCount()-1);var n=d(e);t(function(t){t.regetRows(e,i,n,this.getCurrentRow(),this.getSelectionStyle(),l.dataModel)}.bind(this))}},removeRows:function(t,o){if(l.dataModel&&(l.getCurrentRow()>=t&&l.getCurrentRow()<t+o&&l.setCurrentRow(t-1),t<this.getCurrentRow()&&(n-=o),t<e&&t+o>=e&&(o-=e-t,t=e),s(t)&&l.columns.length>0)){var i=g(t,o);c(),i>0&&this.regetRows(t),this.refreshSize()}},updateRow:function(e){if(s(e)&&l.dataModel){var o=d(e);t(function(t){t.updateRow(e,o,this.getCurrentRow(),this.getSelectionStyle(),l.dataModel)}.bind(this))}},updateColumn:function(t){var e=l.getColumnByDataIndex(t);l.dataModel&&e&&e.updateColumn(r(),a(),this.getCurrentRow(),this.getSelectionStyle(),l.dataModel)},updateCell:function(t,e){if(s(t)){var o=l.getColumnByDataIndex(e);if(l.dataModel&&o){var i=d(t);o.updateRow(t,i,this.getCurrentRow(),this.getSelectionStyle(),l.dataModel)}}},refreshSize:function(){var t=x();if(t){var i=e+t;if(i>o&&i>=l.dataModel.getRowCount()&&(i=l.dataModel.getRowCount()-1),i>o){var n=i-o;b(n),o=i,this.regetRows(o-n+1,n)}}},getRowTop:function(t){return(t-=e)*f()},calcExpand:function(t,e){var o=i;if(e&&s(t)){var n=u(),r=f();e*r>=n?o=t*r:t+e>a()&&(o=(t+e+1)*r-n)}return o},fitRowsCount:function(t){t=t||x();for(var e=0,o=l.columns.length;e<o;e++)l.columns[e].fitRowsCount(t);c()},refreshRowsContent:function(){if(!(l.columns.length<=L)){var e=r(),o=a(),i=d(e);t(function(t){t.regetRows(e,o,i,this.getCurrentRow(),this.getSelectionStyle(),l.dataModel)}.bind(this),!0)}},getTopRow:r}}();var c=function(t,e,o){o.classList.remove("idvcgrid_tooltip_ellipsis"),o.style.height="",o.offsetWidth>.8*window.innerWidth&&(o.style.height="auto",o.style.width=Math.floor(.8*window.innerWidth)+"px");var i=window.getComputedStyle(o,null),n=parseInt(i.getPropertyValue("margin-left"),10),r=t;r<0?r=0:r+n+o.offsetWidth+6>document.documentElement.clientWidth+window.scrollX&&(r=document.documentElement.clientWidth+window.scrollX-o.offsetWidth-n-6);var a=parseInt(i.getPropertyValue("margin-top"),10),s=e;s<0&&(s=0),s+o.offsetHeight+a+2>document.documentElement.clientHeight+window.scrollY&&(s=document.documentElement.clientHeight+window.scrollY-o.offsetHeight-a-2)<3&&(s=0,o.style.height=document.documentElement.clientHeight-2*(parseInt(i.getPropertyValue("padding-top"),10)+2)+"px",o.classList.add("idvcgrid_tooltip_ellipsis")),o.style.left=r+"px",o.style.top=s+"px"},d={elem:null,tooltip:null,timer:null},u=function(){d.tooltip&&document.body.removeChild(d.tooltip),d.timer&&(window.clearTimeout(d.timer),d.timer=null),d.attrs&&delete d.attrs,d.tooltip=null,d.elem=null},f=function(){if(d.elem){var t=d.elem.innerHTML,e=0;if(l.dataModel&&l.dataModel.getCellLayout){var i=l.dataModel.getCellLayout(t);i&&(t=i.text,e=i.margin)}if(t.length){var n=o.getElementPos(d.elem);if(n.x+=e,!(n.x>m.x)){var r=o.getElementPos(l.area),a=d.elem.offsetWidth-e;n.x+a>window.innerWidth+window.scrollX&&(a=window.innerWidth+window.scrollX-n.x),n.x+a>r.x+l.area.clientWidth&&(a=r.x+l.area.clientWidth-n.x);var s=document.createElement("div");s.className=d.elem.className+" idvcgrid_popup",s.innerHTML=t,o.copyAppearance(s,window.getComputedStyle(d.elem,null)),document.body.appendChild(s),s.offsetWidth-1>a||r.x>n.x?(r.x>n.x&&(n.x=r.x),c(n.x,n.y,s),d.tooltip=s):document.body.removeChild(s)}}}},h=function(){var t=d.attrs;if(t&&t.text.length){var e={completed:!1};if(l.onShowTooltip.raise(t.x,t.y,t.text,t.row,t.col,d.elem,e),!e.completed){var i=document.createElement("div");i.className="idvcgrid_popup idvcgrid_tooltip",i.innerHTML=t.text,o.setFont(i,p(l.area)),document.body.appendChild(i),c(t.x,t.y,i),d.tooltip=i}}};this.area.onmouseout=u;var m={x:-1,y:-1},g={x:-1,columnIndex:-1,columnObj:void 0,isStarted:!1,isScrolling:!1,scrollingInterval:void 0,areaPos:void 0,scrollingInfo:{scrollingDelta:0},oldClassName:"",clear:function(){this.x=-1,this.columnIndex=-1,this.columnObj=void 0,this.isStarted=!1,this.isScrolling=!1,this.oldClassName="",this.scrollingInterval&&(clearInterval(this.scrollingInterval),this.scrollingInterval=void 0),this.areaPos=void 0,this.columns&&delete this.columns,this.maxX&&delete this.maxX,this.oldClientHeight&&delete this.oldClientHeight}};this.area.onmousemove=function(t){function e(e,o,i,n){d.elem=n,d.attrs={x:t.pageX,y:t.pageY,row:o,col:i,text:e},d.timer=window.setTimeout(h,350)}if(t=t||event,(t.pageX!==m.x||t.pageY!==m.y)&&(m.x=t.pageX,m.y=t.pageY,u(),!t.ctrlKey&&!t.shiftKey&&l.columns.length>0&&g.columnIndex<0)){var i=l.hitTest(t),r=i.row;if(-1===r){if(i.columnObj){var a=i.columnObj,s=o.getElementPos(a.area);!a.isLastColumn()&&l.isResizable(a.dataIndex)&&t.pageX-s.x>s.width-8?a.header.style.cursor="ew-resize":(a.header.style.cursor="default",l.dataModel.getColumnDescription&&e(l.dataModel.getColumnDescription(a.dataIndex),r,i.columnObj.dataIndex,a.header))}}else if(r>=0){var c,p;l.dataModel.getCellTooltip&&i.columnObj&&(c=l.dataModel.getCellTooltip(r,i.columnObj.dataIndex),p=n(t.target,"cell"),c&&e(c,r,i.columnObj.dataIndex,p)),c||(p=n(t.target,"cell"))&&(d.elem=p,d.timer=window.setTimeout(f,250))}}};var v=function(t){if(g.columnIndex>=0&&g.columnObj){var e=t.pageX-g.x;if(g.isStarted){t.preventDefault();var i=l.columns[g.columnIndex];if(i){var n=i.getColumnWidth();e=t.pageX-g.x,(g.maxX&&g.maxX>=t.pageX||!g.maxX)&&n+e>=30&&(l.setColumnWidth(g.columnIndex,Math.round(n+e)),g.x=t.pageX)}var r=function(t,e){var o=t-(e.x+e.width);return o>50?o=50:o<0&&(o=0),o}(t.pageX,g.areaPos);g.scrollingInfo.scrollingDelta=r,!g.isScrolling&&r>0?(g.isScrolling=!0,g.scrollingInterval=setInterval(function(t){var e=t.scrollingDelta;l.area.scrollLeft+=e,g.x-=e,o.dispatchMouseEvent({x:g.x+e},"mousemove",window)},100,g.scrollingInfo)):g.isScrolling&&!r&&(g.isScrolling=!1,clearInterval(g.scrollingInterval),g.scrollingInterval=void 0)}else if(Math.abs(e)>5&&(g.isStarted=!0,g.areaPos=o.getElementPos(l.area),y=document.createElement("div"),y.className="idvcgrid_global_cursor",document.body.appendChild(y),l.isColumnResizingConstrainedByGridWidth())){var a=o.getElementPos(l.area);g.maxX=a.x+a.width-20}}},_=function(){return!1},y=null,b=function t(){g.columnObj&&(g.columnObj.header.className=g.oldClassName);var e=g.isStarted;y&&(document.body.removeChild(y),y=null),window.removeEventListener("mousemove",v,!0),window.removeEventListener("mouseup",t,!0),window.removeEventListener("selectstart",_,!1),e&&(g.oldClientHeight!==l.area.clientHeight&&l.refreshLayout({height:!0}),l.raiseColumnChanges(!1)),g.clear()},x=function(t,e){e=e||l.columns;var o=l.getColumnByPageX(t,e),i=o.columnIndex;if(i>=0){var n=e[i];o.x>n.getColumnWidth()/2&&i++}else i=e.length;return i},C=function t(e){if(e=e||window.event,g.columnObj&&(g.columnObj.header.className=g.oldClassName),g.isStarted)if(l.columnsVisModel){var o=g.columnObj.visItem.getParent();o.moveChild(g.columnIndex,x(e.pageX,g.columns)),l.refreshColumns(),y=null}else l.moveColumn(g.columnIndex,x(e.pageX),!0);else l.clickColumnHeader(g.columnObj);g.clear(),y&&(l.area.removeChild(y.header),l.area.removeChild(y.pointer),y=null),window.removeEventListener("mousemove",S,!0),window.removeEventListener("mouseup",t,!0),window.removeEventListener("selectstart",_,!1)},S=function(t){if(t=t||window.event,g.columnObj){if(t.preventDefault(),!l.isMovable(g.columnObj.dataIndex))return;var e=t.pageX-g.x;if(g.isStarted){var i=parseInt(y.header.style.left,10);y.header.style.left=i+e+"px",g.x=t.pageX;var n,a=g.columns||l.columns,s=x(t.pageX,g.columns);s<0?y.pointer.style.left=y.pointer.offsetWidth/2+"px":s>=a.length?(n=a[a.length-1],y.pointer.style.left=n.area.offsetLeft+n.area.offsetWidth-y.pointer.offsetWidth/2+"px"):(n=a[s],y.pointer.style.left=n.area.offsetLeft-y.pointer.offsetWidth/2+"px");var c=function(){var t=0;return y&&y.header&&(y.header.offsetLeft+y.header.offsetWidth>l.area.scrollLeft+l.area.clientWidth?(t=y.header.offsetLeft+y.header.offsetWidth-l.area.scrollLeft-l.area.clientWidth,(t=Math.min(t,g.wholeWidth-l.area.scrollLeft-l.area.clientWidth))<0&&(t=0)):y.header.offsetLeft<l.area.scrollLeft&&l.area.scrollLeft>0&&(t=l.area.scrollLeft-y.header.offsetLeft,t=Math.min(t,l.area.scrollLeft),t=-t)),t};if(!y.isScrolling){if(0!==c()){y.isScrolling=!0;var d=setInterval(function(){var t=c();0!==t?(l.area.scrollLeft+=t,i=parseInt(y.header.style.left,10),y.header.style.left=i+t+"px",o.dispatchMouseEvent({x:g.x},"mousemove",window)):(clearInterval(d),y&&(y.isScrolling=!1))},200)}}}else if(Math.abs(e)>5){if(g.columnObj.visItem){g.columns=[];for(var u=g.columnObj.visItem.getParent(),f=u.getChildrenCount(),h=0;h<f;h++){var p=u.getChild(h);p&&p.isVisible()&&(p===g.columnObj.visItem&&(g.columnIndex=h),g.columns.push(p.column))}if(g.columns.length<=1)return void delete g.columns}g.isStarted=!0;var m=r(g.columnObj);l.area.appendChild(m.section);var v=document.createElement("div");v.className="idvcgrid_arrow_up",v.style.top=m.top+m.height+"px",v.style.left=m.left-v.offsetWidth/2+"px",l.area.appendChild(v),y={header:m.section,pointer:v}}}},P=function(t){if(t=t||event,l.columns.length>0){var e=l.hitTest(t),o=e.row;if(-1===o){if(e.columnObj&&0===t.button&&!t.ctrlKey&&!t.shiftKey){g.x=t.pageX;var i=e.columnObj;if(g.columnObj=i,g.columnIndex=l.columns.indexOf(i),g.oldClassName=i.header.className,t.preventDefault(),"ew-resize"===i.header.style.cursor){if(i.header.className+=" idvcgrid_header_section_hover",g.isStarted=!1,g.columnIndex<0){var n=i.getLastChild();n&&(g.columnIndex=l.columns.indexOf(n))}g.oldClientHeight=l.area.clientHeight,window.addEventListener("mousemove",v,!0),window.addEventListener("mouseup",b,!0),window.addEventListener("selectstart",_,!1)}else l.columns.length>0&&(g.isStarted=!1,g.wholeWidth=l.area.scrollWidth,l.isSortable(i.dataIndex)&&(i.header.className+=" idvcgrid_header_section_active"),l.columns.length>1&&window.addEventListener("mousemove",S,!0),window.addEventListener("mouseup",C,!0),window.addEventListener("selectstart",_,!1))}}else if(o>=0){if(0!==t.button&&l.isRowSelected(o))return;l.setCurrentRow(o,!1,{ctrl:t.ctrlKey,alt:t.altKey,shift:t.shiftKey,toggle:t.ctrlKey,isMouse:!0}),l.rowVisible(o)}}};this.area.addEventListener("mousedown",P,!1),this.area.addEventListener("mousewheel",a.bind(this,"wheelDelta",-.25,!1),!1),this.area.addEventListener("DOMMouseScroll",a.bind(this,"detail",30,!0),!1),this.area.ondblclick=function(t){if(t=t||event,!t.ctrlKey&&!t.shiftKey&&l.columns.length>0){var e=l.hitTest(t),o=e.row,i=e.columnObj;i&&-1===o&&"ew-resize"===i.header.style.cursor?(i=i.getLastChild(),l.fitColumnOptimalWidth(l.columns.indexOf(i),i.getMaxAutoSizeWidth()),l.raiseColumnChanges(!1)):l.onDblClick.raise(o,i?i.dataIndex:-1,s(o))}},this.area.oncontextmenu=function(t){if(t=t||event,!t.ctrlKey&&!t.shiftKey&&l.columns.length>0){var e=l.hitTest(t),o=e.row,i=e.columnObj,n={stopPropagation:!0};l.onContextMenu.raise(o,i?i.dataIndex:-1,n,s(o),t.pageX,t.pageY,t),l.onContextMenu._subscribers.length&&n.stopPropagation&&t.stopPropagation()}},this.area.onselectstart=function(){return!1},this.area.onkeydown=function(t){var e={ctrl:t.ctrlKey,alt:t.altKey,shift:t.shiftKey,toggle:32===t.keyCode};33===t.keyCode?(l.currentPgUp(e),t.preventDefault()):34===t.keyCode?(l.currentPgDown(e),t.preventDefault()):35===t.keyCode?(l.currentEnd(e),t.preventDefault()):36===t.keyCode?(l.currentHome(e),t.preventDefault()):38===t.keyCode?(l.currentUp(e),t.preventDefault()):40===t.keyCode?(l.currentDown(e),t.preventDefault()):13===t.keyCode?l.getCurrentRow()>=0&&l.onDblClick.raise(l.getCurrentRow()):32===t.keyCode?l.setCurrentRow(l.getCurrentRow(),!1,e):65===t.keyCode&&(t.ctrlKey||t.metaKey)&&(e.all=!0,l.setCurrentRow(l.getCurrentRow(),!1,e),t.preventDefault())},this.area.onfocus=function(){this.processSetFocus(!0)}.bind(this),this.area.onblur=function(){l.processLostFocus(!0)},this.area.onscroll=function(){this.fitCentralColumnHeader(),this.visibleColumnsRange=void 0,this._viewport.refreshRowsContent(),"moz"===o.Consts.engine&&(this.hoverEnableAsync||(this.hoverEnableAsync=o.createAsyncCall(o.enableHover,void 0,250)),o.disableHover(this.area),this.hoverEnableAsync.call(this.area))}.bind(this)}function g(t){var e;if(t){var o=t.parentElement;o&&((e=o.columnObj)||(e=g(o)))}return e}function v(t,e){if(this.dataModel&&t){var o={state:e||t.getState(),width:300,height:t.getHeaderHeight()||this.headerLevelHeight,levelHeight:this.headerLevelHeight};t.setCaption(this.dataModel.getColumnCaption(t.dataIndex,o))}}function _(t,e){function i(t){t&&!t.height||(n.gridBody._sizes={},n.gridBody._viewport.refreshSize(),n._vertScroll.isVisible()&&Math.floor(n.gridBody.getScrollTop())!==Math.floor(n._vertScroll.getScrollTop())&&n._vertScroll.setScrollTop(n.gridBody.getScrollTop()),n.recalcScroll())}this._parent=o.getDomElement(t),this._vertScroll=new r(this._parent),this.gridBody=new m(this._parent,e),this.gridBody.scrolling=this._vertScroll,this._vertScroll.addScrolled(this.gridBody),this.gridBody.onRefreshScroll=this.recalcScroll.bind(this),this.gridBody.area.idvcGridObject=this;var n=this;this._parent.refreshSize=i,this.windowResizeListener=o.addWindowResizeListener(this._parent)}function y(t,e){if(t){e=e||function(){};for(var o=t.getChildrenCount(),i=0;i<o;i++){var n=t.getChild(i);e(n),y(n,e)}}}function b(t){return"number"==typeof t?t+"px":t}function x(){function t(e,o,i,n){var r,a=[],s=b(i),l=n,c=!0,d=!1,u=!1;return{getParent:function(){return o},getChildrenCount:function(){return a.length},getChild:function(t){return a[t]},addChild:function(e,o,i){i=i||w.expanded;var n=t(e,this,o,i);return a.push(n),n},getDataIndex:function(){return e},getWidth:function(){return s||"0"},setWidth:function(t){s=b(t)},getMaxAutoSizeWidth:function(){return r},setMaxAutoSizeWidth:function(t){r=t},getState:function(){return this.getChildrenCount()?l:w.simple},setState:function(t){l=t},setVisible:function(t){c=t},isVisible:function(){return c},setAutoSize:function(t){d=t},isAutoSize:function(){return d},ignoreHeaderForAutoSize:function(t){return void 0!==t&&(u=!!t),u},moveChild:function(t,e){var o=a.splice(t,1)[0];o&&(e>t&&e--,a.splice(e,0,o))},isLeaf:function(){return l===w.collapsed||!this.getChildrenCount()}}}var o=t(-1,void 0,void 0,w.expanded);return o.onChange=e.create(),o}r.prototype.setScrollSize=function(t,e){var o=this.scrollBody.getBoundingClientRect().height;if(o>0){var i=this.toArea(this.scrollBody.scrollTop);t<=1e7?(this.scrolledCoef=e/o,this.scrollSize.style.height=this.fromArea(t)+"px"):(this.scrolledCoef=(t-e)/(1e7-o),this.scrollSize.style.height=1e7+"px"),this.scrollBody.scrollTop=this.fromArea(i)}},r.prototype.toArea=function(t){return t*this.scrolledCoef},r.prototype.fromArea=function(t){return t/this.scrolledCoef},r.prototype.updateColumnsScrollTop=function(t){this.scrolled.forEach(function(e){e._updateColumnsScrollTop(t)})},r.prototype.addScrolled=function(t){this.scrolled.push(t)},r.prototype.removeExternalScrolled=function(t){this.scrolled.splice(1,Number.MAX_VALUE)},r.prototype.setScrollTop=function(t){this.scrollBody.scrollTop=this.fromArea(t)},r.prototype.getScrollTop=function(){return this.toArea(this.scrollBody.scrollTop)},r.prototype.hide=function(){return this.scrollBody.style.display="none"},r.prototype.show=function(){return this.scrollBody.style.display="block"},r.prototype.isVisible=function(){return"none"!==this.scrollBody.style.display};var w={collapsed:"+",expanded:"-",simple:" "};s.prototype.setState=function(t){if(t){t===w.simple||this.expandCollapse||(this.expandCollapse=document.createElement("div"),this.header.appendChild(this.expandCollapse),this.header.classList.add("idvcgrid_header_expand_collapse"),this.expandCollapse.onmousedown=function(t){t.stopPropagation()},this.expandCollapse.onmouseup=this.expandCollapse.onmousedown,this.expandCollapse.onclick=function(t){t.stopPropagation();var e=this.visItem;if(e){var o=e.getState();o=o===w.expanded?w.collapsed:w.expanded,this.setState(o)}this.onExpandColumn&&this.onExpandColumn(this)}.bind(this)),t===w.simple&&this.expandCollapse&&(this.header.removeChild(this.expandCollapse),delete this.expandCollapse,this.header.classList.remove("idvcgrid_header_expand_collapse"));var e;this.expandCollapse&&(e="idvcgrid_expand_collapse_column",t===w.expanded?e+=" idvcgrid_expanded_column":e+=" idvcgrid_collapsed_column",this.expandCollapse.className=e);var o=this.visItem;o&&o.setState(t),e="idvcgrid_column",o&&!o.isLeaf()&&(e+=" idvcgrid_inactive_column"),this.area.className=e,this.resetLayout()}},s.prototype.getState=function(){var t=w.simple;return this.expandCollapse&&(this.expandCollapse.classList.contains("idvcgrid_expanded_column")?t=w.expanded:this.expandCollapse.classList.contains("idvcgrid_collapsed_column")&&(t=w.collapsed)),t},s.prototype.hide=function(){if(this.canBeHidden()){var t=this.visItem;t&&t.setVisible(!1)}},s.prototype.canBeHidden=function(){var t=this.visItem;if(t){var e=t.getParent();if(e){for(var o=0,i=e.getChildrenCount()-1;i>=0;i--){e.getChild(i).isVisible()&&o++}return o>1}}return!1},s.prototype.resetLayout=function(){this._columnLayout&&this.setLayout(this._columnLayout)};var C=[["scrollArea","cells"],["header","header"],["area","column"],["footer","footer"]];s.prototype.setLayout=function(t){function e(t,e){if(e){Object.getOwnPropertyNames(e).forEach(function(o){"className"!==o?t.style[o]=e[o]:t.classList.add(e.className)})}}function o(t,e){if(e){Object.getOwnPropertyNames(e).forEach(function(o){"className"!==o?t.style[o]="":t.classList.remove(e.className)})}}function i(t){t&&C.forEach(function(e){t(this[e[0]],this._columnLayout[e[1]])}.bind(this))}this._columnLayout&&i.call(this,o),t?(this._columnLayout=t,i.call(this,e),t.width&&(this.area.style.width=t.width),t.textAlign&&(this.scrollArea.style.textAlign=t.textAlign,this.footer.style.textAlign=t.textAlign)):this._columnLayout&&delete this._columnLayout},s.prototype.setCaption=function(t){this.header.innerHTML=t,this.expandCollapse&&this.header.appendChild(this.expandCollapse)},s.prototype.setSortable=function(t){t?o.removeClass(this.header,"idvc_grid_notsortable"):o.addClass(this.header,"idvc_grid_notsortable")},s.prototype.setScrollTop=function(t){this.scrollArea.scrollTop!==t&&(this.scrollArea.scrollTop=t)},s.prototype.getScrollTop=function(){return this.scrollArea.scrollTop},s.prototype.getColumnWidth=function(){return this.area.offsetWidth},s.prototype.setTop=function(t){this._columnTop=t,this.area.style.top=t+"px"},s.prototype.getTop=function(){return this._columnTop||0},s.prototype.setHeaderHeight=function(t){this._columnHeaderHeight=t;var e=this.header;e.style.boxSizing="border-box",e.style.height=t+"px"},s.prototype.getHeaderHeight=function(){return this._columnHeaderHeight||(this._columnHeaderHeight=this.header.getBoundingClientRect().height),this._columnHeaderHeight},s.prototype.getRowBufferSize=function(){return this.scrollArea.children.length},s.prototype.prepare4OptimalWidth=function(t){var e=o.Consts.browserPrefix+"max-content";this.scrollArea.style.width=e,t=l.call(this,t),t||(this.header.style.width=e),this._prepared4OptimalWidth=!0},s.prototype.cleanUp4OptimalWidth=function(t){t=l.call(this,t),t||(this.header.style.width=null),this.scrollArea.style.width=null,this._prepared4OptimalWidth&&delete this._prepared4OptimalWidth},s.prototype.getOptimalWidth=function(t,e){if(this._columnOptimalWidth)return this._columnOptimalWidth;t=t||o.em2px(1.25,this.area),e=l.call(this,e);var i=0;return this._prepared4OptimalWidth||(this.prepare4OptimalWidth(e),delete this._prepared4OptimalWidth),e||(i=this.header.offsetWidth),i=Math.max(this.scrollArea.offsetWidth,i),this._prepared4OptimalWidth||this.cleanUp4OptimalWidth(e),this._columnOptimalWidth=Math.round(i+t),this._columnOptimalWidth},s.prototype.clearRows=function(){this.area.removeChild(this.scrollArea),this.scrollArea=document.createElement("div"),this.scrollArea.className="idvcgrid_column_scrolled",this.area.appendChild(this.scrollArea),this.resetLayout()},s.prototype.setLastColumnStyle=function(){var t=this.area.style;t.minWidth=t.width,t.width="auto",t.right="0"},s.prototype.isLastColumn=function(){return"auto"===this.area.style.width},s.prototype.clearLastColumnStyle=function(){if(this.isLastColumn()){var t=this.area.style;t.width=t.minWidth,t.minWidth="20px",t.right="auto"}},s.prototype.getRowsViewHeight=function(){return this.scrollArea.offsetHeight},s.prototype.getRowsViewStart=function(){return this._scrollAreaTop||this.scrollArea.offsetTop},s.prototype.getRowHeight=function(){return this._rowHeight||this.scrollArea.children[0].getBoundingClientRect().height},s.prototype.updateRowStyle=function(t,e,o,i){var n=void 0!==o;o=o||"";var r=c(n,o,t,this.dataIndex,i),a=this.scrollArea.children[e];a&&(a.className=r)},s.prototype.moveRows4Insert=function(t,e){for(var o=this.scrollArea,i=o.children.length-1,n=0;n<e;n++){var r=o.removeChild(o.children[i]);r.className="idvcgrid_cell",o.insertBefore(r,o.children[t])}},s.prototype.moveRows4Remove=function(t,e,o){for(var i=0,n=this.scrollArea,r=0;r<e;r++){var a=n.removeChild(n.children[t]);r<o&&(n.appendChild(a),i++)}return i},s.prototype.moveRows4ScrollBottom=function(t,e){for(var o=this.scrollArea,i=0;i<t;i++){var n=o.removeChild(o.children[0]);i<e&&o.appendChild(n)}},s.prototype.moveRows4ScrollTop=function(t){for(var e=this.scrollArea,o=0;o<t;o++){var i=e.removeChild(e.children[e.children.length-1]);e.insertBefore(i,e.children[0])}},s.prototype.addRowsTop=function(t){for(var e=this.scrollArea,o=0;o<t;o++){var i=document.createElement("div");e.insertBefore(i,e.children[0])}},s.prototype.addRowsBottom=function(t){for(var e=this.scrollArea,o=0;o<t;o++){var i=document.createElement("div");e.appendChild(i)}},s.prototype.fitChildrenCount=function(t){for(var e=this.scrollArea,o=e.children.length-t,i=0;i<o;i++)e.removeChild(e.lastChild)},s.prototype.fitRowsCount=function(t){var e=this.getRowBufferSize();t>e?this.addRowsBottom(t-e):t<e&&this.fitChildrenCount(t)},s.prototype.createRows=function(t,e,o,i,n,r,a,s){if(this._columnOptimalWidth&&delete this._columnOptimalWidth,a){var l=null;void 0!==i&&(l=this.scrollArea.children[i]);var c=this.scrollArea.children.length,d=a.getRowCount();c+o>d&&(o=d-c);for(var f=Math.min(e+o,d),h=e;h<f;h++){var p=document.createElement("div");if(u(p,h,this.dataIndex,h===n,r,a),l?this.scrollArea.insertBefore(p,l):this.scrollArea.appendChild(p),s||(s=p.getBoundingClientRect().height),-(t-=s)>s)break}}return this._rowHeight=s,s},s.prototype.updateFooter=function(t){t&&t.getFooter&&(this.footer.innerHTML=t.getFooter(this.dataIndex))},s.prototype.regetRows=function(t,e,o,i,n,r){if(this._columnOptimalWidth&&delete this._columnOptimalWidth,r)for(var a=o,s=t;s<=e;s++,a++){var l=this.scrollArea.children[a];u(l,s,this.dataIndex,s===i,n,r)}},s.prototype.updateRow=function(t,e,o,i,n){if(this._columnOptimalWidth&&delete this._columnOptimalWidth,n){u(this.scrollArea.children[e],t,this.dataIndex,t===o,i,n)}},s.prototype.updateLayout=function(t){var e=null;t&&t.getColumnLayout&&(e=t.getColumnLayout(this.dataIndex)),this.setLayout(e)},s.prototype.updateColumn=function(t,e,o,i,n){this.updateLayout(n),n&&(this.regetRows(t,e,0,o,i,n),this.updateFooter(n))},s.prototype.setWidth=function(t,e,o){var i=this.area.style.width;if("%"===i.charAt(i.length-1)){i=100*t/this.area.parentElement.offsetWidth+"%"}else i=t+"px";this.isLastColumn()?this.area.style.minWidth=i:this.area.style.width=i;var n=this.visItem;n&&n.getState()!==w.expanded?(e?this.scrollArea.children.length&&(n.isOptimalWidth=!0):n.isOptimalWidth&&delete n.isOptimalWidth,n.setAutoSize(e),n.setWidth(i)):n||(e?this.scrollArea.children.length&&(this.isOptimalWidth=!0):this.isOptimalWidth&&delete this.isOptimalWidth),o||this.fitParent()},s.prototype.setIsOptimalWidth=function(){if(this.scrollArea.children.length){var t=this.visItem;t&&t.getState()!==w.expanded?t.isOptimalWidth=!0:t||(this.isOptimalWidth=!0)}},s.prototype.setMaxAutoSizeWidth=function(t){"number"==typeof t?this._maxWidth=t:delete this._maxWidth},s.prototype.getMaxAutoSizeWidth=function(){var t=this._maxWidth;if(!t&&this.visItem){var e=this.visItem.getMaxAutoSizeWidth();"string"==typeof e?t=e.endsWith("em")?o.em2px(parseInt(e),this.scrollArea):parseInt(e):"number"==typeof e&&(t=e),t&&this.setMaxAutoSizeWidth(t)}return t},s.prototype.setScrollAreaTop=function(t){this.scrollArea.style.top=t+"px",this._scrollAreaTop=t},s.prototype.setLeft=function(t,e){this.area.style.left=t+"px",this._columnLeft=t,e||this.fitParent()},s.prototype.getLeft=function(){return this._columnLeft||this.area.offsetLeft},s.prototype.move=function(t){var e=this.area.offsetLeft;this.setLeft(e+t)},s.prototype.getParentColumn=function(){var t;if(this.visItem){var e=this.visItem.getParent();e&&(t=e.column)}return t},s.prototype.getLastChild=function(){var t=this,e=this.visItem;if(e&&!e.isLeaf()){var o=f(e);o&&(t=o.column.getLastChild())}return t},s.prototype.getFirstChild=function(){var t=this,e=this.visItem;if(e&&!e.isLeaf()){var o=h(e);o&&(t=o.column.getFirstChild())}return t},s.prototype.fitParent=function(){var t=this.visItem;if(t){var e=t.getParent();if(e){var o=e.column;if(o){if(h(e)===t){var i=this.getLeft(),n=o.getLeft();o.move(i-n)}if(f(e)===t){var r=this.getLeft()+this.getColumnWidth(),a=o.getColumnWidth(),s=o.getLeft()+a,l=r-s;o.setWidth(a+l)}}}}},m.prototype.hitTest=function(t){var e=-1,i=g(t.target);if(i&&this.getRowsAreaHeight()){var r=o.getElementPos(i.scrollArea);if(r.height||r.width){var a=t.pageY-r.y;if(a>r.height)e=-2;else if(a>0){var s=n(t.target,"cell");if(s){e=0;for(var l=s;l=l.previousSibling;)e++;e+=this._viewport.getTopRow()}else e=-3}}else e=-1}else i||(e=-3);return{row:e,columnObj:i}},m.prototype.getColumnByPageX=function(t,e){e=e||this.columns;var i,n=-1,r=e.length;if(r)for(var a=o.getElementPos(this.area),s=t-a.x+this.area.scrollLeft-e[0].area.offsetLeft,l=0;l<r;l++)if((s-=e[l].getColumnWidth())<=0){n=l,i=e[l],s=e[l].getColumnWidth()+s;break}return{columnIndex:n,x:s,columnObj:i}},m.prototype._isActive=function(){return this.columns.length>0},m.prototype._updateScrollTop=function(t){t!==this.getScrollTop()&&(this._viewport.setScrollTop(t),this.isCentralColumn()&&this.fitcentralColumnAsync.call())},m.prototype._updateColumnsScrollTop=function(t){this._viewport.setColumnsScrollTop(t)},m.prototype._getScrollState=function(){return{columnScrollTop:this._viewport.getColumnsScrollTop(),topRow:this._viewport.getTopRow()}},m.prototype.setScrollTop=function(t){t!==this.getScrollTop()&&this.scrolling.setScrollTop(t)},m.prototype.getScrollTop=function(){return this._viewport.getScrollTop()},m.prototype.clearView=function(){this.setScrollTop(0),o.removeAllChildren(this.area),this.columns.length=0,this.inActiveColumns.length=0,this._viewport.clear()},m.prototype.clearRows=function(t){this.setScrollTop(0);for(var e=0,o=this.columns.length;e<o;e++)this.columns[e].clearRows();this._viewport.clear(),void 0===t?this._viewport.updateCurrentRow(-1):this._viewport.updateCurrentRow(t)},m.prototype.refreshDataModel=function(){this.dataModel&&void 0!==this.dataModel.setElement&&this.dataModel.setElement(this)},m.prototype.refreshRows=function(t,e){void 0!==e&&this.dataModel&&this.dataModel.getRowCount()===e?(this._viewport.regetRows(),this.setCurrentRow(t)):(this.clearRows(t),this._viewport.createRows()),this.refreshDataModel()},m.prototype.refreshView=function(){o.removeAllChildren(this.area),this.columns.length=0,this.inActiveColumns.length=0,this.updateView()},m.prototype.refreshColumns=function(){var t=this.area.scrollLeft,e=this._viewport.getColumnsScrollTop();this.S.do_(this.refreshView.bind(this)).do_(function(){this.area.scrollLeft=t,this.scrolling.updateColumnsScrollTop(e),this.raiseColumnChanges(!0)}.bind(this))},m.prototype.raiseColumnChanges=function(t){this.columnsVisModel&&this.columnsVisModel.onChange&&this.columnsVisModel.onChange.raise(t)},m.prototype.processExpandColumn=function(t){this.refreshColumns(),this.onExpandColumn.raise(t.dataIndex,t.visItem.getState())},m.prototype.refreshScroll=function(){this.onRefreshScroll&&this.onRefreshScroll()},m.prototype.updateView=function(){if(!this.area.offsetParent)return void(this._needRefreshView=!0);this._sizes={},this.dataModel&&this.S.do_(this.insertColumns.bind(this)).do_(this._viewport.createRows.bind(this._viewport)).do(function(){this.refreshDataModel(),this.updateFooter(),this.isCentralColumn()?(this.fitCentralColumnWidth(),this.S.end()):this.applyColumnAutoSize()}.bind(this)).do_(this.refreshScroll.bind(this))},m.prototype.insertColumns=function(){function t(t,e,o){if(!l){var i=new s(this.area,t,e);return this.isSortable(t)||i.setSortable(!1),i.updateLayout(this.dataModel),o?this.columns.push(i):this.inActiveColumns.push(i),i}}function e(t,o,i,n,r,s,c){function d(t,l){if(!f()){for(var c=t,d=l.getChildrenCount();c<d;){if(f())return;var h=l.getChild(c);if(h&&h.isVisible()&&(u+=i.call(this,h,o)||0,a++,!h.isLeaf())){var p=e.call(this,h,o+1,i,n,r,s);n.call(this,h,p)}if(c++,0===o&&a>=L&&c<d-1){if(r.call(this),a=0,this.S.nextStep(e.bind(this,l,0,i,n,r,s,c)),f())return;break}}0===o&&c>=d&&(s.call(this),this.S.end())}}i=i||function(){},n=n||function(){},r=r||function(){},s=s||function(){},c=c||0;var u=0,f=function(){var t=!1;return this.S.canceled()&&(l=!0,this.S.end(),t=!0),t}.bind(this);return d.call(this,c,t),u}function o(o){a=0,e.call(this,o,0,function(e){var o=e.isLeaf(),i=e.getState(),n=t.call(this,e.getDataIndex(),i,o);if(a++,n.visItem=e,e.column=n,n.setState(i),n.onExpandColumn=this.processExpandColumn.bind(this),o){var r=e.getWidth();r&&(n.area.style.width=r)}})}function i(t){a=0,e.call(this,t,0,function(t){v.call(this,t.column,t.getState())})}function n(t){a=0;var o=new Map;e.call(this,t,0,function(t,e){var i=0;0===e?o.clear():i=o.get(e-1);var n=t.column,r={},a=n.header,s=a.getBoundingClientRect();r.headerPosTop=s.top,r.headerPosHeight=s.height,c.levelHeight||(c.levelHeight=s.height,this.headerLevelHeight=c.levelHeight);var l=n.getRowsViewStart();if(r.scrollTopDelta=this.keepScrollAreaOffset?l-s.height:0,t.getHeight){var d=t.getHeight();d>1&&(r.headerPosHeight=d*c.levelHeight,r.customHeaderPosHeight=r.headerPosHeight)}i+=r.headerPosHeight;var u=o.get(e);(!u||u<i)&&o.set(e,i),c.headerBottom<i+1&&(c.headerBottom=i+1,c.scrollTop=c.headerBottom+r.scrollTopDelta),t.isLeaf()&&(r.columnWidth=n.getColumnWidth()),t.calculatedPos=r})}function r(t){a=0;var o=new Map,i=0;e.call(this,t,0,function(t,e){var n=0;0===e?o.clear():n=o.get(e);var r=t.column,a=t.calculatedPos;o.set(e+1,n+a.headerPosHeight),r.setTop(n),r.setLeft(i,!0),t.calculatedPos.customHeaderPosHeight&&r.setHeaderHeight(a.customHeaderPosHeight);var s=0;return a.columnWidth&&(s=a.columnWidth,i+=a.columnWidth),delete t.calculatedPos,s},function(t,e){t.column.area.style.width=e+"px"},function(){this.fitHeaderHeight(c)},function(){this.fitHeaderHeight(c)})}var a=0,l=!1,c={headerBottom:0,scrollTop:0,levelHeight:0};if(this.dataModel){var d=this.dataModel.getColumnCount();this.S.do_(function(){if(this.columnsVisModel)this.S.do(o.bind(this,this.columnsVisModel)).do(n.bind(this,this.columnsVisModel)).do(r.bind(this,this.columnsVisModel)).do(i.bind(this,this.columnsVisModel));else{for(var e,a=0;a<d;a++){var s=a;this.dataModel.getDataIndex&&(s=this.dataModel.getDataIndex(s));var l=t.call(this,s,w.simple,!0);e||(e=l.getHeaderHeight(),this.headerLevelHeight=e),l.setHeaderHeight(e)}for(this.fitColumns(),this.fitHeaderHeight(),a=0,len=this.columns.length;a<len;a++)v.call(this,this.columns[a],w.simple)}}.bind(this)).do_(function(){var t=this.columns.length;t>=1&&this.isLastColumnExpanded()&&this.columns[t-1].setLastColumnStyle()}.bind(this))}},m.prototype.fitColumns=function(){if(!this.columnsVisModel){var t=this.columns.length;if(t){var e,o=0;this.keepScrollAreaOffset||(e=this.columns[0].getHeaderHeight());var i=[];i.length=t;for(var n=0;n<t;n++)i[n]=this.columns[n].getColumnWidth();for(n=0;n<t;n++){var r=this.columns[n];r.setLeft(o),o+=i[n],void 0!==e&&r.setScrollAreaTop(e)}}}};var L=200;return m.prototype.applyColumnAutoSize=function(t){t=t||this.columns;var e=0,o=!1;this.S.forEach(t,function(t,e){t&&t.prepare4OptimalWidth()}.bind(this),L);var i=[];i.length=t.length,this.S.forEach(t,function(t,e){if(t){var o=t.visItem;if((!o||!o.isAutoSize()&&parseInt(o.getWidth())||o.isOptimalWidth)&&(o||t.isOptimalWidth)||this.dataModel&&this.dataModel.beforeColumnAutoSize&&!this.dataModel.beforeColumnAutoSize(t.dataIndex))i[e]=-t.getColumnWidth();else{var n=t.getOptimalWidth();n=Math.ceil(Math.min(n,t.getMaxAutoSizeWidth()||n)),i[e]=n}}}.bind(this),L),this.S.forEach(t,function(t,e){t&&t.cleanUp4OptimalWidth()}.bind(this),L);var e=0;this.S.forEach(t,function(t,n){if(t){t.setLeft(e,!0);var r=i[n];r>0&&(t.setWidth(r,!0,!0),o=!0),e+=Math.abs(r)}}.bind(this),L),this.S.forEach(t,function(t,e){t&&t.fitParent()}.bind(this),L),o&&(this._sizes={})},m.prototype.fitHeaderHeight=function(t,e){if(this._sizes={},this.columns.length){if(t){this._sizes.headerBottom=t.headerBottom;for(var o=0,i=this.columns.length;o<i;o++){var n=this.columns[o],r=n.getTop();n.setHeaderHeight(t.headerBottom-r),n.setScrollAreaTop(t.scrollTop-r)}t.levelHeight&&!this.headerLevelHeight&&(this.headerLevelHeight=t.levelHeight)}this.isCentralColumn()&&this.updateColumnCaption(0),this.refreshScroll(),this._viewport.refreshSize(),e||this.onFitHeaderHeight.raise(t,!0)}},m.prototype.fitExpand=function(t,e){if(e){var o=this._viewport.calcExpand(t,e);this.setScrollTop(o)}},m.prototype.getColumnByDataIndex=function(t,e){function o(e){return e.dataIndex===t&&(i=e,!0)}var i=this.columns[t];return i&&i.dataIndex===t||(i=null,this.columns.some(o),!i&&e&&this.inActiveColumns.some(o)),i},m.prototype.updateCells=function(t){t.length||this._viewport.regetRows(),t.forEach(function(t){t&&(void 0===t.col?this._viewport.updateRow(t.row):void 0===t.row?this._viewport.updateColumn(t.col):-1===t.row?this.updateColumnCaption(t.col):this._viewport.updateCell(t.row,t.col))}.bind(this))},m.prototype.updateColumnCaption=function(t){var e=this.getColumnByDataIndex(t,!0);e&&v.call(this,e)},m.prototype.getSelectionStyle=function(){return"idvcgrid_cell idvcgrid_selected_row"},m.prototype.setCurrentRow=function(t,e,o){if(!isNaN(t)){var i=function(t){var e=!1,o=this.getCurrentRow();return o!==t&&(this._viewport.setCurrentRow(t,o),e=!0),e}.bind(this);this.dataModel&&this.dataModel.setCurrentRow&&(i=function(t,o){var i=!1;return this._viewport.updateCurrentRow(t),e||(i=this.dataModel.setCurrentRow(t,o)),i}.bind(this)),i(t,o)&&!e&&(this.currentChangeAsync.call(t,o),this.connectedBody&&this.connectedBody.setCurrentRow(t,!0,o,this))}},m.prototype.getCurrentRow=function(){return this.dataModel&&this.dataModel.getCurrentRow?this.dataModel.getCurrentRow():this._viewport.getCurrentRow()},m.prototype.isRowSelected=function(t){return this.dataModel&&this.dataModel.isRowSelected?this.dataModel.isRowSelected(t):this._viewport.getCurrentRow()===t},m.prototype.processSetFocus=function(t){this.area.classList.add("idvcgrid_focused"),this.connectedBody&&t&&this.connectedBody.processSetFocus(!1,this),t&&this.onSetFocus.raise()},m.prototype.processLostFocus=function(t){this.area.classList.remove("idvcgrid_focused"),this.connectedBody&&t&&this.connectedBody.processLostFocus(!1,this),t&&this.onLostFocus.raise()},m.prototype.getVisibleColumnsRange=function(){if(this.visibleColumnsRange)return this.visibleColumnsRange;var t=-1,e=-1,o=this.columns.length;if(o){for(var i=-this.area.scrollLeft,n=this.area.offsetWidth,r=0;r<o;r++)if((i+=this.columns[r].getColumnWidth())>0){t=r;break}if(i>=n)e=t;else{for(r=t+1;r<o;r++)if((i+=this.columns[r].getColumnWidth())>=n){e=r;break}e<0&&(e=o-1)}}return this.visibleColumnsRange={first:t,last:e},this.visibleColumnsRange},m.prototype.getVisibleRowsRange=function(){var t=this.getRowsAreaHeight(),e=this.getRowHeight(),o=this.getScrollTop();return{first:Math.ceil(o/e),last:Math.floor((o+t)/e+.2)-1}},m.prototype.isRowVisible=function(t){var e=this.getVisibleRowsRange();return t>=e.first&&t<=e.last},m.prototype.getRowPos=function(t){var e=0,o=this.getVisibleRowsRange();return t<o.first?e=-1:t>o.last&&(e=1),e},m.prototype.currentToVisibleTop=function(){this.rowVisibleTop(this.getCurrentRow())},m.prototype.currentToVisibleBottom=function(){this.rowVisibleBottom(this.getCurrentRow())},m.prototype.currentToVisibleCenter=function(t){this.rowVisibleCenter(this.getCurrentRow(),t)},m.prototype.rowVisibleTop=function(t){var e=t*this.getRowHeight();e<0&&(e=0),e!=this.getScrollTop()&&this.setScrollTop(e)},m.prototype.rowVisibleBottom=function(t){var e=this.getRowsAreaHeight(),o=(t+1)*this.getRowHeight()-e;o!=this.getScrollTop()&&this.setScrollTop(o)},m.prototype.rowVisibleCenter=function(t,e){if(e||!this.isRowVisible(t)){var o=this.getRowsAreaHeight(),i=(t+1)*this.getRowHeight()-o/2;i!==this.getScrollTop()&&this.setScrollTop(i)}},m.prototype.columnToVisible=function(t,e){function i(t,e){var o=this.area,i=o.scrollLeft,n=o.clientWidth,r=i;e>r+n&&(r=e-n),t<r&&(r=t),r!==i&&(this.area.scrollLeft=r)}function n(t){t=t||{};var e={left:t.left||0,width:t.width||0,useScrollLeft:t.useScrollLeft||!1,contentWidth:t.contentWidth||0},i=o.em2px(.5,this.area);return t.left&&(e.left-=i,e.left<0&&(e.left=0)),t.left&&(i+=t.left-e.left),e.width&&(e.width+=i),e}var r=this.getColumnByDataIndex(t,!0);if(!r)return!1;r=r.getFirstChild();var a=0,s=0;this.columns.some(function(t){return t!==r?(a+=t.getColumnWidth(),!1):(s=a+t.getColumnWidth(),!0)});var l=function(t,e){if(!t||!t.useScrollLeft)return t;var o=t.contentWidth||0,i=t.left;return i&&o&&o>e&&(o-i>=e?t.left=0:(t.left-=o-e,t.left<0&&(t.left=0))),t}(n.call(this,e),s-a),c=l.left,d=c+l.width;return d&&(s=Math.min(s,a+d)),i.call(this,a+c,s),!0},m.prototype.currentRowVisible=function(){this.rowVisible(this.getCurrentRow())},m.prototype.rowVisible=function(t){var e=this.getRowPos(t);e<0?this.rowVisibleTop(t):e>0&&this.rowVisibleBottom(t)},m.prototype.currentUp=function(t){var e=this.getCurrentRow()-1;e>=0&&(this.setCurrentRow(e,!1,t),this.rowVisible(e))},m.prototype.currentDown=function(t){var e=this.getCurrentRow()+1;this.dataModel&&e<=this.dataModel.getRowCount()-1&&(this.setCurrentRow(e,!1,t),this.rowVisible(e))},m.prototype.getPageRowCount=function(){var t=this.getRowsAreaHeight();return Math.floor(t/this.getRowHeight())},m.prototype.currentPgUp=function(t){if(this.getCurrentRow()>0){var e=this.getCurrentRow()-this.getPageRowCount();e<0&&(e=0),this.setCurrentRow(e,!1,t),this.rowVisible(e)}},m.prototype.currentPgDown=function(t){if(this.dataModel&&this.getCurrentRow()<this.dataModel.getRowCount()-1){var e=this.getCurrentRow()+this.getPageRowCount();e>=this.dataModel.getRowCount()&&(e=this.dataModel.getRowCount()-1),this.setCurrentRow(e,!1,t),this.rowVisible(e)}},m.prototype.currentHome=function(t){this.getCurrentRow()>0&&(this.setCurrentRow(0,!1,t),this.rowVisibleTop(0))},m.prototype.currentEnd=function(t){var e=this.dataModel.getRowCount()-1;this.dataModel&&this.getCurrentRow()<e&&(this.setCurrentRow(e,!1,t),this.rowVisibleBottom(e))},m.prototype.getRowHeight=function(){return void 0!==this._sizes.rowHeight?this._sizes.rowHeight:this.getRowBufferSize()?(this._sizes.rowHeight=this.columns[0].getRowHeight(),this._sizes.rowHeight):1},m.prototype.getRowTop=function(t){return this._viewport.getRowTop(t)},m.prototype.getViewHeight=function(){return this.columns.length?this.getRowsAreaHeight():1},m.prototype.getRowBufferSize=function(){return this.columns.length>0?this.columns[0].getRowBufferSize():0},m.prototype.getHeaderHeight=function(){return this.columns.length>0?this.columns[0].getHeaderHeight():0},m.prototype.getRowsAreaStart=function(){if(this.columns.length>0){var t=o.getElementPos(this.columns[0].scrollArea),e=o.getElementPos(this.area);return t.y-e.y}return 0},m.prototype.getRowsAreaHeight=function(){return void 0!==this._sizes.rowsAreaHeight?this._sizes.rowsAreaHeight:this.columns.length>0?(this._sizes.rowsAreaHeight=this.columns[0].getRowsViewHeight(),this._sizes.rowsAreaHeight):0},m.prototype.setColumnWidth=function(t,e,o){if(!(this.onSetColumnWidth&&this.onSetColumnWidth(t,e)||e<20)){var i=this.columns[t];if(i){var n=i.getColumnWidth();if(e!==n){i.setWidth(e,o),this._sizes={},e=i.getColumnWidth();for(var r=e-n,a=t+1,s=this.columns.length;a<s;a++)this.columns[a].move(r);this.onChangeColumnWidth.raise(t,e)}else o&&i.setIsOptimalWidth()}}},m.prototype.getColumnWidth=function(t){var e=this.columns[t];return e?e.getColumnWidth():0},m.prototype.getColumnOptimalWidth=function(t){var e=this.columns[t];return e?e.getOptimalWidth():0},m.prototype.fitColumnOptimalWidth=function(t,e){var o=this.columns[t];if(o){var i=o.getOptimalWidth();e&&i>e&&(i=e),this.setColumnWidth(t,i,!0)}},m.prototype.isCentralColumn=function(){return 1===this.columns.length&&this.columns[0].isLastColumn()},m.prototype.fitCentralColumnWidth=function(){if(this.isCentralColumn()){var t=this.columns[0],e=t.getOptimalWidth(1,!0);t.setWidth(e),this._sizes={},this.fitCentralColumnHeader()}},m.prototype.fitLastColumn=function(){var t=this.columns;this.isLastColumnExpanded()&&t.length&&t[t.length-1].fitParent()},m.prototype.isSortable=function(t){return!this.dataModel||!this.dataModel.isColumnSortable||this.dataModel.isColumnSortable(t)},m.prototype.isMovable=function(t){return!this.dataModel||!this.dataModel.isColumnMovable||this.dataModel.isColumnMovable(t)},m.prototype.isResizable=function(t){return!this.dataModel||!this.dataModel.isColumnResizable||this.dataModel.isColumnResizable(t)},m.prototype.clickColumnHeader=function(t){if(this.dataModel&&this.dataModel.onSortColumn&&t&&this.isSortable(t.dataIndex)){this.dataModel.onSortColumn(t.dataIndex,this.getCurrentRow())&&this.currentToVisibleCenter()}},m.prototype.moveColumn=function(t,e,o){var i=t===this.columns.length-1||e>=this.columns.length;if(!(t===e||this.columns.length<2||t<e&&t===this.columns.length-1)&&(e>this.columns.length?e=this.columns.length:e<0&&(e=0),t<e&&e--,t!==e)){var n=this.columns[t];if(n){i&&this.isLastColumnExpanded()&&this.columns[this.columns.length-1].clearLastColumnStyle();for(var r=n.getColumnWidth(),a=t>e?r:-r,s=t>e?-1:1,l=0,c=t+s;c!==e+s;c+=s)l+=this.columns[c].getColumnWidth();l=t>e?-l:l;var d=this,u=function(){for(var o=t+s;o!==e+s;o+=s)d.columns[o].setLeft(d.columns[o].getLeft()+a,!0);d.columns[t].setLeft(d.columns[t].getLeft()+l,!0),d.columns.splice(t,1),d.columns.splice(e,0,n),i&&d.isLastColumnExpanded()&&d.columns[d.columns.length-1].setLastColumnStyle()};if(o)var f=0,h=Math.floor(a/9),p=Math.floor(l/9),m=setInterval(function(){for(var o=t+s;o!==e+s;o+=s)d.columns[o].setLeft(d.columns[o].getLeft()+h,!0);d.columns[t].setLeft(d.columns[t].getLeft()+p,!0),a-=h,l-=p,8===++f&&(clearInterval(m),u())},10);else u()}}},m.prototype.getColumnsInfo=function(){return this.columns.map(function(t){return{index:t.dataIndex,width:t.area.style.width}})},m.prototype.updateFooter=function(){for(var t=0,e=this.columns.length;t<e;t++)this.columns[t].updateFooter(this.dataModel)},m.prototype.fitCentralColumnHeader=function(){var t=this.area;if(this.isCentralColumn()){var e=this.columns[0],o=parseInt(e.header.style.paddingLeft),i=parseInt(e.header.style.paddingRight);if(!(t.scrollWidth<=t.clientWidth&&o===i)){e.header.style.paddingLeft="0px",e.footer.style.paddingLeft="0px",e.header.style.paddingRight="0px",e.footer.style.paddingRight="0px";var n=4+t.scrollLeft+"px",r=t.scrollWidth-t.scrollLeft-t.clientWidth;r<0&&(r=0);var a=4+r+"px";e.header.style.paddingLeft=n,e.footer.style.paddingLeft=n,e.header.style.paddingRight=a,e.footer.style.paddingRight=a}}},m.prototype.expandLastColumn=function(t){this._expandLastColumn=t},m.prototype.isLastColumnExpanded=function(){return this._expandLastColumn},m.prototype.refreshLayout=function(t){t=t||{width:!0,height:!0};var e=this.area.idvcGridObject._parent;o.refreshSize(e,t)},m.prototype.setColumnResizingConstrainedByGridWidth=function(t){t?this._isColumnResizingConstrainedByGridWidth=!0:delete this._isColumnResizingConstrainedByGridWidth},m.prototype.isColumnResizingConstrainedByGridWidth=function(){return!!this._isColumnResizingConstrainedByGridWidth},m.prototype.hideTooltip=function(){this.area.onmouseout&&this.area.onmouseout()},_.prototype.destroy=function(){this.setDataModel(void 0,void 0),this.windowResizeListener.remove(),delete this.windowResizeListener,delete this.gridBody.area.idvcGridObject},_.prototype.updateView=function(){this.gridBody.S.cancel().do_(this.gridBody.updateView.bind(this.gridBody))},_.prototype.processDataChanges=function(t){var e=!0;t&&void 0!==t.count&&void 0!==t.start?(t.count>0?this.gridBody._viewport.insertRows(t.start,t.count):this.gridBody._viewport.removeRows(t.start,-t.count),this.recalcScroll()):Array.isArray(t)?(this.gridBody.updateCells(t),e=!1):!t||void 0===t.currentRow&&void 0===t.rowCount?!t||void 0===t.regetStart&&void 0===t.regetCount?(this.gridBody.clearView(),this.updateView()):(t.rowCountChanged&&this.gridBody._viewport.fitRowsCount(),this.gridBody._viewport.regetRows(t.regetStart,t.regetCount),t.rowCountChanged&&this.recalcScroll()):(this.gridBody.refreshRows(t.currentRow,t.rowCount),this.recalcScroll()),e&&this.gridBody.isCentralColumn()&&setTimeout(this.gridBody.fitCentralColumnWidth.bind(this.gridBody),0)},_.prototype.recalcScroll=function(){var t=this._vertScroll.scrollBody,e=!1,i=this.gridBody.dataModel?this.gridBody.dataModel.getRowCount():0;if(i){var n=this.gridBody.getRowHeight();if(n>1){var r=i*n,a=this.gridBody.getRowsAreaHeight();if(this._vertScroll.setScrollSize(r,a),r>a){if(void 0===t.style||void 0===t.style.display||"none"!==t.style.display){t.style.visibility="visible",t.style.width="2em";var s=t.offsetWidth-t.clientWidth;s<=1&&(s=16);var l=this.gridBody.area.offsetHeight-this.gridBody.area.clientHeight;l<0&&(l=0),"webkit"===o.Consts.engine&&s++,t.style.width=s+"px",this.gridBody.area.style.right=s+"px",t.style.bottom=l+"px",this._vertScroll.setScrollSize(r,a),e=!0}}else t.style.visibility="hidden",this.gridBody.area.style.right="0px",e=!0}}else t.style.visibility="hidden",this.gridBody.area.style.right="0px",e=!0;e&&this.gridBody.fitLastColumn()},_.prototype.setDataModel=function(t,e){var o=this.gridBody.dataModel;o&&(void 0!==o.setElement&&o.setElement(null),this.gridBody.clearView(),o.changed.unsubscribe(this,this.processDataChanges)),this.gridBody.dataModel=t,this.gridBody.columnsVisModel=e,t&&(t.changed.subscribe(this,this.processDataChanges),this.updateView())},_.prototype.setCurrentRow=function(t){this.gridBody.setCurrentRow(t)},_.prototype.getCurrentRow=function(){return this.gridBody.getCurrentRow()},_.prototype.hideVertScroll=function(){this._vertScroll.hide(),this.gridBody.area.style.right="0px"},_.prototype.showVertScroll=function(){this._vertScroll.show(),this.gridBody.area.style.right=""},_.prototype.isVertScrollVisible=function(){return this._vertScroll.isVisible()},_.prototype.setHorzScrollType=function(t){this.gridBody.area.style.overflowX=t},_.prototype.hideHeader=function(){o.addClass(this.gridBody.area,"idvcgrid_hidden_header")},_.prototype.showFooter=function(){o.addClass(this.gridBody.area,"idvcgrid_visible_footer"),o.refreshSize(this._parent,{height:!0})},_.prototype.hideFooter=function(){o.removeClass(this.gridBody.area,"idvcgrid_visible_footer"),o.refreshSize(this._parent,{height:!0})},_.prototype.updateFooter=function(){this.gridBody.updateFooter()},_.prototype.getColumnByDataIndex=function(t,e){return this.gridBody.getColumnByDataIndex(t,e)},_.prototype.hideColumn=function(t){var e=this.getColumnByDataIndex(t,!0);e&&(e.hide(),this.gridBody.refreshColumns())},_.prototype.canColumnBeHidden=function(t){var e=this.getColumnByDataIndex(t,!0);return!!e&&e.canBeHidden()},_.prototype.hideTooltip=function(){this.gridBody.hideTooltip()},_.prototype.showAllColumns=function(){y(this.gridBody.columnsVisModel,function(t){t&&!t.isVisible()&&t.setVisible(!0)}),this.gridBody.refreshColumns()},_.prototype.getInvisibleColumnsCount=function(){var t=0;return y(this.gridBody.columnsVisModel,function(e){e&&!e.isVisible()&&t++}),t},_.prototype.getColumnsInfo=function(){return this.gridBody.getColumnsInfo()},_.prototype.columnToVisible=function(t,e){this.gridBody.columnToVisible(t,e)},_.prototype.getRowCount=function(){var t=this.gridBody.dataModel;return t&&t.getRowCount?t.getRowCount():0},{create:function(t,e){return new _(t,e)},loadCSS:i,HeaderItemState:w,createHeaderVisModel:x}}.apply(e,n),n=[g,h,u,v,b,x,p],w=function(t,e,o,i,n,r,a){function s(){this._columnCount=1,this._rowCount=100,this.changed=a.create()}var l=[];s.prototype.getColumnCount=function(){return this._columnCount},s.prototype.getRowCount=function(){return l.length||0},s.prototype.getColumnCaption=function(){return""},s.prototype.getCell=function(t,o){var i="";if(t>=0&&t<l.length){var r=l[t].loop,i=r.name,a=r.locat;i&&"["!==i[0]&&a&&(i+=" at "+a);var s=r.rooflinePoint;if(s&&!r.filtered){var c=l[t].backgroundColor;if(!c){if(!(c=s.el.getAttr("data-color"))){c=window.getComputedStyle(s.el.el,null).getPropertyValue("fill"),-1!==c.indexOf("url")&&(c="lightgray")}l[t].backgroundColor=c}c||(c="lightgray");i={innerHTML:i,style:{backgroundImage:n.getPointIcon(e.getPointConstructor(r.resIndex)||n.CirclePoint,c)}}}}return i},s.prototype.getCellStyle=function(t,e,o,i,n){var r;if(i>=0&&i<l.length&&(r=l[i])&&r.loop&&r.loop.rooflinePoint){var a=r.loop.rooflinePoint.el;if(a&&a.isHidden()||r.loop.filtered)return o+" "+(t?e+" ":" ")+"hidden_loop"}},s.prototype.toString=function(){return"[object DataModel]"};var c,d=new s;return{create:function(e,n,a,s){c=r.create(e,"0"),c.hideHeader(),c.setDataModel(d),"function"==typeof n&&c.gridBody.onChangeCurrentRow.subscribe(this,function(t){if(this.processFill)return void delete this.processFill;n(l[t].loop)}),"function"==typeof a&&c.gridBody.onDblClick.subscribe(this,function(t){a(l[t].loop)}),"function"==typeof s&&c.gridBody.onContextMenu.subscribe(this,function(t,e,n,r,a,c,d){var u=[];if(t>=0){var f=l[t].loop;f&&f.state&&u.push({caption:"-"===f.state?o.getMessage("roofline_menu_collapse"):o.getMessage("roofline_menu_expand"),id:1,command:s.bind(this,f)})}n.stopPropagation=!1,i.show(u,a,c),i.defProcessing(d)}),t.onChangeSettings.subscribe(this,function(t){"colorMode"!==t&&"defLoopColor"!==t&&"nstLoopColor"!==t&&"loopsThs"!==t||this.refresh()})},fill:function(t){if(this.currentLoop!==t){for(this.currentLoop=t,l=[];t;)l.unshift({loop:t}),t=e.getParent(t);l.length&&"Total"===l[0].loop.name&&l.shift(),d.changed.raise(),this.processFill=!0,c.gridBody.setCurrentRow(l.length-1),c.gridBody.currentToVisibleBottom()}},refresh:function(t){t&&t!==this.currentLoop&&!l.some(function(e){return e.loop===t})||(l.forEach(function(t){t&&t.backgroundColor&&delete t.backgroundColor}),setTimeout(function(){d.changed.raise({regetStart:0,regetCount:l.length})},10))}}}.apply(e,n),n=[p],C=function(t){return function(){var e={};return{send:function(t,o){var i=e[t];i&&i.raise(o)},recv:function(o,i,n){var r=e[o];r||(r=t.create(),e[o]=r),r.subscribe(n,i)}}}()}.apply(e,n),n=[s],L=function(t){function e(t){if(!Array.isArray(t))return"";var e=Array.isArray(t.classes)?t.classes:[];e.push("idvcgrid_cell_items_container");var o='<div class="'+e.join(" ")+'">';return t.forEach(function(t){var e=Array.isArray(t.classes)?t.classes:[];e.push("idvcgrid_cell_item");var i="";t.color&&(i="color:"+t.color+";"),o+='<span class="'+e.join(" ")+'" style="'+i+"width: "+t.width+';"></span>'}),o+="</div>"}function o(t,e){if(void 0===t||null===t)return"";var o=t;return e&&(o='<span class="idvcgrid_cell_text" style="width: '+e+'">'+t+"</span>"),o}function i(t,o){if(""===t)return t;t>100&&(t=99.9999);var i=t;void 0!==o&&(i=(+t).toFixed(o));var n='<span class="idvcgrid_cell_text">'+i+"%</span>";if(t>0){n+=e([{color:"rgb("+Math.floor(t/100*255)+", 0, "+Math.floor((100-t)/100*255)+")",width:i+"%"}])}return n}function n(t,o,i){if(""===t)return t;if(t>0){var n=t;if("number"==typeof i?n=(+t).toFixed(i):"function"==typeof i&&(n=i(t)),o){var r=255;2*t<o&&(r=Math.floor(2*t/o*255));var a="rgb("+r+","+(255-r)+",0)",s=Math.floor(t/o*100);return s>6?n+e([{color:a,width:s+"%"}]):n}return n}return"0"}function r(t,i,n){return'<div class="idvcgrid_cell_content_container">'+o(t,i)+e(n)+"</div>"}function a(t,e){return e?function(t){for(var e=["b","Kb ","Mb ","Gb"],o="",i=e.length,n=0;n<i&&t>0;n++){var r=Math.floor(t/1024);o=(t-1024*r).toFixed(0)+e[n]+o,t=r}return o.length||(o="0b"),o}(t):function(t){for(var e=["b","Kb","Mb","Gb"],o="0b",i=e.length,n=0;n<i&&t>1;n++)t>1&&(o=t.toFixed(n>0?3:0)+e[n]),t/=1024;return o}(t)}function s(t){return t.toFixed(0)/1e3+"s"}function l(t,e){var o,i="";return t.indexOf("idvcgrid_column_sorting")<0&&(void 0!==e.sortingWait?o="idvcgrid_column_sorting idvcgrid_sorting_waiting":void 0!==e.sortingForward&&(o="idvcgrid_column_sorting",e.sortingForward||(o+=" idvcgrid_sorting_backward")),o&&(i='<span class="'+o+'"></span>')),t+i}function c(t,e){var o="",i="";return e&&e.levelHeight&&e.height<1.5*e.levelHeight&&(i=' style="white-space: nowrap;"'),o='<span class="idvcgrid_header_section_text"'+i+">"+t+"</span>",o=l(o,e)}function d(t){if(!Array.isArray(t))return"";var e=["idvcgrid_header_legend"].concat(t.classes).join(" "),o='<div class="'+e+'">';return t.forEach(function(t){var e=["idvcgrid_legend_color"].concat(t.colorClasses).join(" "),i=["idvcgrid_legend_text"].concat(t.textClasses).join(" ");o+='<span class="'+e+'" style="color: '+t.color+';"></span><span class="'+i+'">'+t.text+"</span>"}),o+="</div>"}function u(t,e){return'<div class="idvcgrid_header_container"><div class="idvcgrid_header_caption">'+t+"</div>"+d(e)+"</div>"}function f(t){switch(t){case w.collapsed:return" idvcgrid_collapsed";case w.expanded:return" idvcgrid_expanded";case w.simple:return" idvcgrid_empty";case w.waiting:return" idvcgrid_waiting";default:return""}}function h(t,e,o){var i=t;o=o||{};var n=o.className||"idvcgrid_search_str",r=void 0!==o.currentIndex?o.currentIndex:-1,a=o.currentClassName||"idvcgrid_current_search_str",s="g";o.ignoreCase&&(s+="i");var l=0;return e&&(i=i.toString().replace(new RegExp(function(t){return t.replace(/[.*+?^=!:${}()\-[\]|\/\\]/g,"\\$&")}(e),s),function(t){var e=n;return l===r&&(e=a),l++,'<span class="'+e+'">'+t+"</span>"})),i}function p(t,e,o){var i=t;if(e.length){o=o||{};var n,r=o.className||"idvcgrid_search_str",a=void 0!==o.currentIndex?o.currentIndex:-1,s=o.currentClassName||"idvcgrid_current_search_str";a>=0&&(n=e[a]);for(var l=e.length-1;l>=0;l--){var c=r,d=e[l];n===d&&(c=s);i=i.slice(0,d.start)+'<span class="'+c+'">'+i.slice(d.start,d.end)+"</span>"+i.slice(d.end)}}return i}function m(){if(!x){x="1em";t:for(var t in document.styleSheets){var e=document.styleSheets[t];if(e){var o=e.cssRules||e.rules;for(var i in o){var n=o[i];if(n.selectorText&&".expand_collapse"===n.selectorText&&n.style.left){x=n.style.left;break t}}}}}return x}function g(t){var e;if(t){var o=document.createElement("div");o.className="idvcgrid_expand_collapse idvcgrid_collapsed",o.style.marginLeft=m(),o.style.position="absolute",o.style.left="0",t.appendChild(o),e={offset:o.offsetLeft,width:o.offsetWidth},t.removeChild(o)}return e}function v(e){return e?t.Consts.browserPrefix+"calc("+e+"*"+m()+")":"0"}function _(t,e,o){return e===w.none?"":'<span class="idvcgrid_widget idvcgrid_expand_collapse'+f(e)+'" onclick="event.stopPropagation();" ondblclick="event.preventDefault();" id="'+t+'" style="margin-left: '+v(o)+'" data-hierarchical-level='+o+"></span>"}function y(t,e,o){return'<span class="idvcgrid_widget idvcgrid_more_text" onclick="event.stopPropagation();" ondblclick="event.preventDefault();" id="'+e+'" style="margin-left: '+v(o)+'">'+t+"</span>"}function b(e,o,i){var n={text:e,margin:0};if(e.indexOf("idvcgrid_expand_collapse",0)>=0&&o){var r=e.indexOf("margin-left: ")+"margin-left: ".length,a=e.indexOf(")",r)+1,s=a>r?e.slice(r,a):"0";r=e.indexOf(">",r)+1,r=e.indexOf(">",r)+1;var l=e.slice(r),c=e.indexOf('class="')+'class="'.length,d=e.indexOf('"',c),u=e.slice(c,d);u=u.replace("idvcgrid_expanded","idvcgrid_collapsed");var f=document.createElement("div");f.className=u,f.style.marginLeft=s,f.style.position="absolute",f.style.left="0",o.appendChild(f);var h=window.getComputedStyle(f,null),p=f.getBoundingClientRect(),m=o.getBoundingClientRect(),g=p.left+p.width+parseFloat(h.getPropertyValue("margin-right"))-m.left;o.removeChild(f),n={text:l,margin:g}}if(i){n.search=[];var v=document.createElement("div");v.innerHTML=n.text,v.style.position="absolute",v.style.whiteSpace="pre",v.style.left="0",o.appendChild(v);var _=t.getElementPos(v).x;n.contentWidth=v.scrollWidth+n.margin;var y=v.querySelectorAll("span");[].forEach.call(y,function(e){if(e.className.indexOf("_search_str")>=0){var o=t.getElementPos(e);n.search.push({left:o.x-_+n.margin,width:o.width})}}),o.removeChild(v)}return n}var x,w={collapsed:"+",expanded:"-",simple:" ",waiting:"w",none:""},C=function(){var t={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;"};return function(e){return"string"==typeof e?e.replace(/[<>&"]/g,function(e){return t[e]}):e}}(),L=function(){var t={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"'};return function(e){return"string"==typeof e?e.replace(/\&[a-z]{2,4};/gi,function(e){return t[e]||e}):e}}();return{RowState:w,decoratePercent:i,decorateValue:n,decorateValueEx:r,decorateMemorySize:a,decorateTime:s,addSortingIndicator:l,decorateCaption:c,buildHeaderWithLegend:u,escapeHTML:C,unEscapeHTML:L,getLevelSize:g,getExpandWidgetStyle:f,decorateSearchStr:h,decorateSearchPositions:p,decorateExpand:_,decorateMore:y,getContentLayout:b}}.apply(e,n),n=[],S=function(){function t(t){var e=t.rooflinePoint;return{x:e.getX(),y:e.getY()}}function e(t,e){return t.rooflinePoint.calcLineEndPoint(e.x,e.y)}function o(o,i,n){var r=t(o),a=e(i,r);return r=e(o,a),n?[a,r]:[r,a]}function i(t,e){e&&e.setPointFront(t)}function n(t){if(t){var e=t.split(" ");if(e.length>0){var o=e[0];return e.length>1&&-1!==e[1].indexOf("L1")&&(o="L1"),o}}return"L1"}return{getLoopPoints:o,setLoopPointFront:i,getLoopMemoryLevel:n}}.apply(e,n),n=[g,l,d,h,w,c,u,v,C,s,L,y,b,S],P=function(t,e,o,i,n,r,a,s,l,c,d,u,f,h){function p(t){return void 0===t?H:t}function m(t,e){var o={isValid:!1,isNew:!0};if(!t||!e)return o;var i=e.style.backgroundColor.toLowerCase();e.style.backgroundColor="",e.style.backgroundColor=t;var n=e.style.backgroundColor.toLowerCase();return i===n?(o.isValid=!0,o.isNew=!1):o.isValid=!!n,o.isValid||(e.style.backgroundColor=i),o}function g(){var t=c.getElementById("roofline_content"),e=c.getElementById(D),o=c.getElementById("roofline_settings"),i=p(B.getState().colorMode);0!==i?(t.classList.add("use_loops_colors"),o.classList.add("use_loops_colors")):(t.classList.remove("use_loops_colors"),o.classList.remove("use_loops_colors")),1===i?e.classList.add("set_weight_colors"):e.classList.remove("set_weight_colors")}function v(){T&&(g(),V.fillPatterns(),T.points.forEach(function(t){var e=t.loopData;if(e){var o=V.getLoopInfo(e),i=o.getRadius();t.setR(i),V.fillLoop(t,o)}}))}function _(t){return Y||(Y=c.getElementPos(T.centralPart.body)),{x:t.pageX-Y.x,y:t.pageY-Y.y}}function y(t,e,o){var i,n=_(o);i=O?{x:O.x,y:O.y}:T.tr.P2L(n.x,n.y),o[t]*e<0?E.zoomIn(2,i):E.zoomOut(2,i)}function b(t){var e="";return t&&i.getResultCount()>1&&(e=a.getMessage("roofline_compare_tooltip_result_label")+" "+N+i.getResultCaption(t.resIndex||0)+W),e}function x(t){var e=t.desc;return e||(e=d.escapeHTML(t.name))&&"["!==e.charAt(0)&&(e+=" "+(t.locat||"")),e||(e=t.locat),N+e+W}function w(t,o,i){return isNaN(o)||!t?"":t[i.name]+e.pref+function(t,e){return e?e(t):t}(o,i.format)+e.post+t[i.measure]}function C(t,o){var n="";return t&&void 0!==t.x&&(o&&o.namePref&&(n+=o.namePref),n+=i.getMemoryLevelPrefix(t,o)+w(o,t.x,{name:"nameX",measure:"measureX",format:e.formatVal})+"<br>"),n}function L(t,o){var i="";return t&&void 0!==t.y&&(o&&o.namePref&&(i+=o.namePref),i+=w(o,t.y,{name:"nameY",measure:"measureY",format:e.formatVal})+"<br>"),i}function S(t,o){var n="";return t&&void 0!==t.x1&&(o&&o.namePref1&&(n+=o.namePref1),n+=i.getMemoryLevelPrefix(t,o)+w(o,t.x1,{name:"nameX",measure:"measureX",format:e.formatVal})+"<br>"),n}function P(t,o){var i="";return t&&void 0!==t.y1&&(o&&o.namePref1&&(i+=o.namePref1),i+=w(o,t.y1,{name:"nameY",measure:"measureY",format:e.formatVal})+"<br>"),i}function k(t,e){if(e&&e.loopTypes&&t&&t.type){var o=e.loopTypes[t.type];if(o)return o+"<br>"}return""}function R(t,e,o,i){var n=c.getDomElement(t),a=c.getDomElement(e);if(n&&a)return a.style.backgroundColor=i,n.oninput=function(t){var e=t.target.value,s=m(e,a);!e||s.isValid?(s.isNew&&(B.save(o),a.style.backgroundColor=e||i,v()),r.markNormal(n)):r.markWrong(n,"The value should be empty or a valid CSS color")},n.onblur=function(t){var e=t.target.value,o=m(e,a);e&&o.isValid||(n.value=i,r.markNormal(n))},r.addColorPicker(n,function(t,e){return!!t}),B.addProcessor(o,{apply:function(t){if(t){var e=i,r=t[o];void 0!==r&&(e=r),n.value=e,a.style.backgroundColor=e}},saveState:function(t){var e=t[o],r=n.value;r!==e&&(r&&r!==i?t[o]=r:e&&delete t[o])}})}var T,E,M,z,I=1,A={},D="loops_table_body",B=t.get(),X=function(){function t(){for(var t=i.getResultCount()||1,e=0,o=0;o<t;o++){var n=i.getMaxSelfTime(o),r=i.getTotalTime(o);r&&(e=Math.max(e,n/r))}return e}function e(){var t=0,e=i.getMaxMaxSelfTime(),o=i.getMaxTotalTime();return o&&(t=e/o),t}function o(o){n===e!=!!o&&(o?(this.getTotalTime=i.getMaxTotalTime.bind(i),n=e):(this.getTotalTime=i.getTotalTime.bind(i),n=t),v())}var n=t;return{getTotalTime:i.getTotalTime.bind(i),getMaxHistogramPercent:function(){var t=Math.ceil(100*n());return t>100&&(t=100),t},useMaxProgramTotalTime:function(t){o.call(this,t),B.save("progTime")},apply:function(t){t.useMaxProgramTotalTime&&o.call(this,!0)},saveState:function(t){t&&(n===e?t.useMaxProgramTotalTime=!0:delete t.useMaxProgramTotalTime)}}}();B.addProcessor("progTime",X);var H=1,V=function(){function t(t){return c.round(t,at)}function e(){return Math.max(nt,1)}function _(){if(!nt)if(nt=X.getMaxHistogramPercent()){rt=c.round(2*nt/c.em2px(23),2)||.01;var t=.1;for(at=0;;){if(rt>t){rt=10*t;break}t/=10,at++}}else nt=100,rt=1,at=0}function b(t){var e=void 0!==t.selfElapsedTime?t.selfElapsedTime:t.selfTime;return void 0===e&&(e=0),e}function x(t){var e=c.round(b(t)/X.getTotalTime(t.resIndex)*100,at);return e<rt?e=rt:e>100&&(e=100),e}function w(e){if(e){var o=x(e),i=t(o-rt);void 0===ot[i]&&(ot[i]=0),ot[i]++,it++}}function C(e){if(e){var o=x(e),i=t(o-rt);ot[i]--,it--}}function L(){function t(t,e){return Math.ceil(t/X.getTotalTime(e)*100)}var e=[];i.forEachLoops(i.getLoops(),function(t){e.push({selfTime:b(t)})},!1),e.sort(function(t,e){return e.selfTime-t.selfTime});var o=it,n=Math.floor(.03*o)||1;n>5&&(n=5);var r=Math.floor(.25*o)||1;tt=[];var a=20;a>=nt&&(a=nt-10*rt);var s=1;if(s>=a&&(s=a/2),o>3&&i.getMaxSelfTime()){var l=e[n];a=t(l.selfTime,l.resIndex)||.5;var c=e[n+r];s=t(c.selfTime,c.resIndex)||.1,s>a&&(s=a/2)}tt.push({th:s,radius:Math.round(4*I),color:"green"}),tt.push({th:a,radius:Math.round(6*I),color:"yellow"}),tt.push({radius:Math.round(8*I),color:"red"})}function S(t){var e=B.getState();return t&&!et&&(et=e.loopsThs?JSON.parse(JSON.stringify(e.loopsThs)):[]),t&&!e.loopsThs&&(e.loopsThs=JSON.parse(JSON.stringify(tt))),t&&(M.disabled=!1,z.disabled=!1),tt||L(),e.loopsThs||tt}function P(t,e){function o(t,e){e=e||!1,t&&i.forEachChildrenEx(t,function(t){t&&t.rooflinePoint&&(e?(t.rooflinePoint.show(),w(t)):(t.rooflinePoint.hide(),st.isConnectedTo(t)&&(N(t),W(t),st.hide()),C(t)))})}function r(t,e){t&&(this.fillLoop(t,e),st.isConnectedTo(t.loopData)&&this.highlightPoint(t))}if(!i.isFiltered()&&t&&t.rooflinePoint){h.setLoopPointFront(t.rooflinePoint,T);var a=this.getLoopInfo(t);"+"===t.state?(t.state="-",o(t,!0)):"-"===t.state&&(o(t,!1),t.state="+"),t.state&&(this.fillHistogramChart(),i.saveHierarchy(),n.refresh(t));var s=this.getLoopInfo(t),l=a.getX(),d=s.getX(),u=a.getY(),f=s.getY(),p=a.getRadius(),m=s.getRadius();if(l!==d||u!==f){N(t),W(t),st.setIgnored(!0),st.hide(!0);c.animate(function(e){var o=e/700;o>1&&(o=1);var i=l+(d-l)*o,n=u+(f-u)*o,r=p+(m-p)*o,a=T.tr.L2P(i,n);return t.rooflinePoint.move(a.x,a.y).setR(r),o<1},function(){st.setIgnored(!1),r.call(this,t.rooflinePoint,s)}.bind(this))}else r.call(this,t.rooflinePoint,s);e||E.addUndoFrame({process:P.bind(this,t,!0)})}}function k(){st.create(function(t){var e=t.target.owner.rooflineLoop;e&&P.call(this,e)}.bind(this))}function R(){var t=10*I/(window.devicePixelRatio||1);return{x:Math.abs(T.tr.getMaxIntens()-T.tr.getMinIntens())*t/T.tr._getClientWidth(),y:Math.abs(T.tr.getMaxPerf()-T.tr.getMinPerf())*t/T.tr._getClientHeight()}}function H(t,e,o){this.line=T.centralPart.graphicsRoot.addLine(t[0].x,t[0].y,t[1].x,t[1].y,o),this.line.setStyle(e.head+":"+this.line.localUrl(e.id))}function V(t){t&&i.forEachChildren(t,function(e){t.rooflineConnectedChildren||(t.rooflineConnectedChildren=[]),h.setLoopPointFront(e.rooflinePoint,T);var o=new H(h.getLoopPoints(t,e),{id:lt,head:"marker-end"},"roofline_child_line");t.rooflineConnectedChildren.push({loop:e,line:o})},R())}function Y(t){if(t){var e=i.getParent(t,R());if(e){h.setLoopPointFront(e.rooflinePoint,T);var o=new H(h.getLoopPoints(t,e,!0),{id:ct,head:"marker-start"},"roofline_parent_line");t.rooflineConnectedParent={loop:e,line:o}}}}function N(t){t&&t.rooflineConnectedChildren&&(t.rooflineConnectedChildren.forEach(function(t){return t.line.remove()}),delete t.rooflineConnectedChildren)}function W(t){t&&t.rooflineConnectedParent&&(t.rooflineConnectedParent.line.remove(),delete t.rooflineConnectedParent)}function F(t){if(!i.isFiltered()&&st.isConnected()&&t){var e=st.getConnectedLoop(),o=e.rooflinePoint;if(o){var n=o.getX(),r=o.getY(),a=o.getR();e.state&&" "!==e.state&&st.setPos(n,r,a),e.rooflineConnectedChildren&&e.rooflineConnectedChildren.forEach(function(t){return t.line.update(h.getLoopPoints(e,t.loop))});var s=e.rooflineConnectedParent;s&&s.line.update(h.getLoopPoints(e,s.loop,!0))}}}function $(t,e,o){var i="loopFill-"+t+"-"+e;return o&&(i+="-"+o),i}function G(t,e,o,i){var n=void 0;return 0===e?n=i:1===e?n=t:2===e&&(n=void 0!==o?"#ffa500":"#3473d4"),n}function U(t,e){function o(t){t&&(t.filtered&&console.error("Filtering of already filtered loop"),n.push(i.getLoopId(t)))}var n=[];T.selectedPoints.forEach(function(t){t&&(o(t.loopData),e&&i.forEachMatchingLoops(t.loopData,o))});var r={};return r[t]=n,r}function Z(t){var e=t();i.addFilterInfo(e),l.send("rooflineDataUpdated",{isOldData:!0}),this.unHighlightPoint(),q.call(this,[e],!1)}function q(t,e){t&&E.addUndoFrame({process:function(){e?i.addFilterInfo(t):i.remFilterInfo(t),l.send("rooflineDataUpdated",{isOldData:!0}),e=!e}.bind(this)})}function K(){var t=T.selectedPoints;return t&&t.length}function J(){u.DefValueRepresentation.call(this)}function Q(t,e){t.setStyle("cursor: pointer; stroke: transparent; stroke-width:"+dt+"; marker-start:"+t.localUrl(e))}var tt,et,ot,it,nt=0,rt=0,at=0,st=function(){function t(){return 10*I+1}var e,o,i=!1;return{create:function(i){if(!o){var n=t(),r=2*I;i=i||function(){},e=T.centralPart.graphicsRoot.createDefs().createG("expanderTemplate").addRect(0,0,n,n,"roofline_expander").getParent().addLine(r,n/2,n-r,n/2,"roofline_expander_horz_line").getParent().addLine(n/2,r,n/2,n-r,"roofline_expander_vert_line").getParent(),o=T.centralPart.graphicsRoot.createUse().setRef(e.localRef("expanderTemplate")).activate().on("mousedown",i),this.hide()}},isValid:function(){return!!o},hide:function(t){o&&(o.setX(-100).setY(-100),t||delete o.rooflineLoop)},refreshState:function(t){t&&("-"===t.state?e.addClass("expanded"):"+"===t.state&&e.remClass("expanded"))},connect:function(t){o&&(o.rooflineLoop=t)},isConnected:function(){return o&&o.rooflineLoop},isConnectedTo:function(t){return o&&o.rooflineLoop===t},getConnectedLoop:function(){if(o)return o.rooflineLoop},setPos:function(e,i,n){if(o){var r=t()/2;o.setX(e-1.5*r-n).setY(i-r)}},clear:function(){o=e=void 0,i=!1},front:function(){o&&o.front()},setIgnored:function(t){i=t},isIgnored:function(){return i}}}(),lt="ChildArrow",ct="ParentArrow";H.prototype.update=function(t){this.line.setX1(t[0].x).setY1(t[0].y).setX2(t[1].x).setY2(t[1].y)},H.prototype.remove=function(){this.line&&this.line.remove(),delete this.line},J.prototype=Object.create(u.DefValueRepresentation.prototype);var dt=19,ut=10;return J.prototype.create=function(t,e,o,i,n){i.textY=ut+2,i.tickStartY=ut,u.DefValueRepresentation.prototype.create.call(this,t,e,o,i,n),Q(this.line,"Slider"),this.line.activate(),this.line.el.isMovableItem=!0,this.line.on("mouseenter",Q.bind(this,this.line,"SliderActive")),this.line.on("mouseleave",Q.bind(this,this.line,"Slider")),this.text.activate(),this.text.el.isMovableItem=!0,this.text.on("mouseenter",Q.bind(this,this.line,"SliderActive")),this.text.on("mouseleave",Q.bind(this,this.line,"Slider"))},{setRoofline:function(t){T=t,T.centralPart.body.addEventListener("mousewheel",y.bind(window,"wheelDelta",-1),!1),T.centralPart.body.addEventListener("DOMMouseScroll",y.bind(window,"detail",1),!1),T.centralPart.body.addEventListener("contextmenu",function(t){var e,n=[];i.isFiltered()||(i.isHierarchical()&&(n=[{caption:a.getMessage("roofline_menu_collapse_root"),id:3,disabled:this.IsRootCollapsed(),command:function(){this.collapseRoot()}.bind(this)},{caption:a.getMessage("roofline_menu_expand_all"),id:4,disabled:!this.canExpandAll(),command:function(){this.expandAll()}.bind(this)}]),(e=this.getLoopByElement(t.target))&&e.state&&n.unshift({caption:"-"===e.state?a.getMessage("roofline_menu_collapse"):a.getMessage("roofline_menu_expand"),id:1,command:function(){this.changeLoopState(e)}.bind(this)},{caption:"-"})),n.length&&n.push({caption:"-"}),n.push({caption:a.getMessage("roofline_filter_in_label"),id:5,disabled:!K(),command:Z.bind(this,U.bind(this,i.FilterOperation.in,!0))}),n.push({caption:a.getMessage("roofline_filter_out_label"),id:6,disabled:!K(),command:function(){Z.call(this,U.bind(this,i.FilterOperation.out)),T.onCurrentPointChanged.raise(T.currentPoint)}.bind(this)}),n.push({caption:a.getMessage("roofline_filter_clear_label"),id:7,disabled:!i.isFiltered(),command:function(){this.cancelFiltering()}.bind(this)}),e&&(n.length&&n.push({caption:"-"}),n.push({caption:a.getMessage("roofline_toolbar_copy_clipboard"),id:8,command:function(){var t=j.getText.call({accepted:e});t=d.unEscapeHTML(t.replace(/<br>/gi,"%0A").replace(/<[^>]*>/g,"")),o.sendNotification("copy-"+t)}.bind(this)})),s.show(n,t.pageX,t.pageY),s.defProcessing(t)}.bind(this),!1)},setZoomer:function(t){E=t},setScale:function(t){I=t},setConfiguration:function(t){t&&c.applyObjectProperties(A,t)},clear:function(){this.unHighlightPoint(),st.clear(),O=void 0},getLoopByElement:function(t){if(t){var e;return t.roofLinePoint?e=t.roofLinePoint.loopData:t.owner&&t.owner.rooflineLoop&&(e=t.owner.rooflineLoop),e}},getLoopInfo:function(t){function e(t){return void 0!==t?t:100}function o(t,e){var o=t/X.getTotalTime(e)*100;return o>100&&(o=100),o}var n=this.getLoopColor||G;if(t){var r=B.getState(),a=i.isNoLoopPosition(t),s=b(t);"+"===t.state&&(s=t.totalTime);var l,c=t.resIndex||0,d=o(s,c);"-"===t.state&&(l=o(t.totalTime,c));for(var u,f,h=i.getLoopPosition(t,a),m=p(r.colorMode),g=S(),v=0,_=g.length;v<_;v++)l&&!f&&l>d&&l<=e(g[v].th)&&(f=g[v].radius),!u&&d<=e(g[v].th)&&(u={radius:Math.round(4*I),_x:h.x,_y:h.y,getRadius:function(){return this.totalRadius?this.totalRadius:this.radius},getX:function(){return this._x},getY:function(){return this._y}},!1!==r.useSizes&&(u.radius=g[v].radius),u.color=n(g[v].color,m,t.vec,r.defLoopColor));return!1!==r.useSizes&&f&&f>u.radius&&(u.patternId=$(f,u.radius,2===m?t.vec:0),u.totalRadius=f),(a&&!r.ignoreNoLoopPosition||!i.isHierarchical()&&"-"===t.state)&&(u.noLoopPosition=!0,u.color=r.nstLoopColor),c&&(u.resIndex=c),u}},createLinesArrows:function(){r.createLineArrowMarker(lt,"roofline_child_arrow",T,I),r.createLineArrowMarker(ct,"roofline_parent_arrow",T,I,0)},fillPatterns:function(t){if(T){var e;if(t?e=T.centralPart.graphicsRoot.createDefs("fill_patterns"):(e=T.centralPart.graphicsRoot.getElementById("fill_patterns"))&&e.clear(),e){var o=S();if(o&&o.length){for(var n=B.getState(),r=p(n.colorMode),a=n.defLoopColor||"lightgray",s=[f.CirclePoint],l=1,c=i.getResultCount();l<c;l++){var d=i.getPointConstructor(l);if(!(s.indexOf(d)<0))break;s.push(d)}s.forEach(function(t){if(t)for(var i=1,n=o.length;i<n;i++)for(var s=o[i].radius,l=0;l<i;l++){var c=o[l].radius;2!==r?t.createFillPattern(e,s,c,0!==r?o[l].color:a,$(s,c)):(t.createFillPattern(e,s,c,G(o[l].color,r,1),$(s,c,1)),t.createFillPattern(e,s,c,G(o[l].color,r),$(s,c)))}})}}}},fillLoop:function(t,e){t&&e&&(e.noLoopPosition?(t.addClass("no_loop_position"),t.setFillColor(e.color)):(t.remClass("no_loop_position"),e.patternId?t.setPatternId(e.patternId):t.setFillColor(e.color)),e.color?t.el.setAttr("data-color",e.color):t.el.remAttr("data-color"))},fillLoops:function(){function t(t){n(t,function(t){o&&t.filtered||w(t)}.bind(this),!1)}function e(t){t&&n(t,function(t,e,o){if(!i.isFiltered()||!t.filtered){var n=this.getLoopInfo(t),r=T.addPoint(n.getX(),n.getY(),n.getRadius(),"roofline_loop",void 0,i.getPointConstructor(n.resIndex)||f.CirclePoint);r.loopData=t,t.rooflinePoint=r,this.fillLoop(r,n),o&&r.hide()}}.bind(this),!0)}var o=i.isFiltered(),n=o?i.forEachLoopsSimple:i.forEachLoops;l.send("loopsCreating"),this.createLinesArrows(),ot=[],it=0,nt=0,g(),_(),t.call(this,i.getLoops()),this.fillPatterns(!0),e.call(this,i.getLoops())},highlightPoint:function(t){if(!i.isFiltered()&&t&&!st.isIgnored()&&!t.isHidden())if(st.isConnected()&&(N(st.getConnectedLoop()),W(st.getConnectedLoop())),st.isValid()||k.call(this),t.loopData.state&&" "!==t.loopData.state){var e=t.getX(),o=t.getY(),n=t.getR();st.setPos(e,o,n),st.connect(t.loopData),st.refreshState(t.loopData),"-"===t.loopData.state&&V(t.loopData),Y(t.loopData),h.setLoopPointFront(t,T),st.front()}else this.unHighlightPoint(),st.connect(t.loopData),Y(t.loopData),st.setPos(-100,-100,10),h.setLoopPointFront(t,T)},unHighlightPoint:function(){st.isConnected()&&(N(st.getConnectedLoop()),W(st.getConnectedLoop()),st.hide())},changeLoopState:P,collapseThisPosition:function(t){for(var e=t,o=i.getParent(e);o&&o.x1===e.x1&&o.y1===e.y1;)e=o,o=i.getParent(e);"-"===e.state&&this.changeLoopState(e)},collapseRoot:function(){var t=i.getLoops()[0];t&&"-"===t.state&&this.changeLoopState(t)},IsRootCollapsed:function(){var t=i.getLoops()[0];return!!t&&"+"===t.state},expandAll:function(){function t(t,e){t.state=e}var e=[];if(i.forEachLoopsSimple(i.getLoops(),function(o){"+"===o.state&&(t(o,"-"),e.push(o))},!0),e.length>1)E.addUndoFrame({process:function(){e.forEach(function(e){e&&e.state&&t(e,"+"===e.state?"-":"+")}),l.send("rooflineDataUpdated"),i.saveHierarchy()}}),l.send("rooflineDataUpdated"),i.saveHierarchy();else if(e.length){var o=e[0];t(o,"+"),this.changeLoopState(o)}},canExpandAll:function(){var t=!1;return i.forEachLoopsSimple(i.getLoops(),function(e){"+"===e.state&&(t=!0)}),t},fillSettings:function(){var t=c.getElementById(D);c.removeAllChildren(t);var e=S();e.forEach(function(o,i){var n=o.th||100,r=0;i-1>=0&&(r=e[i-1].th),this._fillLoopRow(t.insertRow(-1),o,n-r>0),o.th&&this._fillThRow(t.insertRow(-1),o.th)}.bind(this)),this._updateBtnsState(B.getState())},fillHistogramChart:function(o){function n(t,o){t.addStop("0%",o[0].color);for(var i=0,n=o.length;i<n;i++){var r=o[i].th?o[i].th/e()*100:0;r?(t.addStop(r+"%",o[i].color),t.addStop(r+"%",o[i+1].color)):t.addStop("100%",o[i].color)}}function r(t,e){function o(t){if(t&&t.el&&t.el.getCTM()){t.createTransform().setMatrix(t.el.getCTM().inverse())}}o(this.centralPart.graphicsRoot.createLine().setClass("legend_total_line").setX1(1).setY1(1).setX2(e).setY2(1));o(this.centralPart.canvas.createText(s(t)).setClass("legend_total_text").setX(e-3).setY(3).setStyle("text-anchor: end; dominant-baseline: text-before-edge;"))}function s(t){return c.format(1!==t?a.getMessage("roofline_histogram_loops"):a.getMessage("roofline_histogram_loop"),t.toString())}function l(t,e){return c.format(1!==e?a.getMessage("roofline_histogram_tooltip_loops"):a.getMessage("roofline_histogram_tooltip_loop"),t.toString(),e.toString())}function d(t,e,o){t.createMarker(e).setMarkerWidth(dt).setMarkerHeight(ut).setRefX(f).setRefY(ut-1).setOrient("0").setMarkerUnits("userSpaceOnUse").createPath().moveToAbs(0,ut-1).lineToAbs(f,0).lineToAbs(dt,ut-1).lineToAbs(0,ut-1).setD().setClass(o)}if(this._parent=this._parent||c.getDomElement(o),c.removeAllChildren(this._parent),!it)return void(this._parent.style.display="none");this._parent.style.display="block",this.horzAxis=u.createHorzAxis(this._parent,!0),this.centralPart=u.createCentralPart(this._parent,!0);var f=dt/2,h=this.horzAxis.canvas.createDefs();d(h,"Slider","histogram_slider"),d(h,"SliderActive","histogram_slider_active"),this.axisCaption=c.createElement(i.getRooflineData().legendCaption,"legend_axis_caption","",this._parent),this.centralPart.setViewbox(0,0,e(),it),this.horzAxis.setCentralPart(this.centralPart),this.centralPart.ontooltiptext=function(e,o,i){var n=c.floor(o,at);return l(t(n+rt),ot[n]||0)};var p=S(),m=this.centralPart.canvas.createDefs().createLinearGradient("FillGradient").setLeftRight();n(m,p);for(var g=0,v=p.length;g<v;g++){var _=p[g].th;_&&this.horzAxis.addValue(t(_),void 0,J)}var y=this.centralPart.graphicsRoot.createPath();for(y.setClass("histogramLine").setAttr("fill",y.localUrl("FillGradient")).moveToAbs(0,0),g=0,v=e();g<v;g+=rt)g=t(g),y.lineToVerticalAbs(ot[g]||0).lineToHorizontalRel(rt);y.lineToVerticalAbs(0).closePath().setD(),r.call(this,it,this.centralPart.body.offsetWidth),this._parent.classList.contains("user_activity")||this._parent.classList.add("collapsed");var b,x,w,C=-1,L=this.horzAxis;this.thMoving=c.createResizeProcess(L.body,{accepted:function(t){var o=t.isMovableItem;if(o&&(L.values.some(function(e,o){return(e.representation.text.el===t||e.representation.line.el===t)&&(C=o,!0)}),C>=0)){b=c.getElementPos(L.body);var i=S();x={min:0,max:100};var n=i[C-1];n&&(x.min=n.th),n=i[C+1],n&&(x.max=n.th||e()),w=function(t){var e=c.getElementById(D),o=e.children[2*t+1];if(o)return o.querySelector(".threshold_input")}(C)}return o},getDeltaThreshold:function(){return 0},getDelta:function(t,e,o){return t.x-b.x},getCursor:function(){return"pointer"},onProcess:function(o){var i=t(o/L.body.clientWidth*e());if(i>x.min&&i<x.max){var r=S(!0);if(r[C].th===i)return;L.changeValue(C,i),L.layoutValues(),r[C].th=i,m.clear(),n(m,r),this._applyChanges(!0),w&&(w.value=i)}},onEnd:function(){b=void 0,C=void 0,w=void 0}},this)},processResize:function(t){t&&F(t)},cancelFiltering:function(){if(i.isFiltered()){var t=i.clearFiltering();l.send("rooflineDataUpdated",{isOldData:!0}),this.highlightPoint(T.currentPoint),q.call(this,t,!0)}},_insertThSettings:function(t){var e=S(!0),o=e[t],i=o.th||100,n=0;t-1>=0&&(n=e[t-1].th);var r={radius:o.radius,color:o.color,th:n+(i-n)/2};if(r.th>n&&r.th<i){e.splice(t,0,r);var a=c.getElementById(D);this._fillLoopRow(a.insertRow(2*t),r,r.th-n>0),this._fillThRow(a.insertRow(2*t+1),r.th),this._applyChanges()}},_removeThSettings:function(t){S(!0).splice(t,1);var e=c.getElementById(D);e.deleteRow(2*t),e.deleteRow(2*t),this._applyChanges()},_fillLoopRow:function(t,e,o){if(t&&e){t.className="loop_row";var i=t.insertCell(0);c.createElement("","icon plus","",i,"button",function(t){t.onclick=this._insertTh.bind(this),t.disabled=!o}.bind(this));var n=t.insertCell(1);n.className="loop_sample_cell";var a=c.createElement("","loop_sample","",n,"div",function(t){t.style.backgroundColor=e.color,t.style.width=t.style.height=2*e.radius+"px"}),s=t.insertCell(2);c.createElement("","size_input","",s,"input",function(t){t.setAttribute("value",e.radius),t.oninput=this._changeSize.bind(this,a),t.onblur=this._processBlur.bind(this,"radius"),t.onkeypress=r.filterNumberInput}.bind(this));var l=t.insertCell(3);c.createElement("","color_input","",l,"input",function(t){t.setAttribute("type","text"),t.setAttribute("value",e.color),t.oninput=this._changeColor.bind(this,a),r.addColorPicker(t),t.onblur=this._processBlur.bind(this,"color")}.bind(this));var d=t.insertCell(4);d.className="roof_settings_input visibility_input",c.createElement("","","",d,"input",function(t){t.type="checkbox",t.checked=!0}.bind(this))}},_fillThRow:function(t,e){if(t){t.className="threshold_row";var o=t.insertCell(0);c.createElement("","icon minus","",o,"button",function(t){t.onclick=this._removeTh.bind(this)}.bind(this));var n=t.insertCell(1);n.setAttribute("colspan","4"),c.createElement("Threshold Value","threshold_label","",n,"label",function(t){t.setAttribute(r.tooltipAttr,i.getRooflineData().legendCaption)}),c.createElement("","threshold_input","",n,"input",function(t){t.setAttribute("value",e),t.oninput=this._changeTh.bind(this),t.onblur=this._processBlur.bind(this,"th"),t.onkeypress=r.filterNumberInput}.bind(this)),c.createElement("%","threshold_label","",n,"label")}},_getIndex:function(t){var e=t.parentNode.parentNode,o=e.parentNode,i=[].indexOf.call(o.children,e);return Math.floor(i/2)},_insertTh:function(t){var e=t.target;if(e){var o=this._getIndex(e);this._insertThSettings(o)}},_removeTh:function(t){var e=t.target;if(e){var o=this._getIndex(e);this._removeThSettings(o)}},_changeColor:function(t,e){var o=e.target;if(o){var i=o.value,n=m(i,t);if(n.isValid){if(n.isNew){var a=this._getIndex(o);S(!0)[a].color=i,this._applyChanges()}r.markNormal(o)}else r.markWrong(o,"The value should be a valid CSS color")}},_changeSize:function(t,e){var o=e.target;if(o){var i=parseFloat(o.value),n=Math.round(12*I);if(!isNaN(i)&&i<=n&&i>0){t.style.width=t.style.height=2*i+"px";var a=this._getIndex(o);S(!0)[a].radius=i,this._applyChanges(),r.markNormal(o)}else r.markWrong(o,"The value should be between 0 and "+n)}},_changeTh:function(t){var e=t.target;if(e){var o=parseFloat(e.value);if(!isNaN(o)){var i=this._getIndex(e),n=S(!0),a=100;i+1<n.length-1&&(a=n[i+1].th);var s=0;if(i-1>=0&&(s=n[i-1].th),o<a&&o>=s){n[i].th=o;var l=function(t){return t.parentNode.parentNode.previousSibling.firstChild.firstChild}(e);l&&(l.disabled=o-s<=1),this._applyChanges(),r.markNormal(e)}else r.markWrong(e,"The value should be between "+s+" and "+a)}}},_processBlur:function(t,e){var o=e.target;if(o){var i=this._getIndex(o),n=S(!0),a=n[i][t].toString();o.value!==a&&(o.value=a,r.markNormal(o))}},_processEnter:function(t){var e=t.target;e&&13===t.which&&e.oninput&&e.oninput(t)},_applyChanges:function(t){B.save("loopsThs"),v(),t||this.fillHistogramChart()},_updateBtnsState:function(t){t=t||{},M.disabled=!et,z.disabled=!t.loopsThs},revertDefault:function(){var t=B.getState();t.loopsThs&&delete t.loopsThs,et=void 0,this.fillSettings(),this._applyChanges()},cancelChanges:function(){if(et.length){B.getState().loopsThs=et,et=void 0,this.fillSettings(),this._applyChanges()}else this.revertDefault()},apply:function(t){this._updateBtnsState(t)},saveState:function(t){this._updateBtnsState(t),t&&!t.loopThs&&(t.loopThs=S())},getLoopsThs:function(){return S()}}}();B.addProcessor("loopsThs",V),l.recv("rooflineCleared",V.clear,V),l.recv("rooflineResized",V.processResize,V),l.recv("currentPointChanged",function(t){V.highlightPoint(t),t&&t.loopData&&l.send("currentLoopChanged",t.loopData)}),l.recv("loopStateChanged",V.changeLoopState,V),l.recv("loopHighlighted",function(t){if(t){var e=t.rooflinePoint;e&&h.setLoopPointFront(e,T)}});var Y,O,N='<span style="font-weight: bold">',W="</span><br>",F=[{name:"selfTime",format:e.formatTime},{name:"selfElapsedTime",format:e.formatTime},{name:"totalTime",format:e.formatTime},{name:"selfGbPerSec",format:e.simpleFormat},{name:"totalGbPerSec",format:e.simpleFormat}],j=r.addTooltipProcessor({accepted:void 0,accept:function(t){if(!t)return!1;var e=V.getLoopByElement(t)||t.loopData;if(e)this.accepted!==e&&(this.accepted=e,O=this.accepted.rooflinePoint,l.send("loopEntered",this.accepted));else{var o=!!this.accepted;this.accepted=void 0,O=void 0,o&&l.send("loopLeaved")}return!!this.accepted},getText:function(t){var e=this.accepted;if(e){var o=i.getRooflineData4Loop(e);if(o){var n=b(e)+x(e)+k(e,o)+L(e,o)+C(e,o)+P(e,o)+S(e,o);return F.forEach(function(t,i){var r=w(o.attrs[t.name],e[t.name],{name:"name",measure:"measure",format:t.format});r&&i&&(r="<br>"+r),n+=r}),n}}}});M=document.getElementById("cancel_loops_settings_button"),M.onclick=V.cancelChanges.bind(V),z=document.getElementById("revert_loops_settings_button"),z.onclick=V.revertDefault.bind(V),t.addCheckSetting(document.querySelector('input[value="size"][type="checkbox"]'),"useSizes",v),t.addComboSetting("color_mode_combo","colorMode",v,H);return R("roofline_def_loop_color_edit","roofline_def_loop_color_sample","defLoopColor","lightgray"),R("roofline_nst_loop_color_edit","roofline_nst_loop_color_sample","nstLoopColor","#eee"),document.getElementById("load_loops_settings_button").onclick=function(){o.sendNotification("loadLoopsColors")},o.addConsumer("loadedLoopsColors",{process:function(t){var e=B.getState();t.loopsThs&&(e.loopsThs=t.loopsThs,B.apply(void 0,"loopsThs")),t.defLoopColor&&(e.defLoopColor=t.defLoopColor,B.apply(void 0,"defLoopColor")),t.nstLoopColor&&(e.nstLoopColor=t.nstLoopColor,B.apply(void 0,"nstLoopColor")),l.send("rooflineDataUpdated",{isOldData:!0}),B.save("loopsThs"),B.save("defLoopColor"),B.save("nstLoopColor")},onerror:function(t){t.message&&r.toast(t.message)}}),document.getElementById("save_loops_settings_button").onclick=function(){var t={},e=B.getState();t.loopsThs=V.getLoopsThs(),e.defLoopColor&&(t.defLoopColor=e.defLoopColor),e.nstLoopColor&&(t.nstLoopColor=e.nstLoopColor),window.saveLocalProperty("saveLoopsColors",t)},V}.apply(e,n),n=[s,L,u,d],k=function(t,e,o,i){function n(t,o,i){if(t){void 0===o&&(o="Data Loading Error: "),i=i||"<br>";var n;if(t.message){var r=o+e.escapeHTML(t.message);t.stack&&(r+=e.escapeHTML(t.stack).split("\n").map(function(t){return t?i+'<span class="stack_item">'+t+"</span>":t}).join("")),r+='<span class="message_btn close_btn button icon"></span>',r+='<span class="message_btn copy_btn button icon"></span>',n=r}return n}}function r(t){s&&t&&(document.body.classList.remove("no_data"),document.body.classList.add("data_loading"),s.innerHTML=t)}function a(t,e,o,n,r){var a;return a=r&&r.message?(r.name?r.name+": ":"")+r.message+(r.stack?"\n"+r.stack:""):["Message: "+t,"URL: "+e,"Line: "+o,"Column: "+n].join(" - "),i.sendNotification("error-"+a),!1}var s=document.getElementById("roofline_data_loading_message");return s.onmousedown=function(t){t.target&&t.target.classList&&(t.target.classList.contains("close_btn")?(s.innerHTML=o.getMessage("roofline_loading"),setTimeout(i.receiveData.bind(i,"refreshRooflineView","1000"),100),i.clearLastError()):t.target.classList.contains("copy_btn")&&i.sendNotification("errorcopy-"+i.getLastErrorMessage().replace(/\n/g," - ")))},window.onerror=a,{getMessage:n,showMessage:r,handleException:function(t){a("","",0,0,t)}}}.apply(e,n),n=[h],R=function(t){function e(e,o,i){var n,r;if(!e)return n;var a=-Number.MAX_VALUE,s=a;return e.forEach(function(e){!!e.isMem!=!!o||e.hidden||void 0!=i&&!t.isScalarRoof(e)!==i||(s<e.val&&(s=e.val,n=e),(e.selected||e.userSelected)&&a<e.val&&(a=e.val,r=e))}),r||n}function o(t){return!(!t||!t.name)&&t.name.toLowerCase().indexOf("scalar")>=0}function i(t,e){var i;if(!t)return i;var n=Number.MAX_VALUE;return t.forEach(function(t){t.hidden||t.isMem||!!o(t)!=!e||n>t.val&&(n=t.val,i=t)}),i}function n(t,e){return{x:e.val-t.val,y:e.val}}function r(t,e){t&&(e=e||function(){},t.forEach(function(o){o.isMem&&!o.hidden&&t.forEach(function(t){t.isMem||t.hidden||e(n(o,t),o,t)})}))}function a(t){return["rsiMultiThread","rsiSingleThread"][Number(!!t)]}function s(t,e,o){function i(){var t="";for(var e in n)"str"!==e&&(t+=e+":"+n[e]+",");return t}t=t||1,o=o||0;var n={threadCount:t,useSTRoofsStrategy:Number(!!e),packageCount:o};return Object.assign(n,{str:i}),n}function l(t){if(!t)return"";var e=t.split(" ");return e.length>0?e[0]:void 0}return{roofDefs:function(){var t;return{get:function(e){if(e)return t||(t=e.centralPart.graphicsRoot.createDefs()),t},clear:function(){t=void 0}}}(),isScalarRoof:o,getTopSelectedRoof:e,getBottomComputeRoof:i,getRoofsCrossing:n,forEachRoofsCrossings:r,getRoofsStrategyId:a,getRoofsConfiguration:s,getRoofMemoryLevel:l}}.apply(e,n),n=[g,l,d,h,c,k,C,s,p,f,R],T=function(t,e,o,i,n,r,a,s,l,c,d){function u(t){return t&&t.parentNode&&t.parentNode.parentRoof}function f(t){if(u(t)&&t.parentNode.parentRoof.el.roofRepresentation)return t.parentNode.parentRoof.el.roofRepresentation.roofData.desc}function h(){var t={roofsValues:{}};b.saveState(t,{all:!0}),s.copyObject(y.getState().roofsValues,t.roofsValues),x.saveState(t,!0),window.saveLocalProperty("saveRoofs",t)}var p,m,g=1,v={},_="roofsRepresentation",y=t.get(),b=function(){function t(t){function e(e){return!!t.isMem==!!e.isMem}if(t){var o,n,r=-Number.MAX_VALUE,s=Number.MAX_VALUE;i.forEachRoofs(function(i){i!==t&&i.hidden||!e(i)||(i.val>r&&(o=i,r=i.val),i.val<s&&(n=i,s=i.val))}),o!==t&&n!==t||a.send("rooflineDataUpdated",{isOldData:!0,changingRoofs:!0})}}function o(e){var o=e.target;if(o){var n=o.roofRepresentation;n&&(o.checked?n.show():n.hide(),n.highlight(),t(n.roofData),a.send("roofVisibilityChanged",i.getRoofs()),b._updateRoofsText(p.tr),b.updateSelection(),y.save(_))}}function u(t){var e=this;if(e){var o=e.roofRepresentation;o&&(o.setSelected(e.checked),a.send("roofSelectionChanged",i.getRoofs()),b._updateRoofsText(p.tr),b.updateSelection(),y.save(_))}}function f(t,e){t&&(e?(t.style.fontWeight="bold",B++):(t.style.fontWeight="",B--),B<0&&(B=0))}function h(t){var o=t.target;if(o){var i=o.roofRepresentation;if(i){var n=i.roofData;if(n){var s=e.formatVal(n.val,2,!0),l=parseFloat(o.value);if(isNaN(l)||!l)o.value=s;else if(s!==l){void 0===n.defVal?(n.defVal=n.val,f(o,!0)):l===e.formatVal(n.defVal,2,!0)&&(n.val=n.defVal,delete n.defVal,f(o,!1)),void 0!==n.defVal&&(n.val=e.log10(l)),m.disabled=0===B;try{var c=t.relatedTarget;c&&c.roofRepresentation&&(b.activeRoofRepresentation=c.roofRepresentation)}catch(t){r.handleException(t)}a.send("rooflineDataUpdated",{isOldData:!0}),y.save(_)}}}}}function x(t){if(13===t.keyCode){var e=t.target;t.relatedTarget=e,e.onblur(t)}}function C(t){var e=t.target;b.activeRoofRepresentation=e.roofRepresentation}function L(){b.activeRoofRepresentation&&delete b.activeRoofRepresentation}function S(t){var e=t.target;if(e){var o=e.firstChild;o&&o.click()}}function P(t,i,r,a,l){function c(t,e,o){var i=s.createElement("","","",t,"input",function(t){t.type="checkbox"});return i.roofRepresentation=r,i.onclick=o,i.checked=e,t.className="roof_settings_input",t.roofRepresentation=r,t.onclick=S,i}var d=r.roofData,p=t.insertRow(-1);p.className=d.isMem?"roof_memory":"roof_calculation";var m=p.insertCell(0);m.innerHTML=i,m.style.whiteSpace="nowrap",m.roofRepresentation=r,c(p.insertCell(1),a,o);var g=p.insertCell(2),v=c(g,l,u);r.onClick.subscribe(v,v.click);var _=p.insertCell(3);_.style.whiteSpace="nowrap",_.roofRepresentation=r;var y=s.createElement("","value_input","",_,"input",function(t){t.setAttribute("value",e.formatVal(d.val,2,!0)),void 0!==d.defVal&&f(t,!0),t.onkeydown=x,t.onblur=h,t.onkeypress=n.filterNumberInput,t.onmouseover=C,t.onmouseout=L,t.roofRepresentation=r});this.activeRoofRepresentation&&this.activeRoofRepresentation===y.roofRepresentation&&(y.focus(),y.select(),s.dispatchElementMouseEvent("mousemove",y)),s.createElement(d.measure,"measure_label","",_,"label",function(t){t.roofRepresentation=r})}function k(t){return t.toLowerCase().replace("(single-threaded)","").replace(/\s/g,"")}function R(t){if(t&&t.el)return t.el.el}function T(t,o){function i(t){return t.replace(" (single-threaded)","")}var n=p.addRoof(o,"line_hotarea");n.el.after(p.getLastGridLine());var r=p.addRoof(o,function(t){return"idvcroofline_line "+t.replace(/\s+/g,"")}(t.name));p.firstFrontEl||(p.firstFrontEl=r.el),n.el.activate(),this.line=r,this.hotLine=n,this.roofData=t,this.caption=i(t.name),this.text=this.createText(function(t,e){return i(t.name)+": "+e(t.val,2)+" "+t.measure}(t,e.formatVal)),this.onClick=l.create(),this.setTo(n),R(this.hotLine).onclick=this.processRoofClick;var a=t.selected;a&&this._setSelectedVis(a)}function E(t,e){this.startY=e[0],T.call(this,t,e)}function M(t,e){T.call(this,t,e)}function z(t,e){if(t)return t.isMem?new E(t,e):new M(t,e)}var I="idvcchart_roofline_text_active",A="hidden",D="TextBackground",B=0;return T.prototype.setTo=function(t){R(t).roofRepresentation=this},T.getFrom=function(t){return R(t).roofRepresentation},T.prototype._setSelectedVis=function(t){var e=t?"addClass":"remClass";this.line.el[e]("selected"),this.text&&this.text.svgText[e]("selected")},T.prototype.setSelected=function(t){var e=this.roofData;t?(e.selected=!0,e.userSelected=!0):(delete e.selected,delete e.userSelected),this._setSelectedVis(t)},T.prototype.show=function(){this.line.show(),this.hotLine.show(),delete this.roofData.hidden},T.prototype.hide=function(){this.unhighlight(),this.line.hide(),this.hotLine.hide(),this.roofData.hidden=!0},T.prototype.clear=function(){var t=R(this.hotLine);t&&delete t.roofRepresentation,this.line=void 0,this.hotLine=void 0,this.roofData=void 0},T.prototype.highlight=function(){R(this.line).classList.add("idvcroofline_line_hover"),this.line.isHidden()||function(t){t&&(t.svgText.front(),t.svgText.addClass(I),t.svgText.setFilter(D))}(this.text),this.line.el.front()},T.prototype.unhighlight=function(){R(this.line).classList.remove("idvcroofline_line_hover"),this.line.isHidden()||function(t,e){t&&(t.svgText.remClass(I),t.svgText.remFilter(D),t.svgText.after(e))}(this.text,this.hotLine)},T.prototype.recalculate=function(t){if(t){var e=t(this.roofData);return this.line.change(e),this.hotLine.change(e),e}},T.prototype.processRoofClick=function(t){var e=t.target;e&&e.roofRepresentation&&e.roofRepresentation.onClick.raise(t)},T.prototype.setStyle=function(t){function e(e,o){if(e){var i=e.getStyle();i||(i=""),-1===i.indexOf(o)&&(i+=t,e.setStyle(i))}}this.line&&e(this.line.el,t),this.selectedLine&&e(this.selectedLine.el,t),this.text&&e(this.text.svgText,t)},T.prototype.clearStyle=function(t){function e(t,e){return t?t.replace(e,""):""}function o(o,i){if(o){var n=e(o.getStyle(),t);o.setStyle(n)}}this.line&&o(this.line.el,t),this.selectedLine&&o(this.selectedLine.el,t),this.text&&o(this.text.svgText,t)},E.prototype=Object.create(T.prototype),E.prototype.show=function(){T.prototype.show.call(this),this.selectedLine&&this.selectedLine.show()},E.prototype.hide=function(){T.prototype.hide.call(this),this.selectedLine&&this.selectedLine.hide()},E.prototype.highlight=function(){if(T.prototype.highlight.call(this),this.selectedLine){R(this.selectedLine).classList.add("idvcroofline_line_hover"),this.selectedLine.el.front()}},E.prototype.unhighlight=function(){if(T.prototype.unhighlight.call(this),this.selectedLine){R(this.selectedLine).classList.remove("idvcroofline_line_hover")}},E.prototype.clear=function(){T.prototype.clear.call(this),this.selectedLine&&delete this.selectedLine},E.prototype._setSelectedVis=function(t){if(T.prototype._setSelectedVis.call(this,t),void 0!==this.startY)if(this.line.el.remClass("selected"),t){var e=d.getTopSelectedRoof(i.getRoofs(),!1),o=d.getRoofsCrossing(this.roofData,e||{val:p.tr.getMaxPerf()});this.selectedLine=p.addRoof([this.startY,o.x,o.y],"idvcroofline_line selected"),this.selectedLine.el.after(this.line.el),this.line.el.hasClass("idvcroofline_line_hover")&&this.selectedLine.el.addClass("idvcroofline_line_hover")}else this.selectedLine&&(this.selectedLine.remove(),delete this.selectedLine)},E.prototype.updateSelection=function(t){if(this.selectedLine){t=t||d.getTopSelectedRoof(i.getRoofs(),!1);var e=d.getRoofsCrossing(this.roofData,t||{val:p.tr.getMaxPerf()});this.selectedLine.change([this.startY,e.x,e.y])}},E.prototype.recalculate=function(t,e){if(t){var o=T.prototype.recalculate.call(this,t);this.startY=o[0],this.updateSelection(e)}},E.prototype.createText=function(t){if(this.hotLine&&this.roofData)return this.hotLine.setBeginText(t,void 0,void 0,!!this.roofData.desc),this.hotLine.startText},E.prototype.updateTextPos=function(t,e){this.hotLine.updateBeginOffsets(e,t)},M.prototype=Object.create(T.prototype),M.prototype.createText=function(t){if(this.hotLine&&this.roofData)return this.hotLine.setEndText(t,void 0,void 0,!!this.roofData.desc),this.hotLine.endText},M.prototype.updateTextPos=function(t,e){e=e||this.hotLine.endText.alongOffset,this.hotLine.updateEndOffsets(e,t)},{representations:[],setRoofline:function(t){p=t;var e=s.getElementById("roofline_settings");p.centralPart.body.onmousemove=e.onmousemove=function(t){w.processMouseMove(t.target)},p.centralPart.body.onmouseout=e.onmouseout=function(t){w.processMouseOut(t.target)}},setScale:function(t){g=t},setConfiguration:function(t){t&&s.applyObjectProperties(v,t)},processResize:function(t){this._updateRoofsText(t)},clear:function(t){this.activeRoofRepresentation&&delete this.activeRoofRepresentation,this.representations.forEach(function(t){t.clear()}),this.representations.length=0,d.roofDefs.clear()},updateSelection:function(){var t=d.getTopSelectedRoof(i.getRoofs(),!1);this.representations.forEach(function(e){e.updateSelection&&e.updateSelection(t)})},fillRoofsPatterns:function(){d.roofDefs.get(p).createFilter(D).setAttr("x","0").setAttr("y","0").setAttr("width","1").setAttr("height","1").addElement("feFlood").setAttr("flood-color","white").getParent().addElement("feComposite").setAttr("in","SourceGraphic")},fillRoofs:function(t,e){if(t){var o=s.getElementById("roofs_table_body");s.removeAllChildren(o),B=0,this._captionTextHeight||(this._captionTextHeight=p.centralPart.canvas.getTextHeight({className:"idvcchart_roofline_text"})),t.sort(function(t,e){return!!e.isMem-!!t.isMem||e.val-t.val}).forEach(function(t){var i=z(t,e(t));this.representations.push(i);var n=t.hidden;n&&i.hide(),P.call(this,o,i.caption,i,!n,t.selected)}.bind(this)),this._updateRoofsText(p.tr),this.updateSelection(),a.send("roofsCreated",t),this.activeRoofRepresentation&&delete this.activeRoofRepresentation}},recalculateRoofs:function(t,e){var o=d.getTopSelectedRoof(i.getRoofs(),!1);this.representations.forEach(function(t){t.recalculate(e,o)}),a.send("roofsUpdated",t)},apply:function(t){if(t&&i.getThreadCount()){var e=i.getRoofs();if(e){var o=t.roofsState;e.forEach(function(e){var i=o?t.roofsState[k(e.name)]:null;i&&i.hidden?e.hidden=!0:delete e.hidden,i&&(i.selected||i.userSelected||e.userSelected)?e.selected=!0:delete e.selected,i&&(i.userSelected||e.userSelected)?e.userSelected=!0:delete e.userSelected})}var n=t.roofsValues?c.create(t.roofsValues):null,r=n?n.get(i.getThreadCount(),i.getRoofsStrategyId(),i.getPackageCount()):null;m.disabled=!n||n.empty(),e&&r&&e.forEach(function(t){var e=r[k(t.name)];e&&t.val!==e&&(void 0===t.defVal&&(t.defVal=t.val),t.val=e)})}},saveState:function(t,e){function o(t,o,i,r){var a=n.get(o,i,r),s=k(t.name);e.all||void 0!==t.defVal?a?a[s]=t.val:(a={},a[s]=t.val,n.add(a,o,i,r)):a&&a[s]&&(delete a[s],n.removeIfEmpty(o,i,r))}if(t){if(e=e||{},e.clearRoofsValues)return void delete t.roofsValues;t.roofsValues=t.roofsValues||{};var n=c.create(t.roofsValues);if(t.roofsState||(t.roofsState={}),i.forEachRoofs(function(o){var i=k(o.name);e.all||o.hidden||o.selected||o.userSelected?t.roofsState[i]={hidden:o.hidden||!1,selected:o.selected||!1,userSelected:o.userSelected||!1}:i in t.roofsState&&delete t.roofsState[i]}),Object.keys(t.roofsState).length||delete t.roofsState,e.all)i.forEachAllRoofs(o);else{var r=i.getThreadCount(),a=i.getRoofsStrategyId(),s=i.getPackageCount();i.forEachRoofs(function(t){o(t,r,a,s)})}n.empty()&&delete t.roofsValues}},_updateRoofsText:function(t){function e(e){function a(e,a,s){function d(t,e,o){return e&&e<r||o&&o.some(function(e){return Math.abs(t-e)<r})}function u(e,r){var a,s,l=t.getMinIntens(),c=t.getMinPerf(),u=c-e,f=e+l,h=t.L2PY(f)-t.L2PY(c),p=t.L2PX(u),m=Math.sqrt(Math.pow(p,2)+Math.pow(h,2)),g=t.L2PY(f),v=0;return void 0!==r&&(v=Math.abs((g-r)/m*p)),d(g,v,i)&&(a=-1,g+=n),u>l?(s=m+2,-1===a&&(s+=Math.abs(p*n/h))):s=-1===a?1:Math.abs(n/p*h)+o,{roofPosition:g,acrossOffset:a,alongOffset:s}}function f(e,r){var a,s=t.L2PY(e),l=0;return void 0!==r&&(l=s-r),d(s,l,i)&&(a=-1,s+=n),{roofPosition:s,acrossOffset:a,alongOffset:-o}}if(e)return function(t){if(!e)return a;var o=t(e.val,a),n=function(t,e,o){var n=t,r=e.roofPosition,a=0;return void 0!==t&&(a=r-t),d(r,a,i)?(o.addClass(A),e.acrossOffset=1):(o.remClass(A),n=r,c.push(n)),n}(a,o,s);return l.updateTextPos(o.acrossOffset,o.alongOffset),n}(e.isMem?u:f)}var s,l,c=[],e=e||function(t){return t&&!t.hidden};p.roofs.forEach(function(t){if(l=T.getFrom(t)){var o=l.roofData;e(o)&&(s=a(o,s,l.text.svgText))}}),i=c}var o=4*g;if(t&&this._captionTextHeight){var i,n=this._captionTextHeight,r=.9*n;e.call(this,function(t){return t&&!t.hidden&&t.isMem&&t.selected}),e.call(this,function(t){return t&&!t.hidden&&t.isMem&&!t.selected}),i=void 0,e.call(this,function(t){return t&&!t.hidden&&!t.isMem&&t.selected}),e.call(this,function(t){return t&&!t.hidden&&!t.isMem&&!t.selected})}}}}();y.addProcessor(_,b),a.recv("rooflineCleared",b.clear,b),a.recv("rooflineResized",b.processResize,b);var x=function(){function t(t){return t.replace(/\s+/g,"")}function e(t){if(t)return t.el}function o(t){this.line=void 0,this.rect=void 0,this.selected=!!t}function i(t){var e=c*g;return{x:t.x-e/2,y:t.y-e/2}}function n(t){var e=c*g;return{x:t.x,y:t.y+e/2}}function r(t){this.clear(!0),s.call(this,t)}function s(t){d.forEachRoofsCrossings(t,function(t,e,o){this.set(t,e.name,o.name)}.bind(this))}var l={},c=6;o.prototype.create=function(t,e,o,r){this.line&&this.line.remove(),this.rect&&this.rect.remove();var a=r.L2P(t.x,t.y),s=i(a),l=c*g,d=p.centralPart.graphicsRoot.addRect(s.x,s.y,l,l,"roofline_roofs_cross").front().activate().on("mousedown",this.processCrossPointClick,!1),u=n(a),f=p.centralPart.graphicsRoot.addLine(u.x,u.y,u.x,p.tr.getMinY(),"roofline_coord_line");this.name1=o,this.name2=e,this.x=t.x,this.y=t.y,this.line=f,this.rect=d,this.selected&&this.toggleSelection(),this.setTo(d)},o.prototype.setTo=function(t){e(t).crossingRepresentation=this},o.getFrom=function(t){return e(t).crossingRepresentation},o.prototype.toggleSelection=function(){this.rect&&this.rect.toggleClass("selected"),this.line&&(this.line.toggleClass("selected"),this.selected=this.line.hasClass("selected"))},o.prototype.highlight=function(){this.rect&&this.rect.addClass("idvcroofline_roofs_cross_hover"),this.line&&this.line.addClass("roofline_coord_line_hover")},o.prototype.unhighlight=function(){this.rect&&this.rect.remClass("idvcroofline_roofs_cross_hover"),this.line&&this.line.remClass("roofline_coord_line_hover")},o.prototype.updatePos=function(t){var e=t.L2P(this.x,this.y);if(this.rect){var o=i(e);this.rect.setX(o.x).setY(o.y)}if(this.line){var r=n(e);this.line.setX1(r.x).setX2(r.x).setY1(r.y).setY2(t.getMinY())}},o.prototype.clear=function(t){this.rect&&(t&&this.rect.remove(),this.rect=void 0),this.line&&(t&&this.line.remove(),this.line=void 0),this.x=0,this.y=0},o.prototype.processCrossPointClick=function(t){var e=t.target;e&&e.crossingRepresentation&&(e.crossingRepresentation.toggleSelection(),y.save("roofsCrossing"))};var u={set:function(t,e,o,i){i=i||p.tr,this.get(e,o).create(t,e,o,i)},get:function(e,i){var n=t(e),r=t(i),a=l[n+r];return a||(a=l[r+n]),a||(a=new o,l[n+r]=a),a},forEach:function(t){Object.getOwnPropertyNames(l).forEach(function(e){var o=l[e];o&&t(o,e)})},processResize:function(t){t&&this.forEach(function(e){e.updatePos(t)})},clear:function(t){this.forEach(function(e){e.clear(t)})},apply:function(t){t&&t.crossings&&Object.getOwnPropertyNames(t.crossings).forEach(function(e){var i=t.crossings[e];if(i){var n=l[e];n&&n.clear(!0),l[e]=new o(i.selected)}})},saveState:function(t,e){t&&(t.crossings&&delete t.crossings,this.forEach(function(o,i){(e||o.selected)&&(t.crossings||(t.crossings={}),t.crossings[i]={selected:!!o.selected})}))}};return a.recv("rooflineCleared",u.clear,u),a.recv("rooflineResized",u.processResize,u),a.recv("roofsCreated",s,u),a.recv("roofVisibilityChanged",r,u),u}();y.addProcessor("roofsCrossing",x);var w=function(){function t(){e&&(o.some(function(t){return t.unhighlight(e)}),e=void 0)}var e,o=[];return{processMouseMove:function(i){i&&i!==e&&(t(),o.some(function(t){var o=t.highlight(i);return o&&(e=i),o}))},processMouseOut:t,addProcessor:function(t){o.push(t)},clear:function(){e=void 0}}}();return w.addProcessor({accept:function(t){return t&&t.roofRepresentation},highlight:function(t){return!!this.accept(t)&&(t.roofRepresentation.highlight(),!0)},unhighlight:function(t){return!!this.accept(t)&&(t.roofRepresentation.unhighlight(),!0)}}),w.addProcessor({accept:function(t){return t&&t.crossingRepresentation},highlight:function(t){return!!this.accept(t)&&(t.crossingRepresentation.highlight(),!0)},unhighlight:function(t){return!!this.accept(t)&&(t.crossingRepresentation.unhighlight(),!0)}}),a.recv("rooflineCleared",w.clear,w),n.addTooltipProcessor({accept:function(t){return t&&t.roofRepresentation},getText:function(t){var o=t.roofRepresentation.roofData;return o.name+e.pref+(o.isMem,e.formatVal(o.val,2))+e.post+o.measure}}),n.addTooltipProcessor({accept:function(t){return t&&t.crossingRepresentation},getText:function(t){var o=t.crossingRepresentation,n=i.getRooflineData();return o.name1+" X "+o.name2+"<br>"+n.nameY+e.pref+e.formatVal(o.y)+e.post+n.measureY+"<br>"+n.nameX+e.pref+e.formatVal(o.x)+e.post+n.measureX}}),n.addTooltipProcessor({accept:u,getText:f}),m=document.getElementById("revert_roofs_values_settings_button"),m.disabled=!0,m.onclick=function(){function t(t){void 0!==t.defVal&&(t.val=t.defVal,delete t.defVal)}i.forEachAllRoofs(t),m.disabled=!0,a.send("rooflineDataUpdated",{isOldData:!0}),y.save(_,{clearRoofsValues:!0})},document.getElementById("load_roofs_settings_button").onclick=function(){o.sendNotification("loadRoofs")},o.addConsumer("loadedRoofs",{process:function(t){var e=y.getState();e.roofsState=t.roofsState||{},e.roofsValues=t.roofsValues,y.apply(void 0,_),e.crossings=t.crossings,y.apply(void 0,"roofsCrossing"),a.send("rooflineDataUpdated",{isOldData:!0}),y.save("roofsCrossing"),y.save(_)},onerror:function(t){t.message&&n.toast(t.message)}}),document.getElementById("save_roofs_settings_button").onclick=function(){i.areAllRoofsLoaded()?h():o.sendNotification("getAllRoofs")},o.addConsumer("allRoofs",{process:function(t){t.forEach(function(t){var e=t.threadCount,o=t.strategyId,n=t.packageCount;i.getRoofs(e,o,n).length||i.addRoofs(t.roofs,e,o,n)}),i.setAllRoofsLoaded(!0),h()}}),t.addCheckSetting("use_single_thread_strategy","useSTRoofsStrategy",function(){var t=y.getState()||{},e=!!t.useSTRoofsStrategy;i.setRoofsStrategyId(d.getRoofsStrategyId(e)),i.getRoofs().length?a.send("rooflineDataUpdated",{isOldData:!0,isNewRoofs:!0}):o.sendNotification("changeRoofs-"+d.getRoofsConfiguration(i.getThreadCount(),e,i.getPackageCount()).str())},!0),b}.apply(e,n),n=[C,h,u,P,T,d,c,l,S,R,s],E=function(t,e,o,i,n,r,a,s,l,c,d){function u(t){var o=l.getLoopMemoryLevel(e.getMemoryLevelPrefix(t));return H+o.toLowerCase()}function f(t){return H+c.getRoofMemoryLevel(t).toLowerCase()}function h(t){if(t&&t.loopData){var e=u(t.loopData);t.setFillColor(O[e])}}function p(t,e){if(t){return"fill:"+O[t]+" !important;"+("stroke:"+O[t]+" !important;")+(e?V:"")}}function m(t){if(t)return p(u(t),!0)}function g(t){if(t)return p(f(t))}function v(t){t&&t.addClass("loop_inactive_result")}function _(t){t&&t.remClass("loop_inactive_result")}function y(t){if(t&&t.loopData){var e=i.getLoopInfo(t.loopData);e&&t.setFillColor(e.color)}}function b(){n.representations.forEach(function(t){t.roofData&&t.roofData.isMem&&t.setStyle(g(t.caption))})}function x(){n.representations.forEach(function(t){t.roofData&&t.roofData.isMem&&t.clearStyle(g(t.caption))})}function w(t,e,o,i,n,r,a){var s=I.tr.L2P(o,i);this.el=this.init(t.centralPart.graphicsRoot,e,s,n,r,a),this.x=o,this.y=i}function C(t,o,i){if(o&&o.length>0||i&&i.length>0){var n=function(t){var e,o=-Number.MAX_VALUE;return t.forEach(function(t){t&&t.x>o&&(o=t.x,e=t)}),e},r=function(t){var e,o=Number.MAX_VALUE;return t.forEach(function(t){t&&t.x<o&&(o=t.x,e=t)}),e},a=r(o),s=r(i),c=n(o),d=n(i);if(!a&&!s)return;if(!c&&!d)return;var u=a,f=c;if(s&&s.x<u.x&&(u=s),d&&d.x>f.x&&(f=d),f&&u){var h=I.tr.L2P(u.x,u.y),p=I.tr.L2P(f.x,f.y),m=I.centralPart.graphicsRoot.createLine().setStyle(Y).setX1(h.x).setY1(h.y).setX2(p.x).setY2(p.y);this.irmLine={lineEl:m,loopId:t,leftPoint:h,leftmostPeer:u,rightmostPeer:f,peerRegularLoops:o,peerShadowLoops:i},this.createCrossPoints(),this.createPointLabels()}e.forEachLoops(o,function(t){l.setLoopPointFront(t.rooflinePoint,I)})}}function L(t){if(!e.isFiltered()&&t&&!t.isHidden()&&t.loopData)return e.getLoopId(t.loopData)}function S(t){function o(t,o){var i=[];return e.forEachLoops(o,function(o){if(!e.isFiltered()||!o.filtered){e.getLoopId(o)===t&&i.push(o)}}),i}if(A){D||(D=I.centralPart.canvas.getTextHeight({className:"idvcchart_roofline_text"}));var i=(e.forEachLoops,o(A,e.getLoops())),n=o(A,function(){return e.getExtraData("shadowLoops")?e.getExtraData("shadowLoops"):[]}());B.push(new C(A,i,n))}}function P(t){t&&B.forEach(function(e){e&&e.updatePosition(t)})}function k(t){B.forEach(function(e){e&&e.irmLine&&e.irmLine.loopId===t&&e.remove()})}function R(t){t?b():x()}function T(t,o,i){e.forEachLoops(e.getLoops(),function(n,r,a){e.isFiltered()&&n.filtered||n.rooflinePoint&&(e.getLoopId(n)==t?o(n.rooflinePoint):i(n.rooflinePoint))})}function E(t){t&&T(t,h,v)}function M(t){T(t,y,_)}function z(){return!!e.getExtraData("shadowData")}var I,A,D,B=[],X=5,H="integrated_",V="stroke-width:2;",Y="stroke:black;"+V,O={integrated_l1:"rgb(149,29,29)",integrated_l2:"rgb(180,129,12)",integrated_l3:"rgb(93,150,150)",integrated_l4:"rgb(0,172,86)",integrated_dram:"rgb(70,58,132)"};return w.prototype.init=function(t,e,o,i,n,r){var a=i;this.delta=a,this.r=i,n||(n="magenta"),this.color=n;var s=t.createRect(r).activate().setX(o.x-a).setY(o.y-a).setWidth(2*a).setHeight(2*a).setAttr("fill-opacity","0");this.transparentRect=s;var l=t.createLine(r).setStyle(m(e)).activate().setX1(o.x-a).setY1(o.y-a).setX2(o.x+a).setY2(o.y+a);this.line1=l;var c=t.createLine(r).setStyle(m(e)).activate().setX1(o.x-a).setY1(o.y+a).setX2(o.x+a).setY2(o.y-a);return this.line2=c,s},w.prototype.move=function(t,e){return this.x=t,this.y=e,this.transparentRect.setX(t-this.delta).setY(e-this.delta),this.line1.setX1(t-this.delta).setY1(e-this.delta).setX2(t+this.delta).setY2(e+this.delta),this.line2.setX1(t-this.delta).setY1(e+this.delta).setX2(t+this.delta).setY2(e-this.delta),this},w.prototype.hide=function(){return this.transparentRect.hide(),this.line1.hide(),this.line2.hide(),this},C.prototype.createCrossPoints=function(){function t(t,e){t&&e&&(e.loopData=t,e.transparentRect&&e.transparentRect.el&&(e.transparentRect.el.loopData=t),e.line1&&e.line1.el&&(e.line1.el.loopData=t),e.line2&&e.line2.el&&(e.line2.el.loopData=t))}this.irmPoints=[];var o=[];this.irmLine&&this.irmLine.peerShadowLoops&&(this.irmLine.peerShadowLoops.forEach(function(i){if(i){var n=e.getLoopPosition(i,void 0),r=new w(I,i,n.x,n.y,4,void 0);t(i,r),o.push(r)}}),this.irmPoints.push.apply(this.irmPoints,o))},C.prototype.createPointLabels=function(t){function o(t,o){var i=[];return t.forEach(function(t){if(t){var o=e.getLoopPosition(t,void 0),n=l.getLoopMemoryLevel(e.getMemoryLevelPrefix(t)),r=t.selfGbPerSec.toFixed(1)+" GB/s",a=I.centralPart.graphicsRoot.createText(n).setStyle("text-anchor: middle;font-size: 80%;").setX(I.tr.L2PX(o.x)).setY(I.tr.L2PY(o.y)+X+D).activate(),s=I.centralPart.graphicsRoot.createText(r).setStyle("text-anchor: middle;font-size: 80%;").setX(I.tr.L2PX(o.x)).setY(I.tr.L2PY(o.y)+X+2*D).activate(),c=[a,s,t];i.push(c)}}),i}this.irmLabels=[];var i=o(this.irmLine.peerRegularLoops,!1),n=o(this.irmLine.peerShadowLoops,!0);this.irmLabels.push.apply(this.irmLabels,i),this.irmLabels.push.apply(this.irmLabels,n),this.fixTextOverlapping()},C.prototype.fixTextOverlapping=function(){function t(t,e){var o=t[1].getBoundingRect().x,i=e[1].getBoundingRect().x;return o<i?-1:o>i?1:0}if(this.irmLabels&&!(this.irmLabels.length<=0)&&(this.irmLabels.sort(t),this.irmLabels.forEach(function(t){t&&(t[3]=!1)}),!(this.irmLabels.length<=1)))for(var e,o=this.irmLabels[0],i=1;i<this.irmLabels.length;i++){var n=this.irmLabels[i];if(n&&o){var r=o[1].getBoundingRect().width,a=n[1].getBoundingRect().width,s=o[1].getBoundingRect().x+r/2,l=n[1].getBoundingRect().x+a/2,c=l-s-(r/2+a/2);if(c<0&&c>a/-2){var d=-1*c;s-=d,o[0].setX(s),o[1].setX(s),l+=d,n[0].setX(l),n[1].setX(l),o=n}else if(c<0&&c<a/-2){if(e){var u=e[1].getBoundingRect().width,f=e[1].getBoundingRect().x+u/2,c=l-f-(u/2+a/2);if(c<0){var d=-1*c;f-=d,e[0].setX(f),e[1].setX(f),l+=d,n[0].setX(l),n[1].setX(l),n[0].setY(h-3*X-2*D),n[1].setY(h-3*X-D),e=n}}else{var h=n[1].getBoundingRect().y;n[0].setY(h-3*X-2*D),n[1].setY(h-3*X-D)}e=n}else o=n}}},C.prototype.updateLinePosition=function(t){if(t&&this.irmLine&&this.irmLine.lineEl&&this.irmLine.leftmostPeer&&this.irmLine.rightmostPeer){var e=t.L2P(this.irmLine.leftmostPeer.x,this.irmLine.leftmostPeer.y),o=t.L2P(this.irmLine.rightmostPeer.x,this.irmLine.rightmostPeer.y);this.irmLine.lineEl.setX1(e.x).setY1(e.y).setX2(o.x).setY2(o.y)}},C.prototype.updateCrossPointsPosition=function(t){t&&this.irmPoints&&this.irmPoints.forEach(function(o){if(o&&o.loopData){var i=e.getLoopPosition(o.loopData,void 0),n=t.L2P(i.x,i.y);o.move(n.x,n.y)}})},C.prototype.updateLabels=function(t){t&&(this.irmLabels&&this.irmLabels.forEach(function(o){if(o&&o[0]&&o[1]&&o[2]){var i=o[2],n=e.getLoopPosition(i,void 0),r=t.L2P(n.x,n.y);o[0].setX(r.x),o[0].setY(r.y+X+D),o[1].setX(r.x),o[1].setY(r.y+X+2*D)}}),this.fixTextOverlapping())},C.prototype.updatePosition=function(t){this.updateLinePosition(t),this.updateCrossPointsPosition(t),this.updateLabels(t)},C.prototype.remove=function(){this.irmLine&&this.irmLine.lineEl&&(this.irmLine.lineEl.hide(),this.irmLine.lineEl.remove()),delete this.irmLine,this.irmPoints.forEach(function(t){t&&t.hide()}),this.irmLabels&&this.irmLabels.forEach(function(t){t&&t[0]&&t[1]&&(t[0].hide(),t[1].hide(),delete t[0],delete t[1])}),this.irmLine=void 0,this.irmLabels=void 0,this.irmPoints=void 0},t.recv("rooflineCleared",function(t){z()&&k(t)}),t.recv("currentPointChanged",function(t){if(z()){var e=L(t);e!==A&&(k(A),M(A)),A=e,S(t),R(A),E(A)}}),t.recv("zoomFrameChanged",function(t){z()&&R(A)}),t.recv("rooflineResized",function(t){z()&&(P(t),R(A))}),r.addConsumer("rooflineAdditionalDataLoopData",{noStackErrors:0,process:function(t){(t&&t.shadowLoops||t.shadowLoops.length>0)&&(t.memoryLevelPref&&t.shadowLoops.forEach(function(e){e&&!e.memoryLevelPref&&(e.memoryLevelPref=t.memoryLevelPref)}),e.setExtraData("shadowLoops",t.shadowLoops),e.setExtraData("shadowData",t),e.setWholeView(!0))}}),{setRoofline:function(t){I=t},getLoopIntegratedColorStyleString:function(t){return m(t)},areShadowLoopsShown:function(){return!!A}}}.apply(e,n),n=[C,h,l,S,R,E,s],M=function(t,e,o,i,n,r,a){function s(){return!!e.getExtraData("shadowData")}var l,c=1;!function(){function a(t,e,o,r,a){function l(t,e){return e-t}function c(t,e){return t+e}function d(t){return t.name.toLowerCase().indexOf("scalar")>=0}function u(t,e){var o=0,i=Number.MAX_VALUE;t.forEach(function(t){t>o&&(o=t),t>=e&&t<i&&(i=t)});var n={};return o>0&&(n.max=o),i<Number.MAX_VALUE&&(n.nearest=i),n}function f(t,e,o,i){var n=t[o],r=e[o];return void 0!==n&&void 0!==r?i(n,r):void 0!==n?n:r}function h(t){return t&&t.name?n.getRoofMemoryLevel(t.name):""}if(t){var p=0,m=0,g=0,v=[],_=[],y=[];t.forEach(function(t){t.hidden||(t.isMem?(t.val>p&&(p=t.val),s()?h(t)===i.getLoopMemoryLevel(e)&&v.push(c(o,t.val)):v.push(c(o,t.val))):d(t)?(t.val>m&&(m=t.val),_.push(t.val)):(t.val>g&&(g=t.val),y.push(t.val)))});var b=a?y:y.concat(_),x=a?g:Math.max(m,g);b=b.filter(function(t){return l(p,t)<o&&t>=r}),v=v.filter(function(t){return t<x&&t>=r});var w,C=u(v,r),L=u(b,r),S={};w=s()?function(t,e,o,i){var n=t[i],r=e[i];if(void 0!==n&&void 0!==r){var a=Math.max(n,r);return a>o?o:a}return void 0!==o?o:void 0!==n?n:r}(C,L,C.max,"max"):f(C,L,"max",Math.max),void 0!==w&&(S.max=w);var P=f(C,L,"nearest",Math.min);return void 0!==P&&(S.nearest=P),S}}function d(t,e,o){t&&(void 0===e||void 0===o?h(t):t.setX(e).setY(o).front())}function u(t,e,o,i){if(t)if(void 0!==e&&void 0!==o&&i){S||(S=l.centralPart.canvas.getTextHeight({className:"roof_crossing_label"})),void 0!==P&&o-P<S?o=P+S:P=o,t.value.setText(i.value),t.gain.setText(i.gain);var n=e-2*R;t.el.setX(n).setY(o).front();var r=t.el.getBoundingRect();n-r.width<=0?t.el.setX(n+4*R).setStyle("text-anchor:start; dominant-baseline: middle;"):t.el.setStyle("text-anchor:end; dominant-baseline: middle;")}else p(t)}function f(t,e,o){b&&(void 0===o?m():b.setX1(t).setX2(t).setY1(e).setY2(o).front())}function h(t){d(t,-100,-100)}function p(t){t&&t.el.setX(-100).setY(-100)}function m(){f(-100,0,0)}function g(t,o){if(t){var i=e.getLoopPosition(t),n=e.getMemoryLevelPrefix(t),l=a(e.getRoofs(),n,i.x,i.y,t.vec);result.isValid()||result.create();var c;s()&&r.areShadowLoopsShown()&&(c=r.getLoopIntegratedColorStyleString(t)),result.setPos(i.x,i.y,l.max,l.nearest,o,c)}}var v,_,y,b,x,w,C,L,S,P,k,R=5*c;result={create:function(){function t(){var t=l.centralPart.graphicsRoot.createText().setClass("roof_crossing_label").setX(-100).setY(0).setFilter("TextBackground").setStyle("text-anchor:end; dominant-baseline: middle;"),o=t.addSpan().setClass("roof_crossing_label_value");t.addSpan(" "+e.getProp("measureY")+" ").setClass("roof_crossing_label_measure"),t.addSpan("(").setClass("roof_crossing_label_gain_x");var i=t.addSpan().setClass("roof_crossing_label_gain");return t.addSpan("x)").setClass("roof_crossing_label_gain_x"),{el:t,value:o,gain:i}}v=l.centralPart.graphicsRoot.createDefs().createLine("crossingTemplate").setX1(-4).setY1(-4).setX2(4).setY2(4).setClass("roof_crossing"),b=l.centralPart.graphicsRoot.addLine(-100,0,-100,0,"roof_crossing_line"),_=l.centralPart.graphicsRoot.createUse().setRef(v.localRef("crossingTemplate")),y=l.centralPart.graphicsRoot.createUse().setRef(v.localRef("crossingTemplate")),x=t(),w=t()},isValid:function(){return!!v},setPos:function(t,e,i,n,r,a){function s(t,e){if(void 0!==e)return{value:o.formatVal(e),gain:o.simpleFormat(Math.pow(10,e)/Math.pow(10,t),1)}}void 0===r&&(r=800),i===n&&(n=void 0),this.hide(),L=setTimeout(function(){var o,r,c=l.tr,h=c.L2PX(t),p=c.L2PY(e);i&&(o=c.L2PY(i)),n&&(r=c.L2PY(n)),P=void 0,f(h,p,o||r),d(_,h,o),d(y,h,r),a&&(v&&v.setStyle(a),b&&b.setStyle(a)),u(x,h,o,s(e,i)),u(w,h,r,s(e,n)),C=setTimeout(function(){this.hide(),C=void 0}.bind(this),9e3)}.bind(this),r)},hide:function(){C&&clearTimeout(C),L&&clearTimeout(L),s()&&(v&&v.setStyle("stroke:black;stroke-width:2;"),b&&b.setStyle("stroke:black;")),h(_),h(y),p(x),p(w),m()},clear:function(){v=_=y=x=w=b=void 0}},t.recv("rooflineCleared",result.clear,result),t.recv("rooflineResized",result.hide,result),t.recv("zoomFrameMoved",function(t){k&&(t?result.hide():g(k))}),t.recv("loopEntered",function(t){k=t,g(t)}),t.recv("loopLeaved",function(){k=void 0,result.hide()}),t.recv("zoomFrameChanged",function(){k&&g(k,0)}),result}();return{setRoofline:function(t){l=t},setScale:function(t){c=t}}}.apply(e,n),n=[C,h,R,c,u,g,d],z=function(t,e,o,i,n,r,a){function s(t){return t&&t.parentNode&&t.parentNode.owner&&t.parentNode.owner.isZoneCaption}function l(t){if(s(t))return t.parentNode.owner.textDescription}var c,d=1,u=r.get(),f=function(){function r(t,e,o,i,n,r,a){this.textTop=t,this.textBottom=e,this.textDescription=o,this.textRect=void 0,this.points=void 0,this.fillColor=i,this.opacity=n,this.textLineElemTop=void 0,this.textLineElemBottom=void 0,this.poly=void 0,this.textGradient=void 0,this.textGradientId="EllipsisGradient"+V(),this.calcPoints=r,this.calcRect=a}function s(t,e,i){function n(t,e){var o=c.centralPart.graphicsRoot.createText(t);return o&&e&&o.addSpan("?").addClass("idvcchart_roofline_explanation").setStyle("font-size: 80%").setAttr("dy","-7").activate(),o}function r(t,e){t.getBoundingRect().width<a?function(t,e){t.setStyle("text-anchor: middle;opacity:"+H).setAttr("fill",X).setX(l+a/2).setY(u-e).back()}(t,e):(this.textGradient||(this.textGradient=function(t){return o.roofDefs.get(c).createLinearGradient(t).useAbsoluteCoords().setY1("0").setY2("0").addStop("70%",X,H).addStop("100%",X,"0")}(this.textGradientId)),function(t,e,o){t.setStyle("text-anchor: start;").setAttr("fill",t.localUrl(o)).setX(l).setY(u-e).back()}(t,e,this.textGradientId))}if(t&&2===t.length){var a=t[1][0]-t[0][0];if(a<=Number.EPSILON)return!1;if(a>10*d){if(this.textLineElemTop?this.textLineElemTop.show():this.textLineElemTop=n(e),this.textLineElemBottom?this.textLineElemBottom.show():(this.textLineElemBottom=n(i,!0),this.textLineElemBottom.isZoneCaption=!0,this.textLineElemBottom.textDescription=this.textDescription),!this.textLineElemTop||!this.textLineElemBottom)return;var s=4*d,l=t[0][0]+s,u=t[1][1]-s;this._captionTextHeight||(this._captionTextHeight=c.centralPart.canvas.getTextHeight({className:"idvcchart_roofline_text"})),r.call(this,this.textLineElemTop,2*this._captionTextHeight),r.call(this,this.textLineElemBottom,this._captionTextHeight),this.textGradient&&this.textGradient.setX1(l).setX2(l+a)}else this.textLineElemTop&&this.textLineElemTop.hide(),this.textLineElemBottom&&this.textLineElemBottom.hide();return!0}}function l(t){this.poly||(this.poly=c.centralPart.graphicsRoot.createPolygon().setAttr("fill",this.fillColor).setStyle("opacity:"+this.opacity)),this.poly.setPoints(t).back()}function f(){if(!u.getState().useZoneColoring)return!1;var t=e.getRoofs(),o=0,i=0;return t.some(function(t){return!(!t||t.hidden)&&(t.isMem?o++:i++,o>0&&i>0)})}function h(){var t,o,i,n,r=e.getRooflineData();if(r){var a=r.minIntens,s=r.maxIntens,l=r.minPerf,c=r.maxPerf;intens=s-a,perf=c-l,t=a-W*intens,o=s+W*intens,i=l-W*perf,n=c+W*perf}return{minIntens:t,maxIntens:o,minPerf:i,maxPerf:n}}function p(t){if(t){var e=h(),o=e.minPerf,i=e.minIntens;return t.forEach(function(t){if(t&&!t.hidden&&t.isMem){var e=t.val+i;e>o&&(o=e)}}),o}}function m(t,e){return t<e}function g(t,e){return t>e}function v(t,i,n){var r,a=n;return o.forEachRoofsCrossings(e.getRoofs(),function(e){e&&Math.abs(e.y-t)<.01&&i(e.x,a)&&(r=e,a=e.x)}),r}function _(){var t=h(),i=o.getTopSelectedRoof(e.getRoofs(),!1);if(i&&t)return v(i.val,m,t.maxIntens)}function y(){var t=h(),i=o.getBottomComputeRoof(e.getRoofs(),!1);if(i&&t)return v(i.val,g,t.minIntens)}function b(){var t=h(),i=o.getBottomComputeRoof(e.getRoofs(),!0);if(i&&t)return v(i.val,m,t.maxIntens)}function x(){var t=h(),i=o.getTopSelectedRoof(e.getRoofs(),!1,!0);if(i&&t)return v(i.val,m,t.maxIntens)}function w(){var t=h(),i=o.getTopSelectedRoof(e.getRoofs(),!1,!0);if(i&&t)return v(i.val,g,t.minIntens)}function C(){var t=h(),i=o.getTopSelectedRoof(e.getRoofs(),!1);if(i&&t)return v(i.val,g,t.minIntens)}function L(){var t,i=h(),n=i.maxIntens,r=i.maxPerf;return o.forEachRoofsCrossings(e.getRoofs(),function(e){e&&e.x<=n&&e.y<=r&&(t=e,n=e.x,r=e.y)}),t}function S(){var t=L(),o=p(e.getRoofs());if(t&&o){var i=h(),n=[t.x,t.y],r=[i.minIntens,i.minPerf],a=[i.minIntens,o];if(O===Y.vector){var s=b();if(!s)return;n=[s.x,s.y]}return[[r[0],r[1]],[r[0],a[1]],[n[0],n[1]],[n[0],r[1]]]}}function P(){var t=L(),e=_(),o=C();if(O===Y.vector)t=b(),e=x(),o=w();else if(O===Y.scalar){var i=y();i&&(o=i,e=i)}else e=x(),o=w();if(t&&e&&o){var n=h(),r=n.minPerf;return[[t.x,r],[t.x,t.y],[e.x,e.y],[o.x,o.y],[o.x,r]]}}function k(){var t,i=C();if(O===Y.scalar?t=o.getBottomComputeRoof(e.getRoofs(),!1):i=w(),i){var n=i.y;t&&(n=t.val);var r=h(),a=[i.x,n];if(O===Y.scalar){var s=y();if(i=C(),s&&i){var l=i.y;s&&(l=s.y),a=[s.x,l]}}return[[a[0],r.minPerf],a,[r.maxIntens,n],[r.maxIntens,r.minPerf]]}}function R(t){if(t&&!(t.length<4))return[[t[0][0],t[2][1]],[t[2][0],t[0][1]]]}function T(t){if(t&&!(t.length<5))return[[t[1][0],t[1][1]],[t[4][0],t[4][1]]]}function E(t){if(t&&!(t.length<4))return[[t[1][0],t[1][1]],[t[3][0],t[3][1]]]}function M(t){N.forEach(function(e){e&&e.clear(t)})}function z(){N.length||(N=[new r(n.getMessage("roofline_zone_theoretically"),n.getMessage("roofline_zone_memory_bound"),n.getMessage("roofline_zone_memory_description"),"rgb(240, 50, 50)",.06,S,R),new r(n.getMessage("roofline_zone_mixed_line1"),n.getMessage("roofline_zone_mixed_line2"),n.getMessage("roofline_zone_mixed_description"),"rgb(200, 40, 40)",.1,P,T),new r(n.getMessage("roofline_zone_theoretically"),n.getMessage("roofline_zone_compute_bound"),n.getMessage("roofline_zone_compute_description"),"rgb(160, 30, 30)",.14,k,E)]),N.forEach(function(t){t&&t.calculate()})}function I(t){(t||f())&&N.forEach(function(t){t&&t.draw()})}function A(){N&&3==N.length&&(O===Y.vector?(N[0].setTopText(n.getMessage("roofline_zone_vector_memory_line1")),N[2].setTopText("")):O===Y.scalar?(N[0].setTopText(""),N[2].setTopText(n.getMessage("roofline_zone_scalar_compute_line1"))):(N[0].setTopText(""),N[2].setTopText("")))}function D(){I(!1)}function B(t){O="1"==t?Y.vector:"2"==t?Y.scalar:Y.none,A(),F.refresh()}var X="rgb(160, 0, 0)",H=.6,V=function(){var t=1;return function(){var e=t;return t<Number.MAX_SAFE_INTEGER?t++:t=1,e}}(),Y={scalar:"scalar",vector:"vector",none:"none"},O=Y.none;r.prototype.calculate=function(){this.calcPoints&&this.calcRect&&(this.points=this.calcPoints(),this.textRect=this.calcRect(this.points))},r.prototype.setTopText=function(t){void 0!==this.textTop&&(this.textTop=t,this.textLineElemTop&&this.textLineElemTop.setText(t))},r.prototype.draw=function(){function t(t){if(t)return t.map(function(t){if(t&&2===t.length)return[c.tr.L2PX(t[0]),c.tr.L2PY(t[1])]}).filter(function(t){return!!t})}if(!this.points||this.points.length<3||!c||!c.tr)return void this.clear(!0);s.call(this,t(this.textRect),this.textTop,this.textBottom)?l.call(this,t(this.points)):this.clear(!0)},r.prototype.clear=function(t){t&&(this.poly&&this.poly.remove(),this.textLineElemTop&&this.textLineElemTop.remove(),this.textLineElemBottom&&this.textLineElemBottom.remove(),this.textGradient&&this.textGradient.remove()),this.textLineElemTop=void 0,this.textLineElemBottom=void 0,this.poly=void 0,this.textGradient=void 0};var N=[],W=i.getChartAreaPadding(),F={refresh:function(){f()?(z(),A(),I(!0)):M(!0)},clear:M};return t.recv("rooflineCleared",F.clear,F),t.recv("rooflineResized",D,F),t.recv("roofsCreated",F.refresh,F),t.recv("roofsUpdated",F.refresh,F),t.recv("roofVisibilityChanged",F.refresh,F),t.recv("roofSelectionChanged",F.refresh,F),a.addConsumer("changePerspective",{process:B}),F}();return i.addTooltipProcessor({accept:s,getText:l}),r.addCheckSetting("use_zone_coloring","useZoneColoring",function(t){f.refresh(),t&&u.changeSetting("colorMode",2,!0)},!0),{setRoofline:function(t){c=t},setScale:function(t){d=t}}}.apply(e,n),n=[C,h,l,c,S,u,s],I=function(t,e,o,i,n,r,a){function s(t,e,o,i,n){if(!(t.length<2)){var r=t[0].x,a=t[0].y,s=t[1].x,c=t[1].y;this.line=v.centralPart.graphicsRoot.addLine(r,a,s,c,n.line),this.line.setStyle("marker-end:"+this.line.localUrl(e.arrow)),this.text=v.centralPart.graphicsRoot.createText(o).setClass(n.caption).setStyle("text-anchor: middle;").activate(),l(this.text,r,a,s,c),this.text.setAttr("tooltip",i)}}function l(t,e,o,i,n){if(t){if(e>i){var r=[i,e];e=r[0],i=r[1];var a=[n,o];o=a[0],n=a[1]}var s,l=Math.atan2(n-o,i-e),u=4*_,f=u*Math.sin(l),h=u*Math.cos(l),p=(e+i)/2+f,m=(o+n)/2-h,g=t.getBoundingRect().width,v=Math.sqrt(Math.pow(i-e,2)+Math.pow(n-o,2));if(g>v){c();s=d(Math.floor(v/g*10)/10)}t.setX(p).setY(m).setTransform("rotate("+function(t){return 180*t/Math.PI}(l)+" "+p+","+m+")"),s?t.setAttr("fill",t.localUrl(s)):t.setAttr("fill",y)}}function c(){C||(v.centralPart.graphicsRoot.createDefs("TextEllipsisTemplateDefs").createLinearGradient("TextEllipsisTemplate").setY1("0").setY2("0").setX1("0").setX2("1").addStop("0%",y,"0").addStop("20%",y,"1").addStop("85%",y,"1").addStop("100%",y,"0"),C=!0)}function d(t){t<.1&&(t=.1);var e="TextEllipsis_"+Math.floor(10*t);if(!L.has(e)){var o=(1-t)/2,i=v.centralPart.graphicsRoot;i.getDefs("TextEllipsisDefs").createLinearGradient(e).setTransform("translate("+o+"),scale("+t+")").setRef(i.localRef("TextEllipsisTemplate")),L.add(e)}return e}function u(t,e,i,n){if(void 0!==t&&void 0!==e){t=n(t),e=n(e);var r=t-e,a=r>0?"+":"";return{percent:a+o.simpleFormat(100*r/Math.max(t,e),2)+"%",formula:a+o.simpleFormat(r)+" "+i+" = "+t+" "+i+" - "+e+" "+i}}}function f(t,i){var n={caption:"",tooltip:""};if(!t||!i)return n;var s=e.getRooflineData4Loop(t);if(!s)return n;var l=void 0!==t.y1&&void 0!==i.y1,c=u(l?i.y1:i.y,l?t.y1:t.y,s.measureY,o.formatVal),d=u(i.totalTime,t.totalTime,"s",o.formatTime);if(!c||!d)return n;var f=s.measureY.replace(/giga|g/i,""),h=a.format(r.getMessage("roofline_matching_loops_delta"),f,c.percent,c.formula),p=a.format(r.getMessage("roofline_matching_loops_delta"),"t",d.percent,d.formula),m=l?s.namePref1+" ":"",g=h+"<br/>\n      "+a.format(r.getMessage("roofline_matching_loops_delta_description"),m+s.nameY,s.measureY)+"\n      <br/><br/>\n      "+p+"<br/>\n      "+a.format(r.getMessage("roofline_matching_loops_delta_description"),"Total Time","seconds");return{caption:c.percent,tooltip:g}}function h(t){t&&t.rooflinePoint&&!t.rooflinePoint.isHidden()&&!t.rooflineConnectedMatching&&e.forEachMatchingLoops(t,function(e){if(e.rooflinePoint&&!e.rooflinePoint.isHidden()){t.rooflineConnectedMatching||(t.rooflineConnectedMatching=[]);var o=e.rooflineConnectedMatching;if(!o||!o.find(function(e){return e&&e.loop==t})){n.setLoopPointFront(e.rooflinePoint,v);var i=f(t,e),r=new s(n.getLoopPoints(t,e),{arrow:b},i.caption,i.tooltip,{line:w,caption:x});t.rooflineConnectedMatching.push({loop:e,line:r})}}},this)}function p(t){t&&t.rooflineConnectedMatching&&t.rooflineConnectedMatching.forEach(function(e){return e.line.update(n.getLoopPoints(t,e.loop))})}function m(t,e){t&&t.rooflineConnectedMatching&&(e&&t.rooflineConnectedMatching.forEach(function(t){return t.line.remove()}),delete t.rooflineConnectedMatching)}function g(t){t||(C=!1,L.clear()),e.forEachLoopsSimple(e.getLoops(),function(e){return m(e,t)})}var v,_=1,y="black",b="loops_matching_arrow",x="loops_matching_label",w="loops_matching_line";s.prototype.update=function(t){if(!(t.length<2)){var e=t[0].x,o=t[0].y,i=t[1].x,n=t[1].y;this.line.setX1(e).setY1(o).setX2(i).setY2(n),l(this.text,e,o,i,n)}},s.prototype.remove=function(){this.line&&this.line.remove(),delete this.line,this.text&&this.text.remove(),delete this.text};var C=!1,L=new Set;return i.addTooltipProcessor({accept:function(t){return t&&t.classList.contains(x)},getText:function(t){return t.getAttribute("tooltip")}}),t.recv("rooflineCleared",g),t.recv("pointsSelectionChanged",function(t){g(!0),t&&t.reverse().forEach(function(t){return t&&!t.filtered&&h(t)})}),t.recv("rooflineResized",function(t){t&&v.selectedPoints.forEach(function(t){return t&&t.loopData&&!t.loopData.filtered&&p(t.loopData)})}),t.recv("loopsCreating",function(){i.createLineArrowMarker(b,"loops_matching_arrow",v,_)}),{setRoofline:function(t){v=t},setScale:function(t){_=t}}}.apply(e,n),n=[M,E,z,I],A=function(){function t(t,o){e.forEach(function(e){e[t]&&e[t](o)})}var e=[].slice.call(arguments);return{setRoofline:function(e){t("setRoofline",e)},setScale:function(e){t("setScale",e)},setConfiguration:function(e){t("setConfiguration",e)}}}.apply(e,n),n=[g,m,l,d,h,P,T,A,c,C,s,b,y],D=function(t,e,o,i,n,r,a,s,l,c,d,u,f){function h(t,e,o){var i=R/2;t.createMarker(e).setMarkerWidth(T).setMarkerHeight(R).setRefX(1).setRefY(i).setOrient("auto").setMarkerUnits("userSpaceOnUse").createPath().moveToAbs(0,0).lineToAbs(0,R).lineToAbs(T,i).lineToAbs(0,0).setD().setClass(o)}function p(){f.DefValueRepresentation.call(this)}function m(t,e,o){t.setStyle("stroke: transparent; stroke-width:"+R+"; marker-start:"+t.localUrl(e)),C&&C.centerMarker&&(o?C.centerMarker.activate():C.centerMarker.deactivate())}function g(t){if(C&&t.length){C.onSelectionChanged.unsubscribe(null,w),C.clearSelectedPoints();var e=t.shift();e&&(C.currentPoint=e.rooflinePoint),t.forEach(function(t){t&&C.addSelectedPoint(t.rooflinePoint)}),w(void 0,void 0,!0),C.onSelectionChanged.subscribe(null,w)}}function v(t){function e(t){var e="id";return"rvas"===t?e="rva":"locations"===t&&(e=function(t,e){return t.locat+t.name===e}),e}function o(t,e,o,i){function n(e){return"string"==typeof o?e[o]===t:"function"==typeof o&&o(e,t)}t&&e&&o&&i&&C.points[e](function(t){return!!n(t.loopData)&&(i(t),!0)})}if(C){var i=t.shift();if(C.onSelectionChanged.unsubscribe(null,w),C.clearSelectedPoints(),C.currentPoint=void 0,t.length){o(t.shift(),"some",e(i),function(t){C.currentPoint=t});var n=[],r=!1;t.forEach(function(t){void 0!==t?(r&&(n=[],r=!1),o(t,"ids"!==i?"forEach":"some",e(i),function(t){C.addSelectedPoint(t),n.push(t)})):r=!0}),w(void 0,void 0,!0),C.onSelectionChanged.subscribe(null,w),z(n)}}}function _(t,e,o){e=e||function(t){return t},t.push(C.currentPoint&&!C.currentPoint.loopData.filtered?e(C.currentPoint.loopData):o),C.selectedPoints.forEach(function(o){o&&o.loopData&&!o.loopData.filtered&&t.push(e(o.loopData))})}function y(t){var o=!(!t||!t.isOldData),i=!(!t||!t.isNewRoofs),s=!(!t||!t.movingZoomFrame),u=!(!t||!t.changingZoomFrame),f=!(!t||!t.changingRoofs),m=!o||!!C.centralPart.selection,v=s||u||f,y=(o||!(!t||!t.keepSelection))&&!v,x=n.getRooflineData();if(x){var w=d.disableElement(document.body,"Processing...",function(){var t=n.getLoops();return t&&t.length>250||!o});o=o&&!i;try{var R=function(t,e,o,i){var n=0,r=Math.floor(t);r<e&&(r=Math.ceil(t));for(var a=r;a<o;a++)i.addValue(a),n++;return n},T=function(t,e,o){o.addValue(t),t!==e&&o.addValue(e)},z=function(t,e,o){o.changeValue(0,t),t!==e&&o.changeValue(1,e)},I=function(t){var e,o=t.val;if(t.isMem){o=t.val+Q;var i=U?W:it;i<=o&&(i=it);e=[o,i-t.val,i]}else{var n;n=G?t.val-$:Q,e=[n,o]}return e},A=[];y&&_(A),v?s||(C.horzAxis.clear(),C.vertAxis.clear()):c.send("rooflineCleared"),L=e.get(n.isHierarchical()),r.setZoomer(L),o||P.apply(),P.disableSaving();var D=n.getRoofs()||[];if(x.loops=x.loops||[],o||function(t){function e(e,o){function i(e){return e&&t&&t[e]?t[e]:""}var n=i(e),r=i(o);return n+(r?' (<span class="axis_caption_expl">'+r+"</span>)":"")}var o=d.getElementById("roofline_vert_axis_caption");o&&(o.innerHTML=e("measureY"));var i=d.getElementById("roofline_horz_axis_caption");i&&(i.innerHTML=e("measureX","nameX"))}(x),document.body.classList.remove("data_loading"),x.noDataMessage){var B=document.getElementsByClassName("no_data_message");if(B.length){l.hideStdTooltip(),C.centralPart.hideTooltip(),document.body.classList.add("no_data");var X=B[0];return X.firstElementChild.innerHTML=x.noDataMessage.title,void(X.lastElementChild.innerHTML=x.noDataMessage.descr)}}else document.body.classList.remove("no_data"),n.isHierarchical()?document.body.classList.remove("plain_data"):document.body.classList.add("plain_data");n.applySavedHierarchy(x.loops),D.length?document.body.classList.remove("no_roofs"):document.body.classList.add("no_roofs");var H=s?t.movingZoomFrame:L.getMinMax(!0),V=H.minX,Y=H.maxX,O=H.minY,N=H.maxY,W=-Number.MAX_VALUE,F=Number.MAX_VALUE,j=Number.MAX_VALUE,$=-Number.MAX_VALUE,G=0,U=0;D.forEach(function(t){t.hidden||(t.isMem?(j=Math.min(j,t.val),$=Math.max($,t.val),G++):(W=Math.max(W,t.val),F=Math.min(F,t.val),U++))});var Z=i||f||void 0===x.minIntens||void 0===x.maxIntens||void 0===x.minPerf||void 0===x.maxPerf,q=s?t.movingZoomFrame:L.getCurrentZoom();if((Z||!q)&&U&&G){var K=W-j;Y=Math.max(Y,K),V=Math.min(V,K),K=F-$,V=Math.min(V,K)}var J=Y-V;Y===V&&(J=Math.abs(V));var Q=V-k*J,tt=Y+k*J;!Z&&q||(U&&(O=Math.min(O,F),N=Math.max(N,W)),G&&(O=Math.min(O,j+Q),(N=Math.max(N,$+Q))===$+Q&&(N=$+(Q+tt)/2)));var et=N-O;N===O&&(et=Math.abs(O)),!Z&&q||(x.minIntens=V,x.maxIntens=Y,x.minPerf=O,x.maxPerf=N,L.saveMinMax(x)),Z&&q&&(V=H.minX,Y=H.maxX,O=H.minY,N=H.maxY,J=Y-V,et=N-O,Q=V-k*J,tt=Y+k*J);var ot=O-k*et,it=N+k*et,nt=100*S;if(C.setViewbox(Q,ot,tt,it,nt,nt),s)z(V,Y,C.horzAxis),z(O,N,C.vertAxis),x.programTotal&&(C.vertAxis.changeValue(2,x.programTotal.y),C.horzAxis.changeValue(2,x.programTotal.x));else{var rt=function(t){var e=t.canvas.createDefs();h(e,M,"total_value_tick"),h(e,E,"total_value_tick_active")};q?(T(V,Y,C.horzAxis),T(O,N,C.vertAxis)):(R(V,Q,tt,C.horzAxis)||T(V,Y,C.horzAxis),R(O,ot,it,C.vertAxis)||T(O,N,C.vertAxis)),x.programTotal&&(rt(C.vertAxis),rt(C.horzAxis),C.vertAxis.addValue(x.programTotal.y,void 0,p),C.horzAxis.addValue(x.programTotal.x,void 0,p),b(C.vertAxis,x.programTotal.x,x.programTotal.y),b(C.horzAxis,x.programTotal.x,x.programTotal.y)),C.addGridLines(),C.vertAxis.layoutValues(),C.horzAxis.layoutValues()}v?(a.recalculateRoofs(D,I),d.refreshSize(C.centralPart.body,{movingZoomFrame:!0})):(m&&C.centralPart.createFreeSelection(),a.fillRoofsPatterns(),r.fillLoops(x.loops),r.fillSettings(),r.fillHistogramChart("roofline_legend"),a.fillRoofs(D,I),x.programTotal&&C.setCenterMarker(x.programTotal.x,x.programTotal.y,S)),y&&g(A)}finally{P.enableSaving(),w.end()}}}function b(t,e,o){if(t&&t.values&&t.values.length){var i=t.values[t.values.length-1],n=i.representation.line;n&&n.setAttr(l.tooltipAttr,"<b>Program Total</b><br>"+x(e,o))}}function x(t,e){var i,r=n.getRooflineData();return C&&C.tr&&r&&(i=r.nameY+o.pref+o.formatVal(e)+o.post+r.measureY+"<br>"+r.nameX+o.pref+o.formatVal(t)+o.post+r.measureX),i}function w(t,e,o){I||(I=setTimeout(function(){I=void 0;var t=[];_(t),t.shift(),c.send("pointsSelectionChanged",t),t=[],_(t,function(t){return t.resIndex?"-1":t.id},"-1"),c.send("loopsSelectionChanged",{points:t,quiet:o})},50))}var C,L,S=1,P=t.get(),k=l.getChartAreaPadding();c.recv("rooflineCleared",function(){C&&C.clear(),document.body.classList.remove("no_data"),document.body.classList.add("data_loading")}),c.recv("rooflineDataUpdated",y),c.recv("loopHighlighted",function(t){if(t){var e=t.rooflinePoint;e&&setTimeout(z,50,[e])}}),p.prototype=Object.create(f.DefValueRepresentation.prototype);var R=10,T=6,E="TotalValueActive",M="TotalValue";p.prototype.create=function(t,e,o,i,n){f.DefValueRepresentation.prototype.create.call(this,t,e,o,i,n),m(this.line,M),this.line.activate(),this.line.on("mouseenter",m.bind(this,this.line,E,!0)),this.line.on("mouseleave",m.bind(this,this.line,M,!1)),this.text.setClass("").setAttr("fill","none")};var z=function(){function t(){r=0,a=0,s=!0}function e(){o(i,!0,!0),i=[]}function o(t,e,o){t.forEach(function(t){t.hasClass("no_loop_position")&&(o?t.remClass("flashed"):t.addClass("flashed")),e?t.remAttr("opacity"):t.setAttr("opacity","0")})}var i=[],r=0,a=0,s=!0;return function(l){var c=l.map(function(t){for(var e=t;e&&e.el&&e.el.isHidden();){var o=e.loopData;if(!o||!n.getParent(o))break;e=n.getParent(o).rooflinePoint}return e}).filter(function(t,e,o){return t&&o.indexOf(t)==e}).map(function(t){return t.el}),u=i.length>0;u&&e(),c.length?(t(),i=c,u||d.animate(function(t){return!(a>=10)&&(t-r>=100&&(a++,r=t,s=!s,o(i,s)),a<10)},e)):a=10}}();i.addConsumer("selectedLoops",{process:v}),l.addDefTooltipProcessor({accept:function(){return!0},getText:function(t,e,o){return x(e,o)}});var I;return{createRoofline:function(t){return n.setPointConstructors([u.SquarePoint,u.TrianglePoint,u.DiamondPoint]),C=u.create(t,"0"),C.onResize.subscribe(void 0,c.send.bind(c,"rooflineResized")),C.centralPart.ontooltiptext=l.getTooltipText,C.centralPart.ontooltipattrs=function(t,e,o,i){return{autoHideDelay:e.length>100?1e4:5e3}},r.setRoofline(C),a.setRoofline(C),s.setRoofline(C),C.onSelectionChanged.subscribe(null,w),C.onCurrentPointChanged.subscribe(null,c.send.bind(c,"currentPointChanged")),C.horzAxis.onformat=o.formatVal,C.vertAxis.onformat=o.formatVal,C},setScale:function(t){S=t,r.setScale(S),a.setScale(S),s.setScale(S)},setConfiguration:function(t){t&&(r.setConfiguration(t.loops),a.setConfiguration(t.roofs),s.setConfiguration(t))}}}.apply(e,n),new Promise(function(t){t()}).then(function(){var t=[m,g,D,l,d,h,c,w,u,k,v,C,R,s,b];(function(t,e,o,i,n,a,s,l,c,d,u,f,h,p,m){function g(t){return document.body.classList.contains(t)}function v(){return g("data_loading")}function _(){return g("no_data")}function y(t){return!!t&&Y.some(function(e){return t.endsWith(e)})}function b(t){t&&t.stopMoving||(k(),T(),f.send("rooflineDataUpdated",{isOldData:!0,changingZoomFrame:!0}),f.send("zoomFrameChanged"))}function x(){vt&&s.flashElement(function(){vt.splitterDiv.classList.add("roofline_flash")},function(){vt.splitterDiv.classList.remove("roofline_flash"),vt.removeSash(),vt.addSash(),vt.splitterDiv.setAttribute(s.tooltipAttr,j()),vt.sashDiv.setAttribute(s.tooltipAttr,j())},2e3)}function w(){k(),l.refresh()}function C(t){n.sendNotification(t)}function L(t){C("loadcompare-"+(t||""))}function S(t){C("changeRoofs-"+t)}function P(t,e){e?p.removeClass(t,"disabled"):p.addClass(t,"disabled")}function k(){var t={undo:!1,redo:!1,cancel:!1};a.getRooflineData()&&(t=F.getZoomState()),P(q,t.undo),P(K,t.redo),P(J,t.cancel)}function R(t){if(a.getRooflineData()){var e=_t.selectedPoints;e.length?et.classList.remove("no_selection"):et.classList.add("no_selection");var o=0,n=0;e.forEach(function(t){var e=t.loopData;o+=e.selfElapsedTime||e.selfTime,n+=e.totalElapsedTime||e.totalTime}),t||et.classList.remove("summary_updated");var r=a.getRooflineData(),s=r.attrs.selfElapsedTime||r.attrs.selfTime,l=r.attrs.totalElapsedTime||r.attrs.totalTime;ot.innerHTML=s.name+":",rt.innerHTML=l.name+":",nt.innerHTML=s.measure,st.innerHTML=l.measure,it.innerHTML=i.formatTime(o),at.innerHTML=i.formatTime(n),lt.refreshSize(),t||setTimeout(function(){et.classList.add("summary_updated"),setTimeout(function(){et.classList.remove("summary_updated")},1500)},50)}}function T(t){function e(t,e){e?p.addClass(t,"pressed"):p.removeClass(t,"pressed")}if(!this.classList||!this.classList.contains("disabled")){if(!t){var o={undo:!1,redo:!1,cancel:!1};a.getRooflineData()&&(o=F.getZoomState()),dt!==ct.move||o.cancel||(t=ct.zoom),P(Z,o.cancel)}var i,n=t&&t!==dt;n&&(i=dt,dt=t),ft.forEach(function(t){e(t.btn,dt===t.type),n&&i===t.type&&t.off&&t.off(),dt===t.type&&(n&&t.on&&t.on(),_t.centralPart.body.style.cursor=t.cursor||"default")})}}function E(t){if((!this.classList||!this.classList.contains("disabled"))&&a.getRooflineData()&&F){F.getZoomState()[t]&&F[t+"Zoom"]()}}function M(){var t={},e=a.getRooflineData();return p.copyObject(e,t,function(t,e){return!("object"===(void 0===t?"undefined":X(t))&&t.el||0===e.indexOf("rooflineConnected")||0===e.indexOf("matchingLoops")||"resultInfo"===e)}),t}function z(t){var e=t&&t.width||ht,o=t&&t.height||pt,i=document.getElementById("roofline_content");if(i){var n=function(t){return t.children[0].innerHTML.replace(g,"")},r=vt.splitterDiv.offsetWidth+vt.secondaryDiv.offsetWidth-1;r<0&&(r=0),i.style.width=e+r+"px",i.style.height=o+"px",p.refreshSize(i);var s='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 %whole_width% %whole_height%">\n<style>\n  svg { font : caption; }\n    .idvcchart_axis { fill: none; stroke: gray; stroke-width: 1; vector-effect: non-scaling-stroke; shape-rendering: crispEdges; }\n    .idvcchart_axis_text { fill: #333; font-size: 95%25; stroke: none; stroke-width: 1; vector-effect: non-scaling-stroke; }\n    .idvcchart_roofline_text { fill: gray; font-size: 90%25; }\n    .idvcchart_roofline_text.selected { fill: #000; }\n    .idvcchart_roofline_text.hidden { fill: none; }\n    .idvcchart_roofline_explanation { fill: none; }\n    .idvcchart_roofline_center_marker { stroke: #000; stroke-width: 1 }\n    .roofline_child_line { stroke: none; fill: none; }\n    .roofline_parent_line { stroke: none; fill: none; }\n    .roofline_child_arrow { stroke: none; fill: none; }\n    .roofline_parent_arrow { stroke: none; fill: none; }\n    .roofline_loop { stroke: #000; stroke-width: 1; vector-effect: non-scaling-stroke; shape-rendering: geometricPrecision; fill: lightgray; }\n    .roofline_loop.no_loop_position { stroke: darkgray; fill: #eee; }\n    .roofline_loop.loop_inactive_result { opacity: 0.4; }\n    .idvcroofline_line { stroke: #999; stroke-dasharray: 4,4; fill: none; stroke-width: 1; vector-effect: non-scaling-stroke; shape-rendering: crispEdges; }\n    .idvcroofline_grid_line { stroke: #ddd; fill: none; stroke-width: 1; vector-effect: non-scaling-stroke; shape-rendering: crispEdges; }\n    .idvcroofline_line.selected { stroke: #000; shape-rendering: auto; stroke-dasharray: none; }\n    .line_hotarea { stroke: none; fill: none; }\n    .roofline_roofs_cross { stroke: none; fill: none; }\n    .roofline_coord_line { stroke: none; fill: none; stroke-width: 1; vector-effect: non-scaling-stroke; shape-rendering: crispEdges; }\n    .roofline_coord_line.selected { stroke: gray; stroke-dasharray: none !important; }\n    .roofline_expander { stroke: none; fill: none; }\n    .roofline_expander_vert_line { stroke: none; fill: none; }\n    .roofline_expander_horz_line { stroke: none; fill: none; }\n    .roof_crossing { stroke: none; fill: none; }\n    .roof_crossing_line { stroke: none; fill: none; }\n    .roof_crossing_label { stroke: none; fill: none; }\n    .total_value_tick_active { stroke: none; fill: none; }\n    .total_value_tick { stroke: none; fill: none; }\n    .idvc_hidden { stroke: none !important; fill: none !important; }\n</style>\n<g>\n  <svg id="vert_axis" viewBox="0 0 %vert_axis_width% %content_height%" width="%vert_axis_width%" height="%content_height%">\n    %vert_axis_content%\n  </svg>\n</g>\n<g transform="translate(%vert_axis_width%, %content_height%)">\n  <svg id="horz_axis" viewBox="0 0 %content_width% %horz_axis_height%" width="%content_width%" height="%horz_axis_height%">\n    %horz_axis_content%\n  </svg>\n</g>\n<g transform="translate(%vert_axis_width%, 0)">\n  <svg id="roofline_content" viewBox="0 0 %content_width% %content_height%" width="%content_width%" height="%content_height%">\n    %roofline_content%\n  </svg>\n</g>\n</svg>',l=i.children[0],c=l.children[0],d=l.children[1],u=l.children[2],f=a.getRooflineData(),h='<text x="2" y="2" style="font-size: 90%25; writing-mode: tb; dominant-baseline: text-after-edge">'+f.measureY+"</text>",m='<text x="'+(c.offsetWidth-4)+'" y="'+(c.offsetHeight-2)+'" style="font-size: 90%25; text-anchor: end; dominant-baseline: text-after-edge"><tspan>'+f.measureX+'</tspan><tspan style="font-size: 90%25;"> ('+f.nameX+")</tspan></text>",g=/data-\w+\s*=\s*"[^"]*"/gi,v=c.children[0].innerHTML;v=v.replace(g,"").replace(/<(tspan)[^<>]*>\?<\/\1>/gi,"").replace(/<(\w+)[^<>]*idvc_hidden[^<>]*>[^<>]*<\/\1>/gi,"");var _=n(d),y=n(u),b={};b["%vert_axis_width%"]=d.offsetWidth,b["%horz_axis_height%"]=u.offsetHeight,b["%content_width%"]=c.offsetWidth,b["%content_height%"]=c.offsetHeight,b["%whole_width%"]=c.offsetWidth+d.offsetWidth,b["%whole_height%"]=c.offsetHeight+u.offsetHeight,b["%vert_axis_content%"]=_,b["%horz_axis_content%"]=y,b["%roofline_content%"]=v+h+m;var x=s.replace(/%\w+%/g,function(t){return b[t]});return i.style.width="",i.style.height="",p.refreshSize(i),x}}function I(t){if(!t||t.classList.contains("selected"))return!1;t.classList.add("selected");var e="";e=t.childNodes.length?t.childNodes[0].textContent:t.innerHTML,Q.setAttribute(s.tooltipAttr,e);var o=t,i=0;do{(o=o.previousElementSibling)&&(o.classList.remove("selected"),i++)}while(o);mt.index=i,o=t;do{(o=o.nextElementSibling)&&o.classList.remove("selected")}while(o);return!0}function A(){C("ready4data-"+(O.getState().rooflineType||H))}function D(t){return!(!t||"li"!==t.nodeName.toLowerCase())}function B(t){if(t){var e=parseInt(t.getAttribute("data-index"));if(e>=0)return e}return-1}var H,V,Y=["advixeexp","advixeexpz"],O=e.get(),N={stateLoaded:!1,initialized:!1,initStateManager:function(){this.stateLoaded=!0,this._send()},setInitialized:function(){this.initialized=!0,this._send()},_send:function(){this.stateLoaded&&this.initialized&&C("contentLoaded")}},W=function(){var t;return function(){return void 0===t&&(t=document.body.classList.contains("report")),t}}();O.init(N.initStateManager.bind(N),C);var F;n.addConsumer("refreshRooflineView",{process:function(t){t=t||1;var e=a.getRooflineData();e&&(!e.updatedView||t>100)&&(e.updatedView=!0,setTimeout(function(){f.send("rooflineDataUpdated",{isOldData:!0}),a.isHierarchical()&&t<=100&&vt&&vt.isSecondaryFolded()&&x()},100))}});var j=function(){var t;return function(){return t||(t=c.getMessage("roofline_show_callstack_tooltip")),t}}();n.addConsumer("threadsInfo",{process:function(t){function e(t){return t>0?t:1}if(t){var o=e(t.physicalCoreCount),i=e(t.usedNumberOfThreads),n=e(t.processorPackageCount),r=function(t,e){return t>1&&(t+=t%2),t<e?t:e}(i,o);document.getElementById("cores_value").innerHTML=o;document.getElementById("threads_value").innerHTML=i,lt.refreshSize(),xt.init(r,o,n)}}}),n.addConsumer("rooflineData",{showNoDataToCompare:function(t){s.toast("No data to compare"+(t?" in "+t:""))},showNoDataToCompareBadFileType:function(t){var e=".<br/>Suggestion: Use a "+Y.map(function(t){return"*."+t}).join(" or ")+" file type.",o=t.split("/").pop();o=o||t,s.toast("This file type cannot be loaded for comparison: "+o+e)},noStackErrors:0,process:function(e){var o=a.isFiltered(),i=!1,n=O.getState(),r=!!n.useSTRoofsStrategy,s=h.getRoofsConfiguration(a.getThreadCount(),r,a.getPackageCount()),c=v()||_(),d=!0;if(e){if(d=!e.loops||!e.loops.length,o&&!e.isFiltered&&(e.isFiltered=!0),e.resultInfo){var p=bt.getCaption(e.resultInfo.path);p&&(e.resultInfo.caption=p),e.loading?(e.resultInfo.loading=!0,delete e.loading):e.comparing&&(e.resultInfo.comparing=!0,delete e.comparing)}i=a.isNewData(e),s.isNewData=Number(i);var m=!0;if(e.resultInfo&&e.resultInfo.path&&(m=y(e.resultInfo.path)),!i&&d&&!m)return void this.showNoDataToCompareBadFileType(e.resultInfo.path);a.setRooflineData(e,s.threadCount,h.getRoofsStrategyId(r),s.packageCount),i&&a.setWholeView(n.viewMode&&"fittoview"!==n.viewMode)}F=t.get(a.isHierarchical()),F.zoomChanged.subscribe(void 0,b),F.undoListChanged.subscribe(void 0,w),F.clearDataUndo(),k(),l.fill(null),u.clear();var g;if(vt&&(vt.splitterDiv.classList.remove("roofline_flash"),a.isHierarchical()?gt.get()?vt.isSecondaryFolded()&&vt.unfold():(vt.isSecondaryFolded()&&!vt.isSplitterHidden()||vt.foldSecondary(),g=vt.isSecondaryFolded()):vt.isSecondaryFolded()&&vt.isSplitterHidden()||vt.foldSecondary(!0)),bt.init(),!i||0!==a.getRoofs().length||e.noDataMessage){f.send("rooflineDataUpdated",{isOldData:!i,isNewRoofs:!0});var C=a.getResultCount();e&&!e.noDataMessage&&(i&&(c&&$.refreshSize(),vt&&g&&x()),W()&&C<=1&&bt.hide()),(!i||C>1)&&bt.update()}else g&&vt&&(vt.flashSplitter=!0),S(s.str());this.noStackErrors=0},onerror:function(t,e){e.indexOf("resultInfo")>0?this.showNoDataToCompare():t.stack||this.noStackErrors?(this.noStackErrors=0,d.showMessage(d.getMessage(t))):(this.noStackErrors=1,setTimeout(f.send.bind(f,"rooflineDataUpdated"),100))}}),n.addConsumer("comparisonInfo",{process:function(t){t&&t.comparison&&t.comparison.length||s.toast("No matched loops/functions found"),a.updateComparisonResults(t)&&bt.update()}}),n.addConsumer("changedRoofs",{process:function(t){if(t){var e=v();a.addRoofs(t.roofs),f.send("rooflineDataUpdated",{isOldData:!t.isNewData,isNewRoofs:!0}),e&&$.refreshSize(),t.isNewData&&vt&&vt.flashSplitter&&(x(),delete vt.flashSplitter);for(var o=a.getResultCount(),i=1;i<o;i++){var n=a.getResultInfo(i);n&&y(n.path)&&L(n.path)}}}}),n.addConsumer("clearRoofline",{process:function(){f.send("rooflineCleared")}}),n.addConsumer("endRooflineCopy",{process:function(){var t=document.querySelectorAll(".hidden4copy");[].forEach.call(t,function(t){t.style.display="block"}),yt&&(yt.style.display="block")}}),n.addConsumer("uiInfo",{process:function(t){if(t){if(t.fontSize&&(document.body.style.fontSize=t.fontSize),t.scale){var e=t.scale;"string"==typeof e?o.setScale(parseFloat(e)):"number"==typeof e&&o.setScale(e)}t.configuration&&o.setConfiguration(t.configuration),Array.isArray(t.i18n)&&t.i18n.length&&n.receiveData("i18n",t.i18n);var i=p.getElementById("roofline_type_bar");t.defaultRooflineType&&(H=t.defaultRooflineType),t.defaultRooflineHrType&&(V=t.defaultRooflineHrType),t.dataOptions||t.enableIntRoofline?(i.style.display="",wt.init(t.dataOptions),o.setConfiguration({loops:{integratedRooflineType:t.dataOptions.groups.length>2}}),void 0!==t.useHierarchicalData&&wt.setOption("0",!!t.useHierarchicalData)):(i.style.display="none",void 0!==t.useHierarchicalData&&(O.getState().rooflineType=t.useHierarchicalData?V:H)),A()}}}),n.addConsumer("simpleRooflineView",{process:function(){document.body.classList.add("simple_view"),G.click()}}),n.addConsumer("hierarchy",{process:function(t){a.setHierarchicalData(t)}}),n.addConsumer("loopsths",{process:function(t){var e=O.getState();e&&!e.loopsThs&&(e.loopsThs=t,O.apply(void 0,"loopsThs"))}}),n.addConsumer("rooflineState",{process:function(t){O.apply(t)}}),n.addConsumer("onClose",{process:function(){O.onClose()}}),n.addConsumer("useHierarchicalData",{process:function(t){var e=!!t;wt.setOption("0",e)&&A()}});var $=function(){function t(t){if(window.rooflineActiveSelect&&!(t&&t.target&&t.target.classList.contains("no_close_popup")||t&&n.isRequestClick(t.target))){var e=window.rooflineActiveSelect;delete window.rooflineActiveSelect;var o=e.firstElementChild;o&&(o.style.left&&(o.style.left="",o.style.right=""),o.style.minWidth&&(o.style.minWidth="")),e.classList.remove("pressed"),window.removeEventListener("click",arguments.callee,!1)}}function e(t,e){t&&e&&(t.idvcBtnSpan||(t.idvcBtnSpan=p.createElement("","idvcjs_span",void 0,t,"div")),t.idvcBtnSpan.style.top||(t.idvcBtnSpan.style.top=e.offsetTop-1+"px"))}function o(e){window.rooflineActiveSelect&&t(),window.rooflineActiveSelect=e,window.addEventListener("click",t,!1)}var i=s.addExpansion({expansionClassName:"toolbar_expansion roofline_popup_shadow",bodyId:"roofline_zoom_toolbar",expandBtnId:"expand_toolbar_content"},function(){return!_()});return{refreshSize:function(){i.refreshSize()},connect:function(t,e,o){var i=p.getDomElement(t);i&&(e=e||i.onclick)&&(i.onclick="",o?s.setAnimatedClick(i,e,o):(i.classList.add("simple_click"),i.onclick=e))},defSelectBtnProc:function(i){var n=i.currentTarget;if(!(i&&i.target&&i.target.classList.contains("no_close_popup"))&&n)if(n.classList.toggle("pressed"),i.stopPropagation(),i.preventDefault(),n.classList.contains("pressed")){o(n);var r=n.firstElementChild,a=p.getElementPos(r);if(a.x<0){var s=p.getElementPos(n);r.style.left="-"+s.x+"px",r.style.right="auto"}e(n,r)}else t()},popupProc:function(t){var i=t.currentTarget;if((!i||!i.classList.contains("disabled"))&&i&&!i.classList.contains("pressed")){i.classList.add("pressed"),t.stopPropagation(),t.preventDefault(),o(i);var n=i.firstElementChild;s.updatePopupWidth(i,n),s.updatePopupPos(i,n),e(i,n)}}}}(),G=document.getElementById("select_point"),U=document.getElementById("select_zoom"),Z=document.getElementById("select_hand"),q=document.getElementById("undo_zoom"),K=document.getElementById("redo_zoom"),J=document.getElementById("cancel_zoom"),Q=document.getElementById("copy_content"),tt=document.getElementById("copy_content_select"),et=document.getElementById("roofline_summary"),ot=document.getElementById("self_caption"),it=document.getElementById("self_value"),nt=document.getElementById("self_measure"),rt=document.getElementById("total_caption"),at=document.getElementById("total_value"),st=document.getElementById("total_measure"),lt=s.addExpansion({expansionClassName:"summary_expansion roofline_popup_shadow",bodyId:"roofline_summary",expandBtnId:"expand_summary_content"}),ct={zoom:"zoom",point:"point",move:"move"},dt=ct.zoom,ut={x:void 0,y:void 0,processing:!1,lastFrame:void 0,centralPartPos:void 0,startDragging:function(t,e){this.x=t,this.y=e,this.lastFrame=void 0,this.processing=!0,this.centralPartPos=_t.centralPart.body.getBoundingClientRect(),_t.centralPart.body.style.cursor=p.Consts.browserPrefix+"grabbing",_t.centralPart.enableTooltip(!1),f.send("zoomFrameMoved",!0)},stopDragging:function(t,e){this.processing&&this.lastFrame&&(F.setZoom(this.lastFrame,{stopMoving:!0}),this.processing=!1),_t.centralPart.body.style.cursor=p.Consts.browserPrefix+"grab",_t.centralPart.enableTooltip(!0),f.send("zoomFrameMoved",!1)},dragging:function(t,e){if(this.processing&&this._isIn(t,e)){var o=_t.centralPart.screenP2LX(this.x),i=_t.centralPart.screenP2LY(this.y),n=_t.centralPart.screenP2LX(t),r=_t.centralPart.screenP2LY(e),a=F.moveCurrentZoomFrame(o-n,i-r);a&&!a.isWrongZoom&&this._isNewFrame(a)&&(this.lastFrame=a,f.send("rooflineDataUpdated",{isOldData:!0,movingZoomFrame:a}))}},_isNewFrame:function(t){return!this.lastFrame||this.lastFrame.minX!==t.minX||this.lastFrame.maxX!==t.maxX||this.lastFrame.minY!==t.minY||this.lastFrame.maxY!==t.minX},_isIn:function(t,e){return t>=this.centralPartPos.left&&t<=this.centralPartPos.right&&e>=this.centralPartPos.top&&e<=this.centralPartPos.bottom}},ft=[{type:ct.point,btn:G},{type:ct.zoom,btn:U},{type:ct.move,btn:Z,cursor:p.Consts.browserPrefix+"grab",on:function(){_t.centralPart.setDragProcessor(ut)},off:function(){_t.centralPart.createFreeSelection()}}];$.connect(G,T.bind(G,ct.point)),$.connect(U,T.bind(U,ct.zoom)),$.connect(Z,T.bind(Z,ct.move));$.connect(q,E.bind(q,"undo"),"pressing"),$.connect(K,E.bind(K,"redo"),"pressing"),$.connect(J,E.bind(J,"cancel"),"pressing"),$.connect(Q,function(){var t=mt.getMessage();setTimeout(C.bind(window,t),100)},"pressing"),$.connect(tt,$.defSelectBtnProc);var ht=1485,pt=1050,mt=function(){return{items:[{name:"htmlexport",id:"export_as_html",getMessage:function(t){var e=t,o=M();o.allRoofs="%allRoofs%";var i=a.getCompareData();return i&&i.length&&(o.compareData=i),e+="-"+JSON.stringify({rooflineData:o,rooflineState:O.getState({}),threadsInfo:"%threadsInfo%",summaryInfo:"%summaryInfo%",currentZoom:F?F.getCurrentZoom():null}).replace(/\"%(\w+)%\"/g,"$$$1$")}},{name:"svgexport",id:"export_as_svg",getMessage:function(t){if(this._initInputs(),this.widthEdit&&this.heightEdit)return this._checkInputValues(),t+"-"+z({width:parseInt(this.widthEdit.value),height:parseInt(this.heightEdit.value)})},apply:function(t){this._initInputs(),this.widthEdit&&this.heightEdit&&t&&(this.widthEdit.value=t.svgWidth||ht,this.heightEdit.value=t.svgHeight||pt)},saveState:function(t){function e(e,o,i){var n=parseInt(e);n&&n!==i?t[o]=n:delete t[o]}this._initInputs(),this.widthEdit&&this.heightEdit&&t&&(e(this.widthEdit.value,"svgWidth",ht),e(this.heightEdit.value,"svgHeight",pt))},_initInputs:function(){function t(t){t&&(t.hasAttribute("width")?this.widthEdit=t:this.heightEdit=t,t.onkeypress=s.filterNumberInput)}if(!this.widthEdit||!this.heightEdit){var e=document.getElementById(this.id);if(e){var o=e.querySelectorAll("input");[].forEach.call(o,t,this)}}},_checkInputValues:function(){function t(t,e){parseInt(t.value)||(t.value=e)}t(this.widthEdit,ht),t(this.heightEdit,pt)}}],index:0,apply:function(t){if(t){if(t.copyContentIndex>0){var e=this.items[t.copyContentIndex];e?(I(p.getElementById(e.id)),this.index=t.copyContentIndex):t.copyContentIndex=this.index}this.items.forEach(function(e){e&&e.apply&&e.apply(t)})}},saveState:function(t){t&&(t.copyContentIndex=this.index,this.items.forEach(function(e){e&&e.saveState&&e.saveState(t)}))},getMessage:function(){var t=this.items[this.index];if(t)return t.getMessage(t.name)}}}();O.addProcessor("copyContent",mt),document.getElementById("copy_content_items").addEventListener("click",function(t){t.target&&"li"===t.target.nodeName.toLowerCase()&&(I(t.target)&&O.save("copyContent"),setTimeout(Q.click.bind(Q),0))}),window.addEventListener("keydown",function(t){function e(t){return"input"===t.nodeName.toLowerCase()&&"number"===t.type||"text"===t.type}if(t.ctrlKey)switch(t.keyCode){case 65:e(t.target)?t.target.select():t.preventDefault();break;case 67:Q.click();break;case 107:case 187:t.preventDefault(),F.zoomIn();break;case 109:case 189:t.preventDefault(),F.zoomOut()}else 39!==t.keyCode||e(t.target)||t.preventDefault()},!1),e.addRadioGroupSetting("roofline_view_mode","viewMode",function(t){a.setWholeView("fittoview"!==t),f.send("rooflineDataUpdated",{isOldData:!0})},"fittoview");var gt=e.addBoolSetting("stackViewVisible"),vt=p.createHorzSplitter("roofline_content",40,{splitterSize:.4});vt.setSize("80%"),vt.addSash(),vt.afterUnfold=function(){var t;_t&&_t.currentPoint&&(t=_t.currentPoint.loopData),l.fill(t),gt.set(!0),vt.splitterDiv.removeAttribute(s.tooltipAttr),vt.sashDiv.removeAttribute(s.tooltipAttr)},vt.afterFoldSecondary=function(){a.isHierarchical()&&gt.get()&&gt.set(!1)},vt.secondaryDiv.setAttribute("data-caption","%roofline_callstack_caption%"),vt.secondaryDiv.classList.add("roofline_stack_view"),f.recv("loopsSelectionChanged",function(t){if(t){var e=!!t.quiet,o=t.points;R(e),!e&&o&&o.length&&C(o.join(";"))}});var _t=o.createRoofline(vt.primaryDiv),yt=p.createElement("","legend_area","roofline_legend",vt.primaryDiv);yt.addEventListener("click",function(t){"roofline_legend"===t.target.id&&(yt.classList.toggle("collapsed"),yt.classList.add("user_activity"))},!1),p.createElement("","axis_caption vert vert_text","roofline_vert_axis_caption",vt.primaryDiv),p.createElement("","axis_caption horz","roofline_horz_axis_caption",vt.primaryDiv);l.create(vt.secondaryDiv,f.send.bind(f,"loopHighlighted"),void 0,f.send.bind(f,"loopStateChanged"));_t.centralPart.onselectionchanged=function(t,e,o,i){if(dt===ct.zoom){var n={minX:t,maxX:o,minY:e,maxY:i};F.setZoom(n)}else dt===ct.point&&_t.selectPoints(t,e,o,i);_t.centralPart.hideSelection()},_t.onCurrentPointChanged.subscribe(null,function(t){vt.isSecondaryFolded()||l.fill(t?t.loopData:void 0)}),T(),window.saveLocalProperty=function(t,e){e=e||"",t&&C(t+"-"+JSON.stringify(e))},u.addProcessor({process:function(t){a.isHierarchical()&&t&&(t.length&&t.push({caption:"-"}),t.push({caption:vt.isSecondaryFolded()?c.getMessage("roofline_menu_show_callstack"):c.getMessage("roofline_menu_hide_callstack"),id:10,command:function(){vt.isSecondaryFolded()?vt.unfold():vt.foldSecondary()}}))}});var bt=function(){function t(t){var e;(e=t>0?p.format(c.getMessage("roofline_compare_data_label"),t.toString()):c.getMessage("roofline_compare_nodata_label"))&&(b.innerHTML=e)}function e(t){a.forEachLoops(a.getLoops(),function(e){if(!a.isFiltered()||!e.filtered){var o=e.rooflinePoint;if(o){(e.resIndex||0)===t?o.remClass(u):o.addClass(u)}}})}function o(){a.forEachLoops(a.getLoops(),function(t){if(!a.isFiltered()||!t.filtered){var e=t.rooflinePoint;e&&e.remClass(u)}})}function i(t){var e=-1;return t&&(D(t)||(t=t.parentElement),t&&t.classList&&!t.classList.contains(d)&&(e=B(t))),e}function r(t){var e;return t&&(t.caption||t.path)&&(e={caption:t.caption},t.path&&(e.path=t.path),t.unsaved&&(e=void 0)),e}function l(t){return!!t}var d="loading",u="loop_inactive_result",h=document.getElementById("roofline_compare_control"),g=document.getElementById("delete_compare"),v=document.getElementById("load_compare"),_=document.getElementById("loaded_compare_items"),y=document.getElementById("ready_compare_items"),b=document.getElementById("roofline_compare_content"),x=function(){return function(){var t=c.getMessage("roofline_compare_noitems_label");_.setAttribute("data-noitems",t),y.setAttribute("data-noitems",t)}}();$.connect(h,$.popupProc),$.connect(v,function(){L()},"pressing"),$.connect(g,function(){a.clearCompareData(),f.send("rooflineDataUpdated",{isOldData:!0}),S.update()}),y.addEventListener("click",function(t){if(D(t.target)){var e=B(t.target);e>=0&&L(w.items[e].path)}}),_.addEventListener("click",function(t){var e=t.target;if(e){var o;if(e.parentElement&&D(e.parentElement)&&(o=B(e.parentElement))>=1){var i=a.getResultInfo(o);if(i){i.compareItem&&(delete i.compareItem.added,delete i.compareItem),i.added&&delete i.added;var n=e.parentElement.classList;(n.contains(d)||n.contains("comparing"))&&C("cancelcompareloading-"+i.path)}a.removeResult(o),f.send("rooflineDataUpdated",{isOldData:!0}),S.update()}}}),_.addEventListener("mouseover",function(t){var o=t.target;if(o){var n=i(o);n>=0&&e(n)}},!1),_.addEventListener("mouseout",function(t){var e=t.target;if(e){i(e)>=0&&o()}},!1);var w={items:[],addItem:function(t,e){var o=this.items.find(function(o){var i=t.path&&o.path===t.path;return i&&!e&&t!==o&&(t.compareItem=o),i});return o?(e||(o.added=!0),!1):(e||(t.added=!0),this.items.unshift(t),!t.unsaved&&this.items.length>40&&this.items.pop(),!0)},clearAdded:function(){this.items.forEach(function(t){t.added&&delete t.added})},getCaption:function(t){var e=this.items.find(function(e){return t&&e.path===t});if(e)return e.caption},apply:function(t){if(t&&t.compareItems){var e=this.items.length,o=t.compareItems.map(r).filter(l);this.items=this.items.filter(function(t){return!(!t||!t.unsaved)}),this.items=this.items.concat(o),e!==this.items.length&&S&&S.update()}},saveState:function(t){t&&(t.compareItems=this.items.map(r).filter(l))}};n.addConsumer("addCompare",{process:function(t){function e(t){t&&(t.unsaved=!0,w.addItem(t,!0))}Array.isArray(t)?t.forEach(e):e(t),S.update()}});O.addProcessor("compareItems",w);var S={update:function(){var e=a.getResultCount();if(e>1){P(g,!0);var o,i="";for(o=0;o<e;o++){var n=a.isResultEmpty(o),r=a.getResultInfo(o),l=r.loading,c=r.comparing,u='"Loading: '+r.path+'"',f='"Comparing '+r.path+' with loaded results"',v='"'+r.path+'"';i+="<li"+function(t){var e="";return t.forEach(function(t){t.fl&&(e+=t.cl+" ")}),' class="'+e+'no_close_popup"'}([{fl:n,cl:"empty"},{fl:l,cl:d},{fl:c,cl:"comparing"}])+' data-index="'+o+'" '+(r.path?s.tooltipAttr+"="+(l?u:c?f:v):"")+' style="background-image:'+m.getPointIcon(r.pointConstructor||m.CirclePoint)+'">'+a.getResultCaption(o)+(o>0&&!W()?'<span class="zoom_button icon cross no_close_popup clear_compare"></span>':"")+"</li>"}_.innerHTML=i;var b=!1;for(o=1;o<e;o++)b=w.addItem(a.getResultInfo(o))||b;b&&O.save("compareItems")}else P(g,!1),p.removeAllChildren(_),w.clearAdded();i="",w.items.forEach(function(t,e){t.added||(i+='<li class="no_close_popup" data-index="'+e+'" '+s.tooltipAttr+'="'+t.path+'">'+t.caption+"</li>")}),y.innerHTML=i,t(_.childElementCount);var x=y.offsetParent;s.updatePopupWidth(h,x),s.updatePopupPos(h,x),$.refreshSize()},getCaption:function(t){return w.getCaption(t)},init:x,hide:function(){h.parentElement.style.display="none"}};return S}(),xt=function(){function t(t){if(!g)return y;var e=g.children[t];return e?parseInt(e.innerHTML,10):y}function e(t,e){if(v&&_){a.setThreadCount(t);if(_.querySelectorAll("input")){var o=_.querySelector('input[value="'+b+'"]'),i=_.querySelector('input[value="'+x+'"]');if(!i||!o)return void(v.innerHTML=t);t>l?(o.disabled=!0,o.parentElement.style.color="#ccc",e=d):(o.disabled=!1,o.parentElement.style.color="black"),void 0===e&&(e=o.checked?1:d),u=e,o.checked=!(u==d),i.checked=u==d,v.innerHTML=p.format(c.getMessage("roofline_N_threaded_per_socket_roofs"),t,u),a.setPackageCount(u)}}}function o(){a.getRoofs().length?f.send("rooflineDataUpdated",{isOldData:!0,isNewRoofs:!0}):S(h.getRoofsConfiguration(a.getThreadCount(),a.getRoofsStrategyId(),a.getPackageCount()).str())}function i(t){e(t),o()}function n(){e(a.getThreadCount()),O.save(L),o()}function r(t){if(!w){var e=m.getBoundingClientRect(),o=v.getBoundingClientRect();w=o.left-e.left,[].forEach.call(g.children,function(t){t.style.paddingLeft=w+"px"})}$.popupProc(t)}var s,l,d,u,m=document.getElementById("roofline_cores_control"),g=document.getElementById("core_number_items"),v=document.getElementById("roofline_cores_content"),_=document.getElementById("roofline_cores_select_items"),y=1,b="bind",x="spread";g.addEventListener("click",function(t){var e=t.target;if(e){var o;D(e)&&(o=B(e))>=0&&(s=o,O.save(C),i(parseInt(e.innerHTML,10)),O.save(L))}});var w=0;$.connect(m,r);var C="threadCount4RoofIdx";O.addProcessor(C,{apply:function(o){s=o&&void 0!==o[C]?o[C]:0,e(t(s))},saveState:function(t){t[C]=s}});var L="packageCount";return O.addProcessor(L,{apply:function(o){u=o&&void 0!==o[L]?o[L]:void 0,e(t(s),u)},saveState:function(t){t[L]=u}}),{init:function(o,i,r){function a(t,e,o){return'<li data-index="'+o+'" '+function(){var t="",o=[];return e&&o.push("font-weight:bold;background-color:#eee;color:black"),w&&o.push("padding-left:"+w+"px"),o.length&&(t='style="'+o.join(";")+'"'),t}()+">"+t+"</li>"}if(m&&_){!function(){if(g&&_){p.removeAllChildren(g),g.classList.remove("scrolled"),g.classList.remove("splitter");var t;if(_&&_.childElementCount>1)for(t=_.firstElementChild.nextElementSibling;t&&"core_number_items"!=t.id;){var e=t;t=t.nextElementSibling,_.removeChild(e)}}}(),innerHTML=a(1,1===o,0);for(var f=2,h=1;f<=i;f+=2,h++)innerHTML+=a(f,f===o,h);g.innerHTML=innerHTML,l=i/r,d=r,s=O.getState().threadCount4RoofIdx,(void 0===s||s>i/2)&&(s=Math.floor(o/2),O.save(C)),r>1?(!function(){function t(t,e,o){o=!!o;var i=document.createElement("input");i.type="radio",i.name="cores_radio_group",i.className="toolbar_item_input",i.onchange=n,i.value=t;var r=document.createElement("label");r.className="radio_settings_item no_close_popup",r.style.padding="0.3em",o&&(i.disabled=!0,r.style.display="none"),r.appendChild(i),r.appendChild(document.createTextNode(e)),_.appendChild(r)}g.classList.add("scrolled"),g.classList.add("splitter"),t("","",!0),t(b,c.getMessage("roofline_N_threaded_per_socket_bind_option")),t(x,p.format(c.getMessage("roofline_N_threaded_per_socket_spread_option"),r.toString()))}(),v.style.fontWeight="normal",u=O.getState().packageCount,u||(u=1),O.save(L)):u=void 0,e(t(s),u),$.refreshSize()}}}}(),wt=function(){function t(t,e){u=t,u===H&&f&&(e=f),g.innerHTML=e,_.disabled=u===H}function e(){var t;if(v&&v.childElementCount>1)for(t=v.firstElementChild.nextElementSibling;t;){var e=t;t=t.nextElementSibling,v.removeChild(e)}}function o(){y.disabled=!1}function i(){var t=this;if(t){var e=t.querySelectorAll("input:checked");1===e.length?e[0].disabled=!0:[].forEach.call(e,function(t){t.disabled=!1})}}function n(t,e){return(t?"; ":"")+e}function r(t,e){var o=!1,i=v.querySelector('input[value="'+t+'"]');return i&&i.checked!==e&&(i.checked=e,o=!0),o}function a(e){if(e){[].forEach.call(d,function(t){t.checked=!1});var o=e.split("-"),r="";o.forEach(function(t){if(t){var e=v.querySelector('input[value="'+t+'"]');e?(e.checked=!0,r+=n(r,e.rooflineCaption)):(e=v.querySelector("input["+L+'="'+t+'"]'))&&(r+=n(r,e.getAttribute(S)))}}),w.forEach(function(t){i.call(t)}),t(e,r)}}function l(){var e="",o="",i="";[].forEach.call(d,function(t){t&&t.offsetParent&&(t.checked?(e+=n(e,t.rooflineCaption),o+=i+t.value):"checkbox"===t.type&&t.hasAttribute(L)&&t.hasAttribute(S)&&(o+=i+t.getAttribute(L),e+=n(e,t.getAttribute(S)))),o&&!i&&(i="-")}),t(o,e),$.refreshSize(),O.save(C)}function c(t,e,i,n){if(t&&e){var r=document.createElement("input");r.type=i?"radio":"checkbox",i&&(r.name=i),r.value=e.value,r.rooflineCaption=e.caption,r.className="toolbar_item_input no_close_popup",r.onchange=o,n&&(r.setAttribute(L,n.value),r.setAttribute(S,n.caption));var a=document.createElement("label");if(a.className="roofline_type_select_caption no_close_popup",a.appendChild(r),a.appendChild(document.createTextNode(e.caption)),e.expl){p.createElement("?","explanation_symbol hierarchy_item_caption no_close_popup",void 0,a,"label").setAttribute(s.tooltipAttr,e.expl)}t.appendChild(a)}}var d,u,f,h=document.getElementById("roofline_type_control"),m=h.firstElementChild,g=m.nextElementSibling,v=m.firstElementChild,_=v.nextElementSibling.firstElementChild,y=_.nextElementSibling,b=y.nextElementSibling,x=0,w=[],C="rooflineType",L="data-noValue",S="data-noValueCaption";return $.connect(h,$.popupProc),_.disabled=!0,y.disabled=!0,_.onclick=function(){!_.disabled&&H&&(_.disabled=!0,a(H),y.onclick())},y.onclick=function(){y.disabled=!0,l(),A()},b.onclick=function(){y.disabled||(y.disabled=!0,a(u))},{init:function(t){t&&t.groups&&Array.isArray(t.groups)&&(e(),f=t.defConfigurationCaption,x=0,w=[],t.groups.forEach(function(t){if(t){var e;t.isRadio&&(x++,e="roofline_radio_group_"+x);var o=p.createElement("","roofline_type_group no_close_popup","",v);if(t.caption&&(o.classList.add("with_caption"),o.setAttribute("data-caption",t.caption)),t.isCertainValue&&(o.addEventListener("change",i.bind(o),!1),w.push(o)),Array.isArray(t.options))for(var n=t.isTwoStates?2:1,r=0,a=t.options.length;r<a;r+=n)c(o,t.options[r],e,2===n?t.options[r+1]:void 0)}}),d=v.querySelectorAll("input"),O.addProcessor(C,{apply:function(t){a(t?t[C]||H:H)},saveState:function(t){t[C]=u}}))},setValue:function(t){t!==u&&a(t)},setOption:function(t,e){var o=r(t,e);return o&&l(),o}}}();new Promise(function(t){t()}).then(function(){var t=[r];(function(){window.ondblclick=C.bind(window,"refresh"),N.setInitialized()}).apply(null,t)}).catch(N.setInitialized.bind(N).bind(this))}).apply(null,t)}).catch(o.oe),void 0!==(B=function(){}.call(e,o,e,t))&&(t.exports=B),t.exports={I18n:u,StateManager:g,Utils:s,Request:d,Zooming:m,Data:h}},function(t,e){function o(t){throw new Error("Cannot find module '"+t+"'.")}o.keys=function(){return[]},o.resolve=o,t.exports=o,o.id=17},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),o.d(e,"uiInfo",function(){return n});var i=o(19),n={i18n:i.xmc.catalog[0].msg.map(function(t){return{id:t.$.name,message:t._}})}},function(t,e){t.exports={xmc:{$:{version:"1.1"},catalog:[{$:{name:"discclient.roofline",lang:"en"},msg:[{_:"Roofline data is not available",$:{name:"roofline_collect_trc_title"}},{_:"Roofline report depends on the FLOP data, which is unavailable.<br/><br/>To collect the FLOP data, select the <b>FLOP</b> checkbox under the <b>Find Trip Counts and FLOP</b> analysis section in the <b>Workflow</b> pane, and then run the Trip Counts and FLOP analysis.",$:{name:"roofline_collect_trc_descr"}},{_:"Roofline report depends on the FLOP and Integer Operations data, which is unavailable.<br/><br/>To collect the FLOP and Integer Operations data, select the <b>FLOP</b> checkbox under the <b>Find Trip Counts and FLOP</b> analysis section in the <b>Workflow</b> pane, and then run the Trip Counts and FLOP analysis.",$:{name:"roofline_collect_trc_descr_int"}},{_:"Roofline data with callstacks is not available",$:{name:"roofline_collect_trc_title_topdown"}},{_:"Roofline report with callstacks depends on the FLOP data, which is unavailable<br/><br/>To collect the FLOP data, select the <b>FLOP</b> and <b>Enable Roofline with Callstacks</b> checkboxes in the <b>Workflow</b> pane, and then run the Trip Counts and FLOP analysis.",$:{name:"roofline_collect_trc_descr_topdown"}},{_:"Roofline report with callstacks depends on the FLOP and Integer Operations  data, which is unavailable<br/><br/>To collect the FLOP and Integer Operations data, select the <b>FLOP</b> and <b>Enable Roofline with Callstacks</b> checkboxes in the <b>Workflow</b> pane, and then run the Trip Counts and FLOP analysis.",$:{name:"roofline_collect_trc_descr_topdown_int"}},{_:"Roofline data is not available",$:{name:"roofline_no_data_title"}},{_:"No floating-point operations detected.",$:{name:"roofline_no_data_descr"}},{_:"No integer operations detected.",$:{name:"roofline_no_data_descr_int"}},{_:"Roofline data is not available",$:{name:"roofline_filtered_out_title"}},{_:'FLOPS data is available, yet filtered out. To see the results, reset all filters in Survey report and select "Loops And Functions" mode.',$:{name:"roofline_filtered_out_descr"}},{_:'INTOPS data is available, yet filtered out. To see the results, reset all filters in Survey report and select "Loops And Functions" mode.',$:{name:"roofline_filtered_out_descr_int"}},{_:"Save roofline image",$:{name:"roofline_dlg_save_image"}},{_:"Open roofs file",$:{name:"roofline_dlg_open_roofs"}},{_:"Save roofs file",$:{name:"roofline_dlg_save_roofs"}},{_:"Open loops colors file",$:{name:"roofline_dlg_open_loops_colors"}},{_:"Save loops colors file",$:{name:"roofline_dlg_save_loops_colors"}},{_:"Load compare data",$:{name:"roofline_dlg_open_compare"}},{_:"Save compare data",$:{name:"roofline_dlg_save_compare"}},{_:"Export Roofline as HTML",$:{name:"roofline_dlg_html_export"}},{_:"Export Roofline as SVG",$:{name:"roofline_dlg_svg_export"}},{_:"Bitmap files (*.bmp)|*.bmp",$:{name:"roofline_dlg_bmp_filter"}},{_:"Json files (*.json)|*.json|Any files (*.*)|*.*",$:{name:"roofline_dlg_def_filter"}},{_:"HTML files (*.html)|*.html",$:{name:"roofline_dlg_html_filter"}},{_:"Roofline results (*.advixeexp;*.advixeexpz)|*.advixeexp;*.advixeexpz|Json files (*.json)|*.json|Any files (*.*)|*.*",$:{name:"roofline_dlg_compare_filter"}},{_:"SVG files (*.svg)|*.svg",$:{name:"roofline_dlg_svg_filter"}},{_:"with Callstacks",$:{name:"roofline_compare_callstacks_postfix"}},{_:"Integer",$:{name:"roofline_compare_integer_postfix"}},{_:"Mixed",$:{name:"roofline_compare_mixed_postfix"}},{_:"Compared results",$:{name:"roofline_compare_results_label",meta:"unofficial"}},{_:"Ready for comparison",$:{name:"roofline_compare_recent_label",meta:"unofficial"}},{_:"Compare",$:{name:"roofline_compare_nodata_label"}},{_:"{1} Compared Results",$:{name:"roofline_compare_data_label",meta:"unofficial"}},{_:"No Items",$:{name:"roofline_compare_noitems_label",meta:"unofficial"}},{_:"Result:",$:{name:"roofline_compare_tooltip_result_label"}},{_:"Current",$:{name:"roofline_compare_current_result_label"}},{_:"No roofline data found in the selected result.",$:{name:"roofline_compare_nodata_message"}},{_:"No Data",$:{name:"roofline_compare_nodata_caption"}},{_:"<b>Δ{1}: {2}</b> ({3})",$:{name:"roofline_matching_loops_delta",meta:"unofficial"}},{_:"- the difference in <b>{1}</b> between two matching loops as percentage of the maximum value, measured in {2}",$:{name:"roofline_matching_loops_delta_description",meta:"unofficial"}},{_:"Filter In Selection",$:{name:"roofline_filter_in_label"}},{_:"Filter Out Selection",$:{name:"roofline_filter_out_label"}},{_:"Clear Filters",$:{name:"roofline_filter_clear_label"}},{_:"Self Elapsed Time",$:{name:"roofline_self_elapsed_time"}},{_:"Self Time",$:{name:"roofline_self_time"}},{_:"Total Elapsed Time",$:{name:"roofline_total_elapsed_time"}},{_:"Total Time",$:{name:"roofline_total_time"}},{_:"s",$:{name:"roofline_time_sec"}},{_:"loop self elapsed time / program total elapsed time * 100",$:{name:"roofline_legend_caption"}},{_:"Physical Cores:",$:{name:"roofline_physical_cores_count"}},{_:"Number of Physical CPU cores",$:{name:"roofline_cores_expl"}},{_:"App Threads:",$:{name:"roofline_used_threads_count"}},{_:"Number of CPU threads used in Application",$:{name:"roofline_threads_expl"}},{_:"Arithmetic Intensity",$:{name:"roofline_ai_axis_caption"}},{_:"FLOP/Byte",$:{name:"roofline_ai_axis_measure"}},{_:"Performance",$:{name:"roofline_perf_axis_caption"}},{_:"GFLOPS",$:{name:"roofline_perf_axis_measure"}},{_:"Arithmetic Intensity",$:{name:"roofline_ai_axis_caption_int"}},{_:"INTOP/Byte",$:{name:"roofline_ai_axis_measure_int"}},{_:"Performance",$:{name:"roofline_perf_axis_caption_int"}},{_:"GINTOPS",$:{name:"roofline_perf_axis_measure_int"}},{_:"GB/sec",$:{name:"roofline_mem_roof_measure"}},{_:"GFLOPS",$:{name:"roofline_calc_roof_measure"}},{_:"Self ",$:{name:"roofline_value_prefix"}},{_:"Total ",$:{name:"roofline_value_prefix1"}},{_:"Callstack:",$:{name:"roofline_callstack_caption"}},{_:"Click to show callstack",$:{name:"roofline_show_callstack_tooltip"}},{_:"{1} loop total",$:{name:"roofline_histogram_loop"}},{_:"{1} loops total",$:{name:"roofline_histogram_loops"}},{_:"{1}% - {2} loop",$:{name:"roofline_histogram_tooltip_loop"}},{_:"{1}% - {2} loops",$:{name:"roofline_histogram_tooltip_loops"}},{_:"Roofline with Callstacks",$:{name:"roofline_with_callstacks"}},{_:"Roofline with Callstacks provides aggregated data for outermost loops and functions. It also separates the data for the cases when the same loop is invoked from different caller functions. This mode enables Roofline Callstack view and provides synchronization with program Top-Down call tree.",$:{name:"roofline_with_callstacks_expl"}},{_:"Cores:",$:{name:"roofline_N_threaded_roofs"}},{_:"\r\n      Number of cores used for roof modeling.<br/>\r\n      Choose the number of cores to scale up (or down) the roof values. The roof values rely on your application threading configuration and represent peak performance for the code on the host machine.<br/>\r\n      Choose <b>one</b> core for single-threaded applications.<br/>\r\n      Choose number of cores near to number of application threads, for applications with number of threads less than available physical cores on system.<br/>\r\n      Choose <b>maximum</b> number of physical cores, for applications with number of threads greater than available CPU cores.\r\n    ",$:{name:"roofline_N_threaded_roofs_expl",meta:"unofficial"}},{_:" {1} on {2} socket(s)",$:{name:"roofline_N_threaded_per_socket_roofs"}},{_:"Bind cores to 1 socket",$:{name:"roofline_N_threaded_per_socket_bind_option"}},{_:"Spread cores between all {1} sockets",$:{name:"roofline_N_threaded_per_socket_spread_option"}},{_:"Apply",$:{name:"roofline_configuration_apply"}},{_:"Cancel",$:{name:"roofline_configuration_cancel"}},{_:"Collapse",$:{name:"roofline_menu_collapse"}},{_:"Expand",$:{name:"roofline_menu_expand"}},{_:"Collapse Root",$:{name:"roofline_menu_collapse_root"}},{_:"Expand All",$:{name:"roofline_menu_expand_all"}},{_:"Show Callstack",$:{name:"roofline_menu_show_callstack"}},{_:"Hide Callstack",$:{name:"roofline_menu_hide_callstack"}},{$:{name:"roofline_zone_theoretically"}},{_:"Memory bound",$:{name:"roofline_zone_memory_bound"}},{_:"Vectorized",$:{name:"roofline_zone_vector_memory_line1"}},{_:"Memory bound",$:{name:"roofline_zone_vector_memory_line2"}},{_:"Bound by compute",$:{name:"roofline_zone_mixed_line1"}},{_:"and memory roofs",$:{name:"roofline_zone_mixed_line2"}},{_:"Scalar",$:{name:"roofline_zone_scalar_compute_line1"}},{_:"Compute bound",$:{name:"roofline_zone_scalar_compute_line2"}},{_:"Compute bound",$:{name:"roofline_zone_compute_bound"}},{_:"Kernels in this zone are fundamentally memory bound: the upper roofs are memory roofs",$:{name:"roofline_zone_memory_description"}},{_:"Vectorized kernels in this zone are fundamentally memory bound: the upper roofs are memory roofs",$:{name:"roofline_zone_vector_memory_description"}},{_:"Kernels in this zone are fundamentally compute bound, but also have upper memory roofs",$:{name:"roofline_zone_mixed_description"}},{_:"Scalar kernels in this zone are fundamentally compute bound: the upper roofs are compute roofs",$:{name:"roofline_zone_scalar_compute_description"}},{_:"Kernels in this zone are fundamentally compute bound: upper roofs are compute roofs",$:{name:"roofline_zone_compute_description"}},{_:"Roofs Settings",$:{name:"roofline_settings_roofs_caption",meta:"unofficial"}},{_:"Use single-threaded benchmark results to build roofs",$:{name:"roofline_settings_use_single_thread_strategy"}},{_:"\r\n      Select this checkbox to build roofs according to single-threaded benchmark results.<br/>\r\n      Roof values in the chart will be based on single-threaded benchmark results scaled up to the <b>Cores used for roof modeling</b>.<br/>\r\n      By default, all roof values are based on multi-threaded benchmark result scaled down by the <b>Cores used for roof modeling</b>.\r\n    ",$:{name:"roofline_settings_use_single_thread_strategy_expl"}},{_:"Roof Name",$:{name:"roofline_settings_roof_name"}},{_:"Visible",$:{name:"roofline_settings_roof_visible"}},{_:"Selected",$:{name:"roofline_settings_roof_selected"}},{_:"Value",$:{name:"roofline_settings_roof_value"}},{_:"Default",$:{name:"roofline_settings_roof_default"}},{_:"Load...",$:{name:"roofline_settings_roof_load"}},{_:"Save...",$:{name:"roofline_settings_roof_save"}},{_:"Loop Weight Representation",$:{name:"roofline_settings_loop_caption"}},{_:"Cancel",$:{name:"roofline_settings_loop_cancel"}},{_:"Default",$:{name:"roofline_settings_loop_default"}},{_:"Size",$:{name:"roofline_settings_loop_size"}},{_:"Color",$:{name:"roofline_settings_loop_color"}},{_:"Visible",$:{name:"roofline_settings_loop_visible"}},{_:"Fixed",$:{name:"roofline_settings_loop_color_fixed"}},{_:"Time",$:{name:"roofline_settings_loop_color_time"}},{_:"Vectorization",$:{name:"roofline_settings_loop_color_vectorization"}},{_:"Default loop color",$:{name:"roofline_settings_loop_color_default"}},{_:"No self time loop color",$:{name:"roofline_settings_loop_color_nst"}},{_:"Roofline View Settings",$:{name:"roofline_settings_guidance_caption"}},{_:"Color Roofline zones",$:{name:"roofline_settings_zone_coloring"}},{_:"Roofline View Settings",$:{name:"roofline_settings_representation_caption"}},{_:"Show optimal scale for each Roofline view",$:{name:"roofline_settings_fit_to_view"}},{_:"Adjusts the view size to the optimal value that best fits all dots on the current Roofline chart. In other words, the x and y axes change depending on the type of data displayed (Roofline for integers, Roofline with callstacks, etc.). This option is good for examining each Roofline view, but less suitable for comparing different Roofline views.",$:{name:"roofline_settings_fit_to_view_expl"}},{_:"Show one scale that accommodates all Roofline views",$:{name:"roofline_settings_one_view"}},{_:"Adjusts to the widest/tallest view to fit all dots on all possible Roofline views for this specific Roofline analysis. In other words, the x and y axes remain constant regardless of the type of data displayed (Roofline for integers, Roofline with callstacks, etc.). This option is good for visually comparing different Roofline views, but less suitable for examining a specific Roofline view.",$:{name:"roofline_settings_one_view_expl"}},{_:"Selects Loops By Mouse Rect",$:{name:"roofline_toolbar_select_point"}},{_:"Zoom By Mouse Rect",$:{name:"roofline_toolbar_select_zoom"}},{_:"Move View By Mouse",$:{name:"roofline_toolbar_select_move"}},{_:"Undo",$:{name:"roofline_toolbar_undo"}},{_:"Redo",$:{name:"roofline_toolbar_redo"}},{_:"Cancel Zoom",$:{name:"roofline_toolbar_cancel_zoom"}},{_:"Copy To Clipboard",$:{name:"roofline_toolbar_copy_clipboard"}},{_:"Save To File",$:{name:"roofline_toolbar_save_file"}},{_:"Save For Comparison",$:{name:"roofline_toolbar_save_compare"}},{_:"Clear comparison result(s)",$:{name:"roofline_toolbar_clear_compare"}},{_:"Load result for comparison",$:{name:"roofline_toolbar_load_compare"}},{_:"Export as HTML",$:{name:"roofline_toolbar_html_export"}},{_:"Export as SVG",$:{name:"roofline_toolbar_svg_export"}},{_:"Width:",$:{name:"roofline_toolbar_svg_width"}},{_:"Height:",$:{name:"roofline_toolbar_svg_height"}},{_:"; processes  data type(s)",$:{name:"roofline_vectorization_types"},arg:[{$:{name:"%1"}}]},{_:"Synchronize zoom with Roofline chart without callstacks",$:{name:"roofline_zoom_synchronize"}},{_:"Please, Wait for Data Loading...",$:{name:"roofline_loading"}},{_:"Program metrics",$:{name:"roofline_summary_program_metrics"}},{_:"Loop metrics",$:{name:"roofline_summary_loop_metrics"}},{_:"Platform information",$:{name:"roofline_summary_platform_info"}},{_:"Advisor result location",$:{name:"roofline_path_to_results"}},{_:"Intel Advisor Website",$:{name:"roofline_product_link_title"}},{_:"Collected on:",$:{name:"roofline_collected_on"}},{_:"Performance Metrics Summary",$:{name:"roofline_summary_result"}}]}]}}}]);</script><noscript>Open the exported Intel&reg; Advisor HTML file in your browser. NOTE: The HTML file uses running scripts to provide a full interactive experience.</noscript></body></html>